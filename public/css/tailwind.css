@import "tailwindcss" source(none);
@import "../../node_modules/flowbite/src/themes/default.css";

@source "../../templates/**/*.html.twig";
@source "../../public/*.html";
@source "../../public/js/**/*.js";
@source "../../src/Infrastructure/Twig/*.php";

@plugin 'tailwind-scrollbar';
@plugin "flowbite/plugin";
@source "../../node_modules/flowbite";

@theme {
    --text-xxs: 0.625rem;
    --color-strava-orange: #F26722;
    --color-grey-yo: #cccccc;

    --animate-fade-in-chat-message: chat-message 0.15s ease-out 0s forwards;
    @keyframes chat-message {
        0% {
            opacity: 0;
            transform: scale(0.95);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }
}

@custom-variant aria-asc (&[aria-sort="ascending"]);
@custom-variant aria-desc (&[aria-sort="descending"]);

@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

@layer utilities {
    body .lg-outer {
        z-index: 1500 !important;
    }

    body .lg-backdrop {
        z-index: 1490 !important;
        opacity: 0.9 !important;
    }

    .overflow-auto, .overflow-x-auto{
        @apply scrollbar-thin;
    }

    .leaflet-tile-pane {
        -webkit-filter: grayscale(100%);
        filter: grayscale(100%);
    }

    #heatmap .leaflet-tile-pane {
        -webkit-filter: grayscale(0);
        filter: grayscale(0);
    }

    #heatmap.enable-grey-scale .leaflet-tile-pane {
        -webkit-filter: grayscale(100%) brightness(75%);
        filter: grayscale(100%) brightness(75%);
    }

    .leaflet-popup-content-wrapper .leaflet-popup-content{
        @apply text-base! m-0! leading-none!;
    }

    .leaflet-control--custom {
        @apply rounded-sm border-2 border-black/30 bg-white bg-clip-padding divide-y divide-grey-yo;

        & li {
            @apply p-1 cursor-pointer hover:bg-[#f4f4f4];
        }
    }

    .message {
        & p {
            @apply mb-3 last:mb-0;
        }

        & h1, & h2, & h3, & h4, & h5, & h6 {
            @apply font-semibold text-gray-900 mb-2 mt-4 first:mt-0;
        }

        & h1 { @apply text-xl; }
        & h2 { @apply text-lg; }
        & h3 { @apply text-base; }

        & ul, & ol {
            @apply mb-3 pl-5;
        }

        & ul {
            @apply list-disc;

            & ul {
                @apply list-[circle] mt-1 mb-0;
            }
        }

        & ol {
            @apply list-decimal;

            & ol {
                @apply list-[lower-alpha] mt-1 mb-0;
            }
        }

        & li {
            @apply mb-1;

            & > p {
                @apply mb-1;
            }

            & > ul, & > ol {
                @apply mt-1 mb-1;
            }
        }

        & code {
            @apply bg-gray-100 text-gray-800 px-1 py-0.5 rounded text-sm font-mono;
        }

        & pre {
            @apply bg-gray-100 rounded-lg p-3 mb-3 overflow-x-auto;

            & code {
                @apply bg-transparent p-0 text-sm;
            }
        }

        & a {
            @apply text-strava-orange hover:underline;
        }

        & strong {
            @apply font-semibold text-gray-900;
        }

        & em {
            @apply italic;
        }

        & blockquote {
            @apply border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-3;

            & p {
                @apply mb-2 last:mb-0;
            }
        }

        & hr {
            @apply my-4 border-gray-200;
        }

        & table {
            @apply w-full mb-3 border-collapse;

            & th, & td {
                @apply border border-gray-300 px-3 py-2 text-left;
            }

            & th {
                @apply bg-gray-100 font-semibold;
            }
        }
    }

    .autoComplete_wrapper {
        @apply inline-block relative w-full;

        & > ul {
            @apply absolute max-h-62 overflow-y-scroll left-0 right-0 bottom-15 p-0 z-10 list-none rounded-lg bg-white border border-gray-200 shadow-lg outline-none transition-opacity duration-150 ease-in-out;

            &:empty,
            &[hidden] {
                @apply block opacity-0 scale-0;
            }

            & > li {
                @apply m-1 p-2 text-left text-gray-900 rounded-lg bg-white whitespace-nowrap overflow-hidden text-ellipsis transition-all duration-200 ease-in-out;

                & mark {
                    @apply bg-transparent text-strava-orange font-bold;
                }

                &:hover,
                &[aria-selected="true"] {
                    @apply cursor-pointer bg-strava-orange/15;
                }
            }
        }
    }
}

@layer components {
    div.filter-dropdown > button[data-dropdown-toggle]{
        @apply cursor-pointer w-fit text-strava-orange border border-strava-orange [&.active]:text-white [&.active]:bg-strava-orange [&.active]:hover:bg-orange-600 [&.active]:hover:border-orange-600 hover:ring-3 hover:outline-hidden hover:ring-orange-300 font-medium rounded-lg text-sm px-3 py-2 inline-flex items-center justify-between
    }

    div.tabs.tabs--default{
        @apply mb-4 border-b-2 border-gray-100;

        & > ul{
            @apply flex gap-x-2 overflow-x-auto -mb-0.5 text-sm font-medium text-center;

            & > li {
                @apply shrink-0;

                & > a {
                    @apply inline-flex items-center justify-center p-2 border-b-2;
                }
            }
        }
    }

    ul.tabs.tabs--pills{
        @apply inline-flex rounded-md shadow-xs divide-x divide-gray-200;

        & > li {
            @apply flex gap-x-1 shrink-0 cursor-pointer bg-white border-gray-200 border-t border-b first:border-l last:border-r first:rounded-s-lg last:rounded-e-lg;

            & > a {
                @apply inline-flex gap-x-1 items-center px-4 py-1 text-sm font-medium hover:text-strava-orange;
            }
        }
    }
}

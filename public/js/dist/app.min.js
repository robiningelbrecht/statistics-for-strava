/*! For license information please see app.min.js.LICENSE.txt */
(()=>{var t={360:function(t){t.exports=function(){"use strict";var t=function(){return t=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},t.apply(this,arguments)},e="lgUpdateSlides",i="lgPosterClick",s="lgBeforeNextSlide",o="lgBeforePrevSlide",r={mode:"lg-slide",easing:"ease",speed:400,licenseKey:"0000-0000-000-0000",height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:300,container:"",startAnimationDuration:400,zoomFromOrigin:!0,hideBarsDelay:0,showBarsAfter:1e4,slideDelay:0,supportLegacyBrowser:!0,allowMediaOverlap:!1,videoMaxSize:"1280-720",loadYouTubePoster:!0,defaultCaptionHeight:0,ariaLabelledby:"",ariaDescribedby:"",resetScrollPosition:!0,hideScrollbar:!1,closable:!0,swipeToClose:!0,closeOnTap:!0,showCloseIcon:!0,showMaximizeIcon:!1,loop:!0,escKey:!0,keyPress:!0,trapFocus:!0,controls:!0,slideEndAnimation:!0,hideControlOnEnd:!1,mousewheel:!1,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:2,numberOfSlideItemsInDom:10,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:0,iframeWidth:"100%",iframeHeight:"100%",iframeMaxWidth:"100%",iframeMaxHeight:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],extraProps:[],exThumbImage:"",isMobile:void 0,mobileSettings:{controls:!1,showCloseIcon:!1,download:!1},plugins:[],strings:{closeGallery:"Close gallery",toggleMaximize:"Toggle maximize",previousSlide:"Previous slide",nextSlide:"Next slide",download:"Download",playVideo:"Play video",mediaLoadingFailed:"Oops... Failed to load content..."}},n=function(){function t(t){return this.cssVenderPrefixes=["TransitionDuration","TransitionTimingFunction","Transform","Transition"],this.selector=this._getSelector(t),this.firstElement=this._getFirstEl(),this}return t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},t.prototype._getSelector=function(t,e){return void 0===e&&(e=document),"string"!=typeof t?t:(e=e||document,"#"===t.substring(0,1)?e.querySelector(t):e.querySelectorAll(t))},t.prototype._each=function(t){return this.selector?(void 0!==this.selector.length?[].forEach.call(this.selector,t):t(this.selector,0),this):this},t.prototype._setCssVendorPrefix=function(t,e,i){var s=e.replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()});-1!==this.cssVenderPrefixes.indexOf(s)?(t.style[s.charAt(0).toLowerCase()+s.slice(1)]=i,t.style["webkit"+s]=i,t.style["moz"+s]=i,t.style["ms"+s]=i,t.style["o"+s]=i):t.style[s]=i},t.prototype._getFirstEl=function(){return this.selector&&void 0!==this.selector.length?this.selector[0]:this.selector},t.prototype.isEventMatched=function(t,e){var i=e.split(".");return t.split(".").filter(function(t){return t}).every(function(t){return-1!==i.indexOf(t)})},t.prototype.attr=function(t,e){return void 0===e?this.firstElement?this.firstElement.getAttribute(t):"":(this._each(function(i){i.setAttribute(t,e)}),this)},t.prototype.find=function(t){return a(this._getSelector(t,this.selector))},t.prototype.first=function(){return this.selector&&void 0!==this.selector.length?a(this.selector[0]):a(this.selector)},t.prototype.eq=function(t){return a(this.selector[t])},t.prototype.parent=function(){return a(this.selector.parentElement)},t.prototype.get=function(){return this._getFirstEl()},t.prototype.removeAttr=function(t){var e=t.split(" ");return this._each(function(t){e.forEach(function(e){return t.removeAttribute(e)})}),this},t.prototype.wrap=function(t){if(!this.firstElement)return this;var e=document.createElement("div");return e.className=t,this.firstElement.parentNode.insertBefore(e,this.firstElement),this.firstElement.parentNode.removeChild(this.firstElement),e.appendChild(this.firstElement),this},t.prototype.addClass=function(t){return void 0===t&&(t=""),this._each(function(e){t.split(" ").forEach(function(t){t&&e.classList.add(t)})}),this},t.prototype.removeClass=function(t){return this._each(function(e){t.split(" ").forEach(function(t){t&&e.classList.remove(t)})}),this},t.prototype.hasClass=function(t){return!!this.firstElement&&this.firstElement.classList.contains(t)},t.prototype.hasAttribute=function(t){return!!this.firstElement&&this.firstElement.hasAttribute(t)},t.prototype.toggleClass=function(t){return this.firstElement?(this.hasClass(t)?this.removeClass(t):this.addClass(t),this):this},t.prototype.css=function(t,e){var i=this;return this._each(function(s){i._setCssVendorPrefix(s,t,e)}),this},t.prototype.on=function(e,i){var s=this;return this.selector?(e.split(" ").forEach(function(e){Array.isArray(t.eventListeners[e])||(t.eventListeners[e]=[]),t.eventListeners[e].push(i),s.selector.addEventListener(e.split(".")[0],i)}),this):this},t.prototype.once=function(t,e){var i=this;return this.on(t,function(){i.off(t),e(t)}),this},t.prototype.off=function(e){var i=this;return this.selector?(Object.keys(t.eventListeners).forEach(function(s){i.isEventMatched(e,s)&&(t.eventListeners[s].forEach(function(t){i.selector.removeEventListener(s.split(".")[0],t)}),t.eventListeners[s]=[])}),this):this},t.prototype.trigger=function(t,e){if(!this.firstElement)return this;var i=new CustomEvent(t.split(".")[0],{detail:e||null});return this.firstElement.dispatchEvent(i),this},t.prototype.load=function(t){var e=this;return fetch(t).then(function(t){return t.text()}).then(function(t){e.selector.innerHTML=t}),this},t.prototype.html=function(t){return void 0===t?this.firstElement?this.firstElement.innerHTML:"":(this._each(function(e){e.innerHTML=t}),this)},t.prototype.append=function(t){return this._each(function(e){"string"==typeof t?e.insertAdjacentHTML("beforeend",t):e.appendChild(t)}),this},t.prototype.prepend=function(t){return this._each(function(e){"string"==typeof t?e.insertAdjacentHTML("afterbegin",t):t instanceof HTMLElement&&e.insertBefore(t.cloneNode(!0),e.firstChild)}),this},t.prototype.remove=function(){return this._each(function(t){t.parentNode.removeChild(t)}),this},t.prototype.empty=function(){return this._each(function(t){t.innerHTML=""}),this},t.prototype.scrollTop=function(t){return void 0!==t?(document.body.scrollTop=t,document.documentElement.scrollTop=t,this):window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},t.prototype.scrollLeft=function(t){return void 0!==t?(document.body.scrollLeft=t,document.documentElement.scrollLeft=t,this):window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},t.prototype.offset=function(){if(!this.firstElement)return{left:0,top:0};var t=this.firstElement.getBoundingClientRect(),e=a("body").style().marginLeft;return{left:t.left-parseFloat(e)+this.scrollLeft(),top:t.top+this.scrollTop()}},t.prototype.style=function(){return this.firstElement?this.firstElement.currentStyle||window.getComputedStyle(this.firstElement):{}},t.prototype.width=function(){var t=this.style();return this.firstElement.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)},t.prototype.height=function(){var t=this.style();return this.firstElement.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)},t.eventListeners={},t}();function a(t){return function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),new n(t)}var l=["src","sources","subHtml","subHtmlUrl","html","video","poster","slideName","responsive","srcset","sizes","iframe","downloadUrl","download","width","facebookShareUrl","tweetText","iframeTitle","twitterShareUrl","pinterestShareUrl","pinterestText","fbHtml","disqusIdentifier","disqusUrl"];function c(t){return"href"===t?"src":t=(t=(t=t.replace("data-","")).charAt(0).toLowerCase()+t.slice(1)).replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}var d=function(t,e,i){fetch(t).then(function(t){return t.text()}).then(function(t){if("append"===i){var s='<div class="lg-sub-html">'+t+"</div>";e.append(s)}else e.html(t)})},h=function(t,e,i,s){void 0===i&&(i=0);var o=a(t).attr("data-lg-size")||s;if(o){var r=o.split(",");if(r[1])for(var n=window.innerWidth,l=0;l<r.length;l++){var c=r[l];if(parseInt(c.split("-")[2],10)>n){o=c;break}l===r.length-1&&(o=c)}var d=o.split("-"),h=parseInt(d[0],10),u=parseInt(d[1],10),g=e.width(),m=e.height()-i,p=Math.min(g,h),f=Math.min(m,u),y=Math.min(p/h,f/u);return{width:h*y,height:u*y}}},u=function(t,e,i,s,o){if(o){var r=a(t).find("img").first();if(r.get()){var n=e.get().getBoundingClientRect(),l=n.width,c=e.height()-(i+s),d=r.width(),h=r.height(),u=r.style(),g=(l-d)/2-r.offset().left+(parseFloat(u.paddingLeft)||0)+(parseFloat(u.borderLeft)||0)+a(window).scrollLeft()+n.left,m=(c-h)/2-r.offset().top+(parseFloat(u.paddingTop)||0)+(parseFloat(u.borderTop)||0)+a(window).scrollTop()+i;return"translate3d("+(g*=-1)+"px, "+(m*=-1)+"px, 0) scale3d("+d/o.width+", "+h/o.height+", 1)"}}},g=function(t,e,i,s,o,r){var n="<img "+i+" "+(s?'srcset="'+s+'"':"")+"  "+(o?'sizes="'+o+'"':"")+' class="lg-object lg-image" data-index="'+t+'" src="'+e+'" />',a="";return r&&(a=("string"==typeof r?JSON.parse(r):r).map(function(t){var e="";return Object.keys(t).forEach(function(i){e+=" "+i+'="'+t[i]+'"'}),"<source "+e+"></source>"})),""+a+n},m=function(t,e,i,s){var o=[],r=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var s=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],n=0,a=r.length;n<a;n++,o++)s[o]=r[n];return s}(l,e);return[].forEach.call(t,function(t){for(var e={},n=0;n<t.attributes.length;n++){var l=t.attributes[n];if(l.specified){var d=c(l.name),h="";r.indexOf(d)>-1&&(h=d),h&&(e[h]=l.value)}}var u=a(t),g=u.find("img").first().attr("alt"),m=u.attr("title"),p=s?u.attr(s):u.find("img").first().attr("src");e.thumb=p,i&&!e.subHtml&&(e.subHtml=m||g||""),e.alt=g||m||"",o.push(e)}),o},p=0,f=function(){function l(t,e){if(this.lgOpened=!1,this.index=0,this.plugins=[],this.lGalleryOn=!1,this.lgBusy=!1,this.currentItemsInDom=[],this.prevScrollTop=0,this.bodyPaddingRight=0,this.isDummyImageRemoved=!1,this.dragOrSwipeEnabled=!1,this.mediaContainerPosition={top:0,bottom:0},!t)return this;if(p++,this.lgId=p,this.el=t,this.LGel=a(t),this.generateSettings(e),this.buildModules(),this.settings.dynamic&&void 0!==this.settings.dynamicEl&&!Array.isArray(this.settings.dynamicEl))throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.galleryItems=this.getItems(),this.normalizeSettings(),this.init(),this.validateLicense(),this}return l.prototype.generateSettings=function(e){if(this.settings=t(t({},r),e),this.settings.isMobile&&"function"==typeof this.settings.isMobile?this.settings.isMobile():/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){var i=t(t({},this.settings.mobileSettings),this.settings.mobileSettings);this.settings=t(t({},this.settings),i)}},l.prototype.normalizeSettings=function(){if(this.settings.slideEndAnimation&&(this.settings.hideControlOnEnd=!1),this.settings.closable||(this.settings.swipeToClose=!1),this.zoomFromOrigin=this.settings.zoomFromOrigin,this.settings.dynamic&&(this.zoomFromOrigin=!1),this.settings.container){var t=this.settings.container;if("function"==typeof t)this.settings.container=t();else if("string"==typeof t){var e=document.querySelector(t);this.settings.container=null!=e?e:document.body}}else this.settings.container=document.body;this.settings.preload=Math.min(this.settings.preload,this.galleryItems.length)},l.prototype.init=function(){var t=this;this.addSlideVideoInfo(this.galleryItems),this.buildStructure(),this.LGel.trigger("lgInit",{instance:this}),this.settings.keyPress&&this.keyPress(),setTimeout(function(){t.enableDrag(),t.enableSwipe(),t.triggerPosterClick()},50),this.arrow(),this.settings.mousewheel&&this.mousewheel(),this.settings.dynamic||this.openGalleryOnItemClick()},l.prototype.openGalleryOnItemClick=function(){for(var t=this,e=function(e){var s=i.items[e],o=a(s),r=n.generateUUID();o.attr("data-lg-id",r).on("click.lgcustom-item-"+r,function(i){i.preventDefault();var o=t.settings.index||e;t.openGallery(o,s)})},i=this,s=0;s<this.items.length;s++)e(s)},l.prototype.buildModules=function(){var t=this;this.settings.plugins.forEach(function(e){t.plugins.push(new e(t,a))})},l.prototype.validateLicense=function(){this.settings.licenseKey?"0000-0000-000-0000"===this.settings.licenseKey&&console.warn("lightGallery: "+this.settings.licenseKey+" license key is not valid for production use"):console.error("Please provide a valid license key")},l.prototype.getSlideItem=function(t){return a(this.getSlideItemId(t))},l.prototype.getSlideItemId=function(t){return"#lg-item-"+this.lgId+"-"+t},l.prototype.getIdName=function(t){return t+"-"+this.lgId},l.prototype.getElementById=function(t){return a("#"+this.getIdName(t))},l.prototype.manageSingleSlideClassName=function(){this.galleryItems.length<2?this.outer.addClass("lg-single-item"):this.outer.removeClass("lg-single-item")},l.prototype.buildStructure=function(){var t=this;if(!this.$container||!this.$container.get()){var e="",i="";this.settings.controls&&(e='<button type="button" id="'+this.getIdName("lg-prev")+'" aria-label="'+this.settings.strings.previousSlide+'" class="lg-prev lg-icon"> '+this.settings.prevHtml+' </button>\n                <button type="button" id="'+this.getIdName("lg-next")+'" aria-label="'+this.settings.strings.nextSlide+'" class="lg-next lg-icon"> '+this.settings.nextHtml+" </button>"),".lg-item"!==this.settings.appendSubHtmlTo&&(i='<div class="lg-sub-html" role="status" aria-live="polite"></div>');var s="";this.settings.allowMediaOverlap&&(s+="lg-media-overlap ");var o=this.settings.ariaLabelledby?'aria-labelledby="'+this.settings.ariaLabelledby+'"':"",r=this.settings.ariaDescribedby?'aria-describedby="'+this.settings.ariaDescribedby+'"':"",n="lg-container "+this.settings.addClass+" "+(document.body!==this.settings.container?"lg-inline":""),l=this.settings.closable&&this.settings.showCloseIcon?'<button type="button" aria-label="'+this.settings.strings.closeGallery+'" id="'+this.getIdName("lg-close")+'" class="lg-close lg-icon"></button>':"",c=this.settings.showMaximizeIcon?'<button type="button" aria-label="'+this.settings.strings.toggleMaximize+'" id="'+this.getIdName("lg-maximize")+'" class="lg-maximize lg-icon"></button>':"",d='\n        <div class="'+n+'" id="'+this.getIdName("lg-container")+'" tabindex="-1" aria-modal="true" '+o+" "+r+' role="dialog"\n        >\n            <div id="'+this.getIdName("lg-backdrop")+'" class="lg-backdrop"></div>\n\n            <div id="'+this.getIdName("lg-outer")+'" class="lg-outer lg-use-css3 lg-css3 lg-hide-items '+s+' ">\n\n              <div id="'+this.getIdName("lg-content")+'" class="lg-content">\n                <div id="'+this.getIdName("lg-inner")+'" class="lg-inner">\n                </div>\n                '+e+'\n              </div>\n                <div id="'+this.getIdName("lg-toolbar")+'" class="lg-toolbar lg-group">\n                    '+c+"\n                    "+l+"\n                    </div>\n                    "+(".lg-outer"===this.settings.appendSubHtmlTo?i:"")+'\n                <div id="'+this.getIdName("lg-components")+'" class="lg-components">\n                    '+(".lg-sub-html"===this.settings.appendSubHtmlTo?i:"")+"\n                </div>\n            </div>\n        </div>\n        ";a(this.settings.container).append(d),document.body!==this.settings.container&&a(this.settings.container).css("position","relative"),this.outer=this.getElementById("lg-outer"),this.$lgComponents=this.getElementById("lg-components"),this.$backdrop=this.getElementById("lg-backdrop"),this.$container=this.getElementById("lg-container"),this.$inner=this.getElementById("lg-inner"),this.$content=this.getElementById("lg-content"),this.$toolbar=this.getElementById("lg-toolbar"),this.$backdrop.css("transition-duration",this.settings.backdropDuration+"ms");var h=this.settings.mode+" ";this.manageSingleSlideClassName(),this.settings.enableDrag&&(h+="lg-grab "),this.outer.addClass(h),this.$inner.css("transition-timing-function",this.settings.easing),this.$inner.css("transition-duration",this.settings.speed+"ms"),this.settings.download&&this.$toolbar.append('<a id="'+this.getIdName("lg-download")+'" target="_blank" rel="noopener" aria-label="'+this.settings.strings.download+'" download class="lg-download lg-icon"></a>'),this.counter(),a(window).on("resize.lg.global"+this.lgId+" orientationchange.lg.global"+this.lgId,function(){t.refreshOnResize()}),this.hideBars(),this.manageCloseGallery(),this.toggleMaximize(),this.initModules()}},l.prototype.refreshOnResize=function(){if(this.lgOpened){var t=this.galleryItems[this.index].__slideVideoInfo;this.mediaContainerPosition=this.getMediaContainerPosition();var e=this.mediaContainerPosition,i=e.top,s=e.bottom;if(this.currentImageSize=h(this.items[this.index],this.outer,i+s,t&&this.settings.videoMaxSize),t&&this.resizeVideoSlide(this.index,this.currentImageSize),this.zoomFromOrigin&&!this.isDummyImageRemoved){var o=this.getDummyImgStyles(this.currentImageSize);this.outer.find(".lg-current .lg-dummy-img").first().attr("style",o)}this.LGel.trigger("lgContainerResize")}},l.prototype.resizeVideoSlide=function(t,e){var i=this.getVideoContStyle(e);this.getSlideItem(t).find(".lg-video-cont").attr("style",i)},l.prototype.updateSlides=function(t,i){if(this.index>t.length-1&&(this.index=t.length-1),1===t.length&&(this.index=0),t.length){var s=this.galleryItems[i].src;this.galleryItems=t,this.updateControls(),this.$inner.empty(),this.currentItemsInDom=[];var o=0;this.galleryItems.some(function(t,e){return t.src===s&&(o=e,!0)}),this.currentItemsInDom=this.organizeSlideItems(o,-1),this.loadContent(o,!0),this.getSlideItem(o).addClass("lg-current"),this.index=o,this.updateCurrentCounter(o),this.LGel.trigger(e)}else this.closeGallery()},l.prototype.getItems=function(){if(this.items=[],this.settings.dynamic)return this.settings.dynamicEl||[];if("this"===this.settings.selector)this.items.push(this.el);else if(this.settings.selector)if("string"==typeof this.settings.selector)if(this.settings.selectWithin){var t=a(this.settings.selectWithin);this.items=t.find(this.settings.selector).get()}else this.items=this.el.querySelectorAll(this.settings.selector);else this.items=this.settings.selector;else this.items=this.el.children;return m(this.items,this.settings.extraProps,this.settings.getCaptionFromTitleOrAlt,this.settings.exThumbImage)},l.prototype.shouldHideScrollbar=function(){return this.settings.hideScrollbar&&document.body===this.settings.container},l.prototype.hideScrollbar=function(){if(this.shouldHideScrollbar()){this.bodyPaddingRight=parseFloat(a("body").style().paddingRight);var t=document.documentElement.getBoundingClientRect(),e=window.innerWidth-t.width;a(document.body).css("padding-right",e+this.bodyPaddingRight+"px"),a(document.body).addClass("lg-overlay-open")}},l.prototype.resetScrollBar=function(){this.shouldHideScrollbar()&&(a(document.body).css("padding-right",this.bodyPaddingRight+"px"),a(document.body).removeClass("lg-overlay-open"))},l.prototype.openGallery=function(t,e){var i=this;if(void 0===t&&(t=this.settings.index),!this.lgOpened){this.lgOpened=!0,this.outer.removeClass("lg-hide-items"),this.hideScrollbar(),this.$container.addClass("lg-show");var s=this.getItemsToBeInsertedToDom(t,t);this.currentItemsInDom=s;var o="";s.forEach(function(t){o=o+'<div id="'+t+'" class="lg-item"></div>'}),this.$inner.append(o),this.addHtml(t);var r="";this.mediaContainerPosition=this.getMediaContainerPosition();var n=this.mediaContainerPosition,l=n.top,c=n.bottom;this.settings.allowMediaOverlap||this.setMediaContainerPosition(l,c);var d=this.galleryItems[t].__slideVideoInfo;this.zoomFromOrigin&&e&&(this.currentImageSize=h(e,this.outer,l+c,d&&this.settings.videoMaxSize),r=u(e,this.outer,l,c,this.currentImageSize)),this.zoomFromOrigin&&r||(this.outer.addClass(this.settings.startClass),this.getSlideItem(t).removeClass("lg-complete"));var g=this.settings.zoomFromOrigin?100:this.settings.backdropDuration;setTimeout(function(){i.outer.addClass("lg-components-open")},g),this.index=t,this.LGel.trigger("lgBeforeOpen"),this.getSlideItem(t).addClass("lg-current"),this.lGalleryOn=!1,this.prevScrollTop=a(window).scrollTop(),setTimeout(function(){if(i.zoomFromOrigin&&r){var e=i.getSlideItem(t);e.css("transform",r),setTimeout(function(){e.addClass("lg-start-progress lg-start-end-progress").css("transition-duration",i.settings.startAnimationDuration+"ms"),i.outer.addClass("lg-zoom-from-image")}),setTimeout(function(){e.css("transform","translate3d(0, 0, 0)")},100)}setTimeout(function(){i.$backdrop.addClass("in"),i.$container.addClass("lg-show-in")},10),setTimeout(function(){i.settings.trapFocus&&document.body===i.settings.container&&i.trapFocus()},i.settings.backdropDuration+50),i.zoomFromOrigin&&r||setTimeout(function(){i.outer.addClass("lg-visible")},i.settings.backdropDuration),i.slide(t,!1,!1,!1),i.LGel.trigger("lgAfterOpen")}),document.body===this.settings.container&&a("html").addClass("lg-on")}},l.prototype.getMediaContainerPosition=function(){if(this.settings.allowMediaOverlap)return{top:0,bottom:0};var t=this.$toolbar.get().clientHeight||0,e=this.outer.find(".lg-components .lg-sub-html").get(),i=this.settings.defaultCaptionHeight||e&&e.clientHeight||0,s=this.outer.find(".lg-thumb-outer").get();return{top:t,bottom:(s?s.clientHeight:0)+i}},l.prototype.setMediaContainerPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.$content.css("top",t+"px").css("bottom",e+"px")},l.prototype.hideBars=function(){var t=this;setTimeout(function(){t.outer.removeClass("lg-hide-items"),t.settings.hideBarsDelay>0&&(t.outer.on("mousemove.lg click.lg touchstart.lg",function(){t.outer.removeClass("lg-hide-items"),clearTimeout(t.hideBarTimeout),t.hideBarTimeout=setTimeout(function(){t.outer.addClass("lg-hide-items")},t.settings.hideBarsDelay)}),t.outer.trigger("mousemove.lg"))},this.settings.showBarsAfter)},l.prototype.initPictureFill=function(t){if(this.settings.supportLegacyBrowser)try{picturefill({elements:[t.get()]})}catch(t){console.warn("lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.")}},l.prototype.counter=function(){if(this.settings.counter){var t='<div class="lg-counter" role="status" aria-live="polite">\n                <span id="'+this.getIdName("lg-counter-current")+'" class="lg-counter-current">'+(this.index+1)+' </span> /\n                <span id="'+this.getIdName("lg-counter-all")+'" class="lg-counter-all">'+this.galleryItems.length+" </span></div>";this.outer.find(this.settings.appendCounterTo).append(t)}},l.prototype.addHtml=function(t){var e,i;if(this.galleryItems[t].subHtmlUrl?i=this.galleryItems[t].subHtmlUrl:e=this.galleryItems[t].subHtml,!i)if(e){var s=e.substring(0,1);"."!==s&&"#"!==s||(e=this.settings.subHtmlSelectorRelative&&!this.settings.dynamic?a(this.items).eq(t).find(e).first().html():a(e).first().html())}else e="";if(".lg-item"!==this.settings.appendSubHtmlTo)i?d(i,this.outer.find(".lg-sub-html"),"replace"):this.outer.find(".lg-sub-html").html(e);else{var o=a(this.getSlideItemId(t));i?d(i,o,"append"):o.append('<div class="lg-sub-html">'+e+"</div>")}null!=e&&(""===e?this.outer.find(this.settings.appendSubHtmlTo).addClass("lg-empty-html"):this.outer.find(this.settings.appendSubHtmlTo).removeClass("lg-empty-html")),this.LGel.trigger("lgAfterAppendSubHtml",{index:t})},l.prototype.preload=function(t){for(var e=1;e<=this.settings.preload&&!(e>=this.galleryItems.length-t);e++)this.loadContent(t+e,!1);for(var i=1;i<=this.settings.preload&&!(t-i<0);i++)this.loadContent(t-i,!1)},l.prototype.getDummyImgStyles=function(t){return t?"width:"+t.width+"px;\n                margin-left: -"+t.width/2+"px;\n                margin-top: -"+t.height/2+"px;\n                height:"+t.height+"px":""},l.prototype.getVideoContStyle=function(t){return t?"width:"+t.width+"px;\n                height:"+t.height+"px":""},l.prototype.getDummyImageContent=function(t,e,i){var s;if(this.settings.dynamic||(s=a(this.items).eq(e)),s){var o;if(!(o=this.settings.exThumbImage?s.attr(this.settings.exThumbImage):s.find("img").first().attr("src")))return"";var r=this.getDummyImgStyles(this.currentImageSize),n=document.createElement("img");return n.alt=i||"",n.src=o,n.className="lg-dummy-img",n.style.cssText=r,t.addClass("lg-first-slide"),this.outer.addClass("lg-first-slide-loading"),n}return""},l.prototype.setImgMarkup=function(t,e,i){var s,o=this.galleryItems[i],r=o.alt,n=o.srcset,l=o.sizes,c=o.sources,d=r?'alt="'+r+'"':"";s=this.isFirstSlideWithZoomAnimation()?this.getDummyImageContent(e,i,d):g(i,t,d,n,l,c);var h=document.createElement("picture");h.className="lg-img-wrap",a(h).append(s),e.prepend(h)},l.prototype.onSlideObjectLoad=function(t,e,i,s){var o=t.find(".lg-object").first();(function(t){return!!t&&!!t.complete&&0!==t.naturalWidth})(o.get())||e?i():(o.on("load.lg error.lg",function(){i&&i()}),o.on("error.lg",function(){s&&s()}))},l.prototype.onLgObjectLoad=function(t,e,i,s,o,r){var n=this;this.onSlideObjectLoad(t,r,function(){n.triggerSlideItemLoad(t,e,i,s,o)},function(){t.addClass("lg-complete lg-complete_"),t.html('<span class="lg-error-msg">'+n.settings.strings.mediaLoadingFailed+"</span>")})},l.prototype.triggerSlideItemLoad=function(t,e,i,s,o){var r=this,n=this.galleryItems[e],a=o&&"video"===this.getSlideType(n)&&!n.poster?s:0;setTimeout(function(){t.addClass("lg-complete lg-complete_"),r.LGel.trigger("lgSlideItemLoad",{index:e,delay:i||0,isFirstSlide:o})},a)},l.prototype.isFirstSlideWithZoomAnimation=function(){return!(this.lGalleryOn||!this.zoomFromOrigin||!this.currentImageSize)},l.prototype.addSlideVideoInfo=function(t){var e=this;t.forEach(function(t,i){t.__slideVideoInfo=function(t,e,i){if(!t)return e?{html5:!0}:void console.error("lightGallery :- data-src is not provided on slide item "+(i+1)+". Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/");var s=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)([\&|?][\S]*)*/i),o=t.match(/\/\/(?:www\.)?(?:player\.)?vimeo.com\/(?:video\/)?([0-9a-z\-_]+)(.*)?/i),r=t.match(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/(medias|embed)\/([0-9a-z\-_]+)(.*)/);return s?{youtube:s}:o?{vimeo:o}:r?{wistia:r}:void 0}(t.src,!!t.video,i),t.__slideVideoInfo&&e.settings.loadYouTubePoster&&!t.poster&&t.__slideVideoInfo.youtube&&(t.poster="//img.youtube.com/vi/"+t.__slideVideoInfo.youtube[1]+"/maxresdefault.jpg")})},l.prototype.loadContent=function(t,e){var i=this,s=this.galleryItems[t],o=a(this.getSlideItemId(t)),r=s.poster,n=s.srcset,l=s.sizes,c=s.sources,d=s.src,u=s.video,m=u&&"string"==typeof u?JSON.parse(u):u;if(s.responsive){var p=s.responsive.split(",");d=function(t){for(var e=[],i=[],s="",o=0;o<t.length;o++){var r=t[o].split(" ");""===r[0]&&r.splice(0,1),i.push(r[0]),e.push(r[1])}for(var n=window.innerWidth,a=0;a<e.length;a++)if(parseInt(e[a],10)>n){s=i[a];break}return s}(p)||d}var f=s.__slideVideoInfo,y="",v=!!s.iframe,b=!this.lGalleryOn,w=0;if(b&&(w=this.zoomFromOrigin&&this.currentImageSize?this.settings.startAnimationDuration+10:this.settings.backdropDuration+10),!o.hasClass("lg-loaded")){if(f){var S=this.mediaContainerPosition,C=S.top,x=S.bottom,I=h(this.items[t],this.outer,C+x,f&&this.settings.videoMaxSize);y=this.getVideoContStyle(I)}if(v){var E=function(t,e,i,s,o,r){return'<div class="lg-media-cont lg-has-iframe" style="width:'+t+"; max-width:"+i+"; height: "+e+"; max-height:"+s+'">\n                    <iframe class="lg-object" frameborder="0" '+(r?'title="'+r+'"':"")+' src="'+o+'"  allowfullscreen="true"></iframe>\n                </div>'}(this.settings.iframeWidth,this.settings.iframeHeight,this.settings.iframeMaxWidth,this.settings.iframeMaxHeight,d,s.iframeTitle);o.prepend(E)}else if(r){var T="";b&&this.zoomFromOrigin&&this.currentImageSize&&(T=this.getDummyImageContent(o,t,"")),E=function(t,e,i,s,o){var r;r=o&&o.youtube?"lg-has-youtube":o&&o.vimeo?"lg-has-vimeo":"lg-has-html5";var n=e;return"string"!=typeof e&&(n=e.outerHTML),'<div class="lg-video-cont '+r+'" style="'+i+'">\n                <div class="lg-video-play-button">\n                <svg\n                    viewBox="0 0 20 20"\n                    preserveAspectRatio="xMidYMid"\n                    focusable="false"\n                    aria-labelledby="'+s+'"\n                    role="img"\n                    class="lg-video-play-icon"\n                >\n                    <title>'+s+'</title>\n                    <polygon class="lg-video-play-icon-inner" points="1,0 20,10 1,20"></polygon>\n                </svg>\n                <svg class="lg-video-play-icon-bg" viewBox="0 0 50 50" focusable="false">\n                    <circle cx="50%" cy="50%" r="20"></circle></svg>\n                <svg class="lg-video-play-icon-circle" viewBox="0 0 50 50" focusable="false">\n                    <circle cx="50%" cy="50%" r="20"></circle>\n                </svg>\n            </div>\n            '+n+'\n            <img class="lg-object lg-video-poster" src="'+t+'" />\n        </div>'}(r,T||"",y,this.settings.strings.playVideo,f),o.prepend(E)}else if(f)E='<div class="lg-video-cont " style="'+y+'"></div>',o.prepend(E);else if(this.setImgMarkup(d,o,t),n||c){var L=o.find(".lg-object");this.initPictureFill(L)}(r||f)&&this.LGel.trigger("lgHasVideo",{index:t,src:d,html5Video:m,hasPoster:!!r}),this.LGel.trigger("lgAfterAppendSlide",{index:t}),this.lGalleryOn&&".lg-item"===this.settings.appendSubHtmlTo&&this.addHtml(t)}var A=0;w&&!a(document.body).hasClass("lg-from-hash")&&(A=w),this.isFirstSlideWithZoomAnimation()&&(setTimeout(function(){o.removeClass("lg-start-end-progress lg-start-progress").removeAttr("style")},this.settings.startAnimationDuration+100),o.hasClass("lg-loaded")||setTimeout(function(){if("image"===i.getSlideType(s)){var e=s.alt,a=e?'alt="'+e+'"':"";if(o.find(".lg-img-wrap").append(g(t,d,a,n,l,s.sources)),n||c){var h=o.find(".lg-object");i.initPictureFill(h)}}("image"===i.getSlideType(s)||"video"===i.getSlideType(s)&&r)&&(i.onLgObjectLoad(o,t,w,A,!0,!1),i.onSlideObjectLoad(o,!(!f||!f.html5||r),function(){i.loadContentOnFirstSlideLoad(t,o,A)},function(){i.loadContentOnFirstSlideLoad(t,o,A)}))},this.settings.startAnimationDuration+100)),o.addClass("lg-loaded"),this.isFirstSlideWithZoomAnimation()&&("video"!==this.getSlideType(s)||r)||this.onLgObjectLoad(o,t,w,A,b,!(!f||!f.html5||r)),this.zoomFromOrigin&&this.currentImageSize||!o.hasClass("lg-complete_")||this.lGalleryOn||setTimeout(function(){o.addClass("lg-complete")},this.settings.backdropDuration),this.lGalleryOn=!0,!0===e&&(o.hasClass("lg-complete_")?this.preload(t):o.find(".lg-object").first().on("load.lg error.lg",function(){i.preload(t)}))},l.prototype.loadContentOnFirstSlideLoad=function(t,e,i){var s=this;setTimeout(function(){e.find(".lg-dummy-img").remove(),e.removeClass("lg-first-slide"),s.outer.removeClass("lg-first-slide-loading"),s.isDummyImageRemoved=!0,s.preload(t)},i+300)},l.prototype.getItemsToBeInsertedToDom=function(t,e,i){var s=this;void 0===i&&(i=0);var o=[],r=Math.max(i,3);r=Math.min(r,this.galleryItems.length);var n="lg-item-"+this.lgId+"-"+e;if(this.galleryItems.length<=3)return this.galleryItems.forEach(function(t,e){o.push("lg-item-"+s.lgId+"-"+e)}),o;if(t<(this.galleryItems.length-1)/2){for(var a=t;a>t-r/2&&a>=0;a--)o.push("lg-item-"+this.lgId+"-"+a);var l=o.length;for(a=0;a<r-l;a++)o.push("lg-item-"+this.lgId+"-"+(t+a+1))}else{for(a=t;a<=this.galleryItems.length-1&&a<t+r/2;a++)o.push("lg-item-"+this.lgId+"-"+a);for(l=o.length,a=0;a<r-l;a++)o.push("lg-item-"+this.lgId+"-"+(t-a-1))}return this.settings.loop&&(t===this.galleryItems.length-1?o.push("lg-item-"+this.lgId+"-0"):0===t&&o.push("lg-item-"+this.lgId+"-"+(this.galleryItems.length-1))),-1===o.indexOf(n)&&o.push("lg-item-"+this.lgId+"-"+e),o},l.prototype.organizeSlideItems=function(t,e){var i=this,s=this.getItemsToBeInsertedToDom(t,e,this.settings.numberOfSlideItemsInDom);return s.forEach(function(t){-1===i.currentItemsInDom.indexOf(t)&&i.$inner.append('<div id="'+t+'" class="lg-item"></div>')}),this.currentItemsInDom.forEach(function(t){-1===s.indexOf(t)&&a("#"+t).remove()}),s},l.prototype.getPreviousSlideIndex=function(){var t=0;try{var e=this.outer.find(".lg-current").first().attr("id");t=parseInt(e.split("-")[3])||0}catch(e){t=0}return t},l.prototype.setDownloadValue=function(t){if(this.settings.download){var e=this.galleryItems[t];if(!1===e.downloadUrl||"false"===e.downloadUrl)this.outer.addClass("lg-hide-download");else{var i=this.getElementById("lg-download");this.outer.removeClass("lg-hide-download"),i.attr("href",e.downloadUrl||e.src),e.download&&i.attr("download",e.download)}}},l.prototype.makeSlideAnimation=function(t,e,i){var s=this;this.lGalleryOn&&i.addClass("lg-slide-progress"),setTimeout(function(){s.outer.addClass("lg-no-trans"),s.outer.find(".lg-item").removeClass("lg-prev-slide lg-next-slide"),"prev"===t?(e.addClass("lg-prev-slide"),i.addClass("lg-next-slide")):(e.addClass("lg-next-slide"),i.addClass("lg-prev-slide")),setTimeout(function(){s.outer.find(".lg-item").removeClass("lg-current"),e.addClass("lg-current"),s.outer.removeClass("lg-no-trans")},50)},this.lGalleryOn?this.settings.slideDelay:0)},l.prototype.slide=function(t,e,i,s){var o=this,r=this.getPreviousSlideIndex();if(this.currentItemsInDom=this.organizeSlideItems(t,r),!this.lGalleryOn||r!==t){var n=this.galleryItems.length;if(!this.lgBusy){this.settings.counter&&this.updateCurrentCounter(t);var a=this.getSlideItem(t),l=this.getSlideItem(r),c=this.galleryItems[t],d=c.__slideVideoInfo;if(this.outer.attr("data-lg-slide-type",this.getSlideType(c)),this.setDownloadValue(t),d){var u=this.mediaContainerPosition,g=u.top,m=u.bottom,p=h(this.items[t],this.outer,g+m,d&&this.settings.videoMaxSize);this.resizeVideoSlide(t,p)}if(this.LGel.trigger("lgBeforeSlide",{prevIndex:r,index:t,fromTouch:!!e,fromThumb:!!i}),this.lgBusy=!0,clearTimeout(this.hideBarTimeout),this.arrowDisable(t),s||(t<r?s="prev":t>r&&(s="next")),e){this.outer.find(".lg-item").removeClass("lg-prev-slide lg-current lg-next-slide");var f=void 0,y=void 0;n>2?(f=t-1,y=t+1,(0===t&&r===n-1||t===n-1&&0===r)&&(y=0,f=n-1)):(f=0,y=1),"prev"===s?this.getSlideItem(y).addClass("lg-next-slide"):this.getSlideItem(f).addClass("lg-prev-slide"),a.addClass("lg-current")}else this.makeSlideAnimation(s,a,l);this.lGalleryOn?setTimeout(function(){o.loadContent(t,!0),".lg-item"!==o.settings.appendSubHtmlTo&&o.addHtml(t)},this.settings.speed+50+(e?0:this.settings.slideDelay)):this.loadContent(t,!0),setTimeout(function(){o.lgBusy=!1,l.removeClass("lg-slide-progress"),o.LGel.trigger("lgAfterSlide",{prevIndex:r,index:t,fromTouch:e,fromThumb:i})},(this.lGalleryOn?this.settings.speed+100:100)+(e?0:this.settings.slideDelay))}this.index=t}},l.prototype.updateCurrentCounter=function(t){this.getElementById("lg-counter-current").html(t+1+"")},l.prototype.updateCounterTotal=function(){this.getElementById("lg-counter-all").html(this.galleryItems.length+"")},l.prototype.getSlideType=function(t){return t.__slideVideoInfo?"video":t.iframe?"iframe":"image"},l.prototype.touchMove=function(t,e,i){var s=e.pageX-t.pageX,o=e.pageY-t.pageY,r=!1;if(this.swipeDirection?r=!0:Math.abs(s)>15?(this.swipeDirection="horizontal",r=!0):Math.abs(o)>15&&(this.swipeDirection="vertical",r=!0),r){var n=this.getSlideItem(this.index);if("horizontal"===this.swipeDirection){null==i||i.preventDefault(),this.outer.addClass("lg-dragging"),this.setTranslate(n,s,0);var a=n.get().offsetWidth,l=15*a/100-Math.abs(10*s/100);this.setTranslate(this.outer.find(".lg-prev-slide").first(),-a+s-l,0),this.setTranslate(this.outer.find(".lg-next-slide").first(),a+s+l,0)}else if("vertical"===this.swipeDirection&&this.settings.swipeToClose){null==i||i.preventDefault(),this.$container.addClass("lg-dragging-vertical");var c=1-Math.abs(o)/window.innerHeight;this.$backdrop.css("opacity",c);var d=1-Math.abs(o)/(2*window.innerWidth);this.setTranslate(n,0,o,d,d),Math.abs(o)>100&&this.outer.addClass("lg-hide-items").removeClass("lg-components-open")}}},l.prototype.touchEnd=function(t,e,s){var o,r=this;"lg-slide"!==this.settings.mode&&this.outer.addClass("lg-slide"),setTimeout(function(){r.$container.removeClass("lg-dragging-vertical"),r.outer.removeClass("lg-dragging lg-hide-items").addClass("lg-components-open");var n=!0;if("horizontal"===r.swipeDirection){o=t.pageX-e.pageX;var l=Math.abs(t.pageX-e.pageX);o<0&&l>r.settings.swipeThreshold?(r.goToNextSlide(!0),n=!1):o>0&&l>r.settings.swipeThreshold&&(r.goToPrevSlide(!0),n=!1)}else if("vertical"===r.swipeDirection){if(o=Math.abs(t.pageY-e.pageY),r.settings.closable&&r.settings.swipeToClose&&o>100)return void r.closeGallery();r.$backdrop.css("opacity",1)}if(r.outer.find(".lg-item").removeAttr("style"),n&&Math.abs(t.pageX-e.pageX)<5){var c=a(s.target);r.isPosterElement(c)&&r.LGel.trigger(i)}r.swipeDirection=void 0}),setTimeout(function(){r.outer.hasClass("lg-dragging")||"lg-slide"===r.settings.mode||r.outer.removeClass("lg-slide")},this.settings.speed+100)},l.prototype.enableSwipe=function(){var t=this,e={},s={},o=!1,r=!1;this.settings.enableSwipe&&(this.$inner.on("touchstart.lg",function(i){t.dragOrSwipeEnabled=!0;var s=t.getSlideItem(t.index);!a(i.target).hasClass("lg-item")&&!s.get().contains(i.target)||t.outer.hasClass("lg-zoomed")||t.lgBusy||1!==i.touches.length||(r=!0,t.touchAction="swipe",t.manageSwipeClass(),e={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY})}),this.$inner.on("touchmove.lg",function(i){r&&"swipe"===t.touchAction&&1===i.touches.length&&(s={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t.touchMove(e,s,i),o=!0)}),this.$inner.on("touchend.lg",function(n){if("swipe"===t.touchAction){if(o)o=!1,t.touchEnd(s,e,n);else if(r){var l=a(n.target);t.isPosterElement(l)&&t.LGel.trigger(i)}t.touchAction=void 0,r=!1}}))},l.prototype.enableDrag=function(){var t=this,e={},s={},o=!1,r=!1;this.settings.enableDrag&&(this.outer.on("mousedown.lg",function(i){t.dragOrSwipeEnabled=!0;var s=t.getSlideItem(t.index);(a(i.target).hasClass("lg-item")||s.get().contains(i.target))&&(t.outer.hasClass("lg-zoomed")||t.lgBusy||(i.preventDefault(),t.lgBusy||(t.manageSwipeClass(),e={pageX:i.pageX,pageY:i.pageY},o=!0,t.outer.get().scrollLeft+=1,t.outer.get().scrollLeft-=1,t.outer.removeClass("lg-grab").addClass("lg-grabbing"),t.LGel.trigger("lgDragStart"))))}),a(window).on("mousemove.lg.global"+this.lgId,function(i){o&&t.lgOpened&&(r=!0,s={pageX:i.pageX,pageY:i.pageY},t.touchMove(e,s),t.LGel.trigger("lgDragMove"))}),a(window).on("mouseup.lg.global"+this.lgId,function(n){if(t.lgOpened){var l=a(n.target);r?(r=!1,t.touchEnd(s,e,n),t.LGel.trigger("lgDragEnd")):t.isPosterElement(l)&&t.LGel.trigger(i),o&&(o=!1,t.outer.removeClass("lg-grabbing").addClass("lg-grab"))}}))},l.prototype.triggerPosterClick=function(){var t=this;this.$inner.on("click.lg",function(e){!t.dragOrSwipeEnabled&&t.isPosterElement(a(e.target))&&t.LGel.trigger(i)})},l.prototype.manageSwipeClass=function(){var t=this.index+1,e=this.index-1;this.settings.loop&&this.galleryItems.length>2&&(0===this.index?e=this.galleryItems.length-1:this.index===this.galleryItems.length-1&&(t=0)),this.outer.find(".lg-item").removeClass("lg-next-slide lg-prev-slide"),e>-1&&this.getSlideItem(e).addClass("lg-prev-slide"),this.getSlideItem(t).addClass("lg-next-slide")},l.prototype.goToNextSlide=function(t){var e=this,i=this.settings.loop;t&&this.galleryItems.length<3&&(i=!1),this.lgBusy||(this.index+1<this.galleryItems.length?(this.index++,this.LGel.trigger(s,{index:this.index}),this.slide(this.index,!!t,!1,"next")):i?(this.index=0,this.LGel.trigger(s,{index:this.index}),this.slide(this.index,!!t,!1,"next")):this.settings.slideEndAnimation&&!t&&(this.outer.addClass("lg-right-end"),setTimeout(function(){e.outer.removeClass("lg-right-end")},400)))},l.prototype.goToPrevSlide=function(t){var e=this,i=this.settings.loop;t&&this.galleryItems.length<3&&(i=!1),this.lgBusy||(this.index>0?(this.index--,this.LGel.trigger(o,{index:this.index,fromTouch:t}),this.slide(this.index,!!t,!1,"prev")):i?(this.index=this.galleryItems.length-1,this.LGel.trigger(o,{index:this.index,fromTouch:t}),this.slide(this.index,!!t,!1,"prev")):this.settings.slideEndAnimation&&!t&&(this.outer.addClass("lg-left-end"),setTimeout(function(){e.outer.removeClass("lg-left-end")},400)))},l.prototype.keyPress=function(){var t=this;a(window).on("keydown.lg.global"+this.lgId,function(e){t.lgOpened&&!0===t.settings.escKey&&27===e.keyCode&&(e.preventDefault(),t.settings.allowMediaOverlap&&t.outer.hasClass("lg-can-toggle")&&t.outer.hasClass("lg-components-open")?t.outer.removeClass("lg-components-open"):t.closeGallery()),t.lgOpened&&t.galleryItems.length>1&&(37===e.keyCode&&(e.preventDefault(),t.goToPrevSlide()),39===e.keyCode&&(e.preventDefault(),t.goToNextSlide()))})},l.prototype.arrow=function(){var t=this;this.getElementById("lg-prev").on("click.lg",function(){t.goToPrevSlide()}),this.getElementById("lg-next").on("click.lg",function(){t.goToNextSlide()})},l.prototype.arrowDisable=function(t){if(!this.settings.loop&&this.settings.hideControlOnEnd){var e=this.getElementById("lg-prev"),i=this.getElementById("lg-next");t+1===this.galleryItems.length?i.attr("disabled","disabled").addClass("disabled"):i.removeAttr("disabled").removeClass("disabled"),0===t?e.attr("disabled","disabled").addClass("disabled"):e.removeAttr("disabled").removeClass("disabled")}},l.prototype.setTranslate=function(t,e,i,s,o){void 0===s&&(s=1),void 0===o&&(o=1),t.css("transform","translate3d("+e+"px, "+i+"px, 0px) scale3d("+s+", "+o+", 1)")},l.prototype.mousewheel=function(){var t=this,e=0;this.outer.on("wheel.lg",function(i){if(i.deltaY&&!(t.galleryItems.length<2)){i.preventDefault();var s=(new Date).getTime();s-e<1e3||(e=s,i.deltaY>0?t.goToNextSlide():i.deltaY<0&&t.goToPrevSlide())}})},l.prototype.isSlideElement=function(t){return t.hasClass("lg-outer")||t.hasClass("lg-item")||t.hasClass("lg-img-wrap")||t.hasClass("lg-img-rotate")},l.prototype.isPosterElement=function(t){var e=this.getSlideItem(this.index).find(".lg-video-play-button").get();return t.hasClass("lg-video-poster")||t.hasClass("lg-video-play-button")||e&&e.contains(t.get())},l.prototype.toggleMaximize=function(){var t=this;this.getElementById("lg-maximize").on("click.lg",function(){t.$container.toggleClass("lg-inline"),t.refreshOnResize()})},l.prototype.invalidateItems=function(){for(var t=0;t<this.items.length;t++){var e=a(this.items[t]);e.off("click.lgcustom-item-"+e.attr("data-lg-id"))}},l.prototype.trapFocus=function(){var t=this;this.$container.get().focus({preventScroll:!0}),a(window).on("keydown.lg.global"+this.lgId,function(e){if(t.lgOpened&&("Tab"===e.key||9===e.keyCode)){var i=function(t){var e=t.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])');return[].filter.call(e,function(t){var e=window.getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility})}(t.$container.get()),s=i[0],o=i[i.length-1];e.shiftKey?document.activeElement===s&&(o.focus(),e.preventDefault()):document.activeElement===o&&(s.focus(),e.preventDefault())}})},l.prototype.manageCloseGallery=function(){var t=this;if(this.settings.closable){var e=!1;this.getElementById("lg-close").on("click.lg",function(){t.closeGallery()}),this.settings.closeOnTap&&(this.outer.on("mousedown.lg",function(i){var s=a(i.target);e=!!t.isSlideElement(s)}),this.outer.on("mousemove.lg",function(){e=!1}),this.outer.on("mouseup.lg",function(i){var s=a(i.target);t.isSlideElement(s)&&e&&(t.outer.hasClass("lg-dragging")||t.closeGallery())}))}},l.prototype.closeGallery=function(t){var e=this;if(!this.lgOpened||!this.settings.closable&&!t)return 0;this.LGel.trigger("lgBeforeClose"),this.settings.resetScrollPosition&&!this.settings.hideScrollbar&&a(window).scrollTop(this.prevScrollTop);var i,s=this.items[this.index];if(this.zoomFromOrigin&&s){var o=this.mediaContainerPosition,r=o.top,n=o.bottom,l=this.galleryItems[this.index],c=l.__slideVideoInfo,d=l.poster,g=h(s,this.outer,r+n,c&&d&&this.settings.videoMaxSize);i=u(s,this.outer,r,n,g)}this.zoomFromOrigin&&i?(this.outer.addClass("lg-closing lg-zoom-from-image"),this.getSlideItem(this.index).addClass("lg-start-end-progress").css("transition-duration",this.settings.startAnimationDuration+"ms").css("transform",i)):(this.outer.addClass("lg-hide-items"),this.outer.removeClass("lg-zoom-from-image")),this.destroyModules(),this.lGalleryOn=!1,this.isDummyImageRemoved=!1,this.zoomFromOrigin=this.settings.zoomFromOrigin,clearTimeout(this.hideBarTimeout),this.hideBarTimeout=!1,a("html").removeClass("lg-on"),this.outer.removeClass("lg-visible lg-components-open"),this.$backdrop.removeClass("in").css("opacity",0);var m=this.zoomFromOrigin&&i?Math.max(this.settings.startAnimationDuration,this.settings.backdropDuration):this.settings.backdropDuration;return this.$container.removeClass("lg-show-in"),setTimeout(function(){e.zoomFromOrigin&&i&&e.outer.removeClass("lg-zoom-from-image"),e.$container.removeClass("lg-show"),e.resetScrollBar(),e.$backdrop.removeAttr("style").css("transition-duration",e.settings.backdropDuration+"ms"),e.outer.removeClass("lg-closing "+e.settings.startClass),e.getSlideItem(e.index).removeClass("lg-start-end-progress"),e.$inner.empty(),e.lgOpened&&e.LGel.trigger("lgAfterClose",{instance:e}),e.$container.get()&&e.$container.get().blur(),e.lgOpened=!1},m+100),m+100},l.prototype.initModules=function(){this.plugins.forEach(function(t){try{t.init()}catch(t){console.warn("lightGallery:- make sure lightGallery module is properly initiated")}})},l.prototype.destroyModules=function(t){this.plugins.forEach(function(e){try{t?e.destroy():e.closeGallery&&e.closeGallery()}catch(t){console.warn("lightGallery:- make sure lightGallery module is properly destroyed")}})},l.prototype.refresh=function(t){this.settings.dynamic||this.invalidateItems(),this.galleryItems=t||this.getItems(),this.updateControls(),this.openGalleryOnItemClick(),this.LGel.trigger(e)},l.prototype.updateControls=function(){this.addSlideVideoInfo(this.galleryItems),this.updateCounterTotal(),this.manageSingleSlideClassName()},l.prototype.destroyGallery=function(){this.destroyModules(!0),this.settings.dynamic||this.invalidateItems(),a(window).off(".lg.global"+this.lgId),this.LGel.off(".lg"),this.$container.remove()},l.prototype.destroy=function(){var t=this.closeGallery(!0);return t?setTimeout(this.destroyGallery.bind(this),t):this.destroyGallery(),t},l}();return function(t,e){return new f(t,e)}}()},569:function(t){t.exports=function(){"use strict";var t=function(){return(t=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},e={scale:1,zoom:!0,infiniteZoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300,zoomPluginStrings:{zoomIn:"Zoom in",zoomOut:"Zoom out",viewActualSize:"View actual size"}};return function(){function i(i,s){return this.core=i,this.$LG=s,this.settings=t(t({},e),this.core.settings),this}return i.prototype.buildTemplates=function(){var t=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomOut+'" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(t+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.viewActualSize+'" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(t)},i.prototype.enableZoom=function(t){var e=this,i=this.settings.enableZoomAfter+t.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&t.detail.delay?i=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout(function(){e.isImageSlide(e.core.index)&&(e.core.getSlideItem(t.detail.index).addClass("lg-zoomable"),t.detail.index===e.core.index&&e.setZoomEssentials())},i+30)},i.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on("lgSlideItemLoad.zoom",this.enableZoom.bind(this))},i.prototype.getDragCords=function(t){return{x:t.pageX,y:t.pageY}},i.prototype.getSwipeCords=function(t){return{x:t.touches[0].pageX,y:t.touches[0].pageY}},i.prototype.getDragAllowedAxises=function(t,e){if(!this.containerRect)return{allowX:!1,allowY:!1};var i=this.core.getSlideItem(this.core.index).find(".lg-image").first().get(),s=0,o=0,r=i.getBoundingClientRect();t?(s=i.offsetHeight*t,o=i.offsetWidth*t):e?(s=r.height+e*r.height,o=r.width+e*r.width):(s=r.height,o=r.width);var n=s>this.containerRect.height;return{allowX:o>this.containerRect.width,allowY:n}},i.prototype.setZoomEssentials=function(){this.containerRect=this.core.$content.get().getBoundingClientRect()},i.prototype.zoomImage=function(t,e,i,s){if(!(Math.abs(e)<=0)){var o,r,n=this.containerRect.width/2+this.containerRect.left,a=this.containerRect.height/2+this.containerRect.top+this.scrollTop;1===t&&(this.positionChanged=!1);var l=this.getDragAllowedAxises(0,e),c=l.allowY,d=l.allowX;this.positionChanged&&(o=this.left/(this.scale-e),r=this.top/(this.scale-e),this.pageX=n-o,this.pageY=a-r,this.positionChanged=!1);var h,u,g=this.getPossibleSwipeDragCords(e),m=n-this.pageX,p=a-this.pageY;if(t-e>1){var f=(t-e)/Math.abs(e);h=(m=(e<0?-m:m)+this.left*(f+(e<0?-1:1)))/f,u=(p=(e<0?-p:p)+this.top*(f+(e<0?-1:1)))/f}else h=m*(f=(t-e)*e),u=p*f;i&&(d?this.isBeyondPossibleLeft(h,g.minX)?h=g.minX:this.isBeyondPossibleRight(h,g.maxX)&&(h=g.maxX):t>1&&(h<g.minX?h=g.minX:h>g.maxX&&(h=g.maxX)),c?this.isBeyondPossibleTop(u,g.minY)?u=g.minY:this.isBeyondPossibleBottom(u,g.maxY)&&(u=g.maxY):t>1&&(u<g.minY?u=g.minY:u>g.maxY&&(u=g.maxY))),this.setZoomStyles({x:h,y:u,scale:t}),this.left=h,this.top=u,s&&this.setZoomImageSize()}},i.prototype.resetImageTranslate=function(t){if(this.isImageSlide(t)){var e=this.core.getSlideItem(t).find(".lg-image").first();this.imageReset=!1,e.removeClass("reset-transition reset-transition-y reset-transition-x"),this.core.outer.removeClass("lg-actual-size"),e.css("width","auto").css("height","auto"),setTimeout(function(){e.removeClass("no-transition")},10)}},i.prototype.setZoomImageSize=function(){var t=this,e=this.core.getSlideItem(this.core.index).find(".lg-image").first();setTimeout(function(){var i=t.getCurrentImageActualSizeScale();t.scale>=i&&(e.addClass("no-transition"),t.imageReset=!0)},500),setTimeout(function(){var i=t.getCurrentImageActualSizeScale();if(t.scale>=i){var s=t.getDragAllowedAxises(t.scale);e.css("width",e.get().naturalWidth+"px").css("height",e.get().naturalHeight+"px"),t.core.outer.addClass("lg-actual-size"),s.allowX&&s.allowY?e.addClass("reset-transition"):s.allowX&&!s.allowY?e.addClass("reset-transition-x"):!s.allowX&&s.allowY&&e.addClass("reset-transition-y")}},550)},i.prototype.setZoomStyles=function(t){var e=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),i=this.core.getSlideItem(this.core.index).find(".lg-image").first(),s=this.core.outer.find(".lg-current .lg-dummy-img").first();this.scale=t.scale,i.css("transform","scale3d("+t.scale+", "+t.scale+", 1)"),s.css("transform","scale3d("+t.scale+", "+t.scale+", 1)");var o="translate3d("+t.x+"px, "+t.y+"px, 0)";e.css("transform",o)},i.prototype.setActualSize=function(t,e){var i=this;if(!this.zoomInProgress){this.zoomInProgress=!0;var s=this.core.galleryItems[this.core.index];this.resetImageTranslate(t),setTimeout(function(){if(s.src&&!i.core.outer.hasClass("lg-first-slide-loading")){var t=i.getCurrentImageActualSizeScale(),o=i.scale;i.core.outer.hasClass("lg-zoomed")?i.scale=1:i.scale=i.getScale(t),i.setPageCords(e),i.beginZoom(i.scale),i.zoomImage(i.scale,i.scale-o,!0,!0)}},50),setTimeout(function(){i.core.outer.removeClass("lg-grabbing").addClass("lg-grab")},60),setTimeout(function(){i.zoomInProgress=!1},610)}},i.prototype.getNaturalWidth=function(t){var e=this.core.getSlideItem(t).find(".lg-image").first(),i=this.core.galleryItems[t].width;return i?parseFloat(i):e.get().naturalWidth},i.prototype.getActualSizeScale=function(t,e){return t>=e?t/e||2:1},i.prototype.getCurrentImageActualSizeScale=function(){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first().get().offsetWidth,e=this.getNaturalWidth(this.core.index)||t;return this.getActualSizeScale(e,t)},i.prototype.getPageCords=function(t){var e={};if(t)e.x=t.pageX||t.touches[0].pageX,e.y=t.pageY||t.touches[0].pageY;else{var i=this.core.$content.get().getBoundingClientRect();e.x=i.width/2+i.left,e.y=i.height/2+this.scrollTop+i.top}return e},i.prototype.setPageCords=function(t){var e=this.getPageCords(t);this.pageX=e.x,this.pageY=e.y},i.prototype.manageActualPixelClassNames=function(){this.core.getElementById("lg-actual-size").removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)},i.prototype.beginZoom=function(t){return this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t>1?(this.core.outer.addClass("lg-zoomed"),this.manageActualPixelClassNames()):this.resetZoom(),t>1},i.prototype.getScale=function(t){var e=this.getCurrentImageActualSizeScale();return t<1?t=1:t>e&&(t=e),t},i.prototype.init=function(){var t=this;if(this.settings.zoom){this.buildTemplates(),this.enableZoomOnSlideItemLoad();var e=null;this.core.outer.on("dblclick.lg",function(e){t.$LG(e.target).hasClass("lg-image")&&t.setActualSize(t.core.index,e)}),this.core.outer.on("touchstart.lg",function(i){var s=t.$LG(i.target);1===i.touches.length&&s.hasClass("lg-image")&&(e?(clearTimeout(e),e=null,i.preventDefault(),t.setActualSize(t.core.index,i)):e=setTimeout(function(){e=null},300))}),this.core.LGel.on("lgContainerResize.zoom lgRotateRight.zoom lgRotateLeft.zoom lgFlipHorizontal.zoom lgFlipVertical.zoom",function(){if(t.core.lgOpened&&t.isImageSlide(t.core.index)&&!t.core.touchAction){var e=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first();t.top=0,t.left=0,t.setZoomEssentials(),t.setZoomSwipeStyles(e,{x:0,y:0}),t.positionChanged=!0}}),this.$LG(window).on("scroll.lg.zoom.global"+this.core.lgId,function(){t.core.lgOpened&&(t.scrollTop=t.$LG(window).scrollTop())}),this.core.getElementById("lg-zoom-out").on("click.lg",function(){if(t.isImageSlide(t.core.index)){var e=0;t.imageReset&&(t.resetImageTranslate(t.core.index),e=50),setTimeout(function(){var e=t.scale-t.settings.scale;e<1&&(e=1),t.beginZoom(e),t.zoomImage(e,-t.settings.scale,!0,!t.settings.infiniteZoom)},e)}}),this.core.getElementById("lg-zoom-in").on("click.lg",function(){t.zoomIn()}),this.core.getElementById("lg-actual-size").on("click.lg",function(){t.setActualSize(t.core.index)}),this.core.LGel.on("lgBeforeOpen.zoom",function(){t.core.outer.find(".lg-item").removeClass("lg-zoomable")}),this.core.LGel.on("lgAfterOpen.zoom",function(){t.scrollTop=t.$LG(window).scrollTop(),t.pageX=t.core.outer.width()/2,t.pageY=t.core.outer.height()/2+t.scrollTop,t.scale=1}),this.core.LGel.on("lgAfterSlide.zoom",function(e){var i=e.detail.prevIndex;t.scale=1,t.positionChanged=!1,t.zoomInProgress=!1,t.resetZoom(i),t.resetImageTranslate(i),t.isImageSlide(t.core.index)&&t.setZoomEssentials()}),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe(),this.zoomableTimeout=!1,this.positionChanged=!1,this.zoomInProgress=!1}},i.prototype.zoomIn=function(){if(this.isImageSlide(this.core.index)){var t=this.scale+this.settings.scale;this.settings.infiniteZoom||(t=this.getScale(t)),this.beginZoom(t),this.zoomImage(t,Math.min(this.settings.scale,t-this.scale),!0,!this.settings.infiniteZoom)}},i.prototype.resetZoom=function(t){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var e=this.core.getElementById("lg-actual-size"),i=this.core.getSlideItem(void 0!==t?t:this.core.index);e.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),i.find(".lg-img-wrap").first().removeAttr("style"),i.find(".lg-image").first().removeAttr("style"),this.scale=1,this.left=0,this.top=0,this.setPageCords()},i.prototype.getTouchDistance=function(t){return Math.sqrt((t.touches[0].pageX-t.touches[1].pageX)*(t.touches[0].pageX-t.touches[1].pageX)+(t.touches[0].pageY-t.touches[1].pageY)*(t.touches[0].pageY-t.touches[1].pageY))},i.prototype.pinchZoom=function(){var t=this,e=0,i=!1,s=1,o=0,r=this.core.getSlideItem(this.core.index);this.core.outer.on("touchstart.lg",function(i){if(r=t.core.getSlideItem(t.core.index),t.isImageSlide(t.core.index)&&2===i.touches.length){if(i.preventDefault(),t.core.outer.hasClass("lg-first-slide-loading"))return;s=t.scale||1,t.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t.setPageCords(i),t.resetImageTranslate(t.core.index),t.core.touchAction="pinch",e=t.getTouchDistance(i)}}),this.core.$inner.on("touchmove.lg",function(n){if(2===n.touches.length&&"pinch"===t.core.touchAction&&(t.$LG(n.target).hasClass("lg-item")||r.get().contains(n.target))){n.preventDefault();var a=t.getTouchDistance(n),l=e-a;if(!i&&Math.abs(l)>5&&(i=!0),i){o=t.scale;var c=Math.max(1,s+.02*-l);t.scale=Math.round(100*(c+Number.EPSILON))/100;var d=t.scale-o;t.zoomImage(t.scale,Math.round(100*(d+Number.EPSILON))/100,!1,!1)}}}),this.core.$inner.on("touchend.lg",function(s){if("pinch"===t.core.touchAction&&(t.$LG(s.target).hasClass("lg-item")||r.get().contains(s.target))){if(i=!1,e=0,t.scale<=1)t.resetZoom();else{var o=t.getCurrentImageActualSizeScale();if(t.scale>=o){var n=o-t.scale;0===n&&(n=.01),t.zoomImage(o,n,!1,!0)}t.manageActualPixelClassNames(),t.core.outer.addClass("lg-zoomed")}t.core.touchAction=void 0}})},i.prototype.touchendZoom=function(t,e,i,s,o){var r=e.x-t.x,n=e.y-t.y,a=Math.abs(r)/o+1,l=Math.abs(n)/o+1;a>2&&(a+=1),l>2&&(l+=1),r*=a,n*=l;var c=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),d={};d.x=this.left+r,d.y=this.top+n;var h=this.getPossibleSwipeDragCords();(Math.abs(r)>15||Math.abs(n)>15)&&(s&&(this.isBeyondPossibleTop(d.y,h.minY)?d.y=h.minY:this.isBeyondPossibleBottom(d.y,h.maxY)&&(d.y=h.maxY)),i&&(this.isBeyondPossibleLeft(d.x,h.minX)?d.x=h.minX:this.isBeyondPossibleRight(d.x,h.maxX)&&(d.x=h.maxX)),s?this.top=d.y:d.y=this.top,i?this.left=d.x:d.x=this.left,this.setZoomSwipeStyles(c,d),this.positionChanged=!0)},i.prototype.getZoomSwipeCords=function(t,e,i,s,o){var r={};if(s){if(r.y=this.top+(e.y-t.y),this.isBeyondPossibleTop(r.y,o.minY)){var n=o.minY-r.y;r.y=o.minY-n/6}else if(this.isBeyondPossibleBottom(r.y,o.maxY)){var a=r.y-o.maxY;r.y=o.maxY+a/6}}else r.y=this.top;if(i){if(r.x=this.left+(e.x-t.x),this.isBeyondPossibleLeft(r.x,o.minX)){var l=o.minX-r.x;r.x=o.minX-l/6}else if(this.isBeyondPossibleRight(r.x,o.maxX)){var c=r.x-o.maxX;r.x=o.maxX+c/6}}else r.x=this.left;return r},i.prototype.isBeyondPossibleLeft=function(t,e){return t>=e},i.prototype.isBeyondPossibleRight=function(t,e){return t<=e},i.prototype.isBeyondPossibleTop=function(t,e){return t>=e},i.prototype.isBeyondPossibleBottom=function(t,e){return t<=e},i.prototype.isImageSlide=function(t){var e=this.core.galleryItems[t];return"image"===this.core.getSlideType(e)},i.prototype.getPossibleSwipeDragCords=function(t){var e=this.core.getSlideItem(this.core.index).find(".lg-image").first(),i=this.core.mediaContainerPosition.bottom,s=e.get().getBoundingClientRect(),o=s.height,r=s.width;return t&&(o+=t*o,r+=t*r),{minY:(o-this.containerRect.height)/2,maxY:(this.containerRect.height-o)/2+i,minX:(r-this.containerRect.width)/2,maxX:(this.containerRect.width-r)/2}},i.prototype.setZoomSwipeStyles=function(t,e){t.css("transform","translate3d("+e.x+"px, "+e.y+"px, 0)")},i.prototype.zoomSwipe=function(){var t,e,i=this,s={},o={},r=!1,n=!1,a=!1,l=new Date,c=(new Date,this.core.getSlideItem(this.core.index));this.core.$inner.on("touchstart.lg",function(o){if(i.isImageSlide(i.core.index)&&(c=i.core.getSlideItem(i.core.index),(i.$LG(o.target).hasClass("lg-item")||c.get().contains(o.target))&&1===o.touches.length&&i.core.outer.hasClass("lg-zoomed"))){o.preventDefault(),l=new Date,i.core.touchAction="zoomSwipe",e=i.core.getSlideItem(i.core.index).find(".lg-img-wrap").first();var r=i.getDragAllowedAxises(0);a=r.allowY,((n=r.allowX)||a)&&(s=i.getSwipeCords(o)),t=i.getPossibleSwipeDragCords(),i.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}}),this.core.$inner.on("touchmove.lg",function(l){if(1===l.touches.length&&"zoomSwipe"===i.core.touchAction&&(i.$LG(l.target).hasClass("lg-item")||c.get().contains(l.target))){l.preventDefault(),i.core.touchAction="zoomSwipe",o=i.getSwipeCords(l);var d=i.getZoomSwipeCords(s,o,n,a,t);(Math.abs(o.x-s.x)>15||Math.abs(o.y-s.y)>15)&&(r=!0,i.setZoomSwipeStyles(e,d))}}),this.core.$inner.on("touchend.lg",function(t){if("zoomSwipe"===i.core.touchAction&&(i.$LG(t.target).hasClass("lg-item")||c.get().contains(t.target))){if(t.preventDefault(),i.core.touchAction=void 0,i.core.outer.removeClass("lg-zoom-dragging"),!r)return;r=!1;var e=(new Date).valueOf()-l.valueOf();i.touchendZoom(s,o,n,a,e)}})},i.prototype.zoomDrag=function(){var t,e,i,s,o=this,r={},n={},a=!1,l=!1,c=!1,d=!1;this.core.outer.on("mousedown.lg.zoom",function(e){if(o.isImageSlide(o.core.index)){var n=o.core.getSlideItem(o.core.index);if(o.$LG(e.target).hasClass("lg-item")||n.get().contains(e.target)){t=new Date,s=o.core.getSlideItem(o.core.index).find(".lg-img-wrap").first();var l=o.getDragAllowedAxises(0);d=l.allowY,c=l.allowX,o.core.outer.hasClass("lg-zoomed")&&o.$LG(e.target).hasClass("lg-object")&&(c||d)&&(e.preventDefault(),r=o.getDragCords(e),i=o.getPossibleSwipeDragCords(),a=!0,o.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}}),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,function(t){if(a){l=!0,n=o.getDragCords(t);var e=o.getZoomSwipeCords(r,n,c,d,i);o.setZoomSwipeStyles(s,e)}}),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,function(i){if(a){if(e=new Date,a=!1,o.core.outer.removeClass("lg-zoom-dragging"),l&&(r.x!==n.x||r.y!==n.y)){n=o.getDragCords(i);var s=e.valueOf()-t.valueOf();o.touchendZoom(r,n,c,d,s)}l=!1}o.core.outer.removeClass("lg-grabbing").addClass("lg-grab")})},i.prototype.closeGallery=function(){this.resetZoom(),this.zoomInProgress=!1},i.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},i}()}()},816:t=>{t.exports=function(){function t(t,e,i){return e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)}function e(t,e,i){return e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent("on"+t,i)}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t,e){return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}var o=function(){for(var t=3,e=document.createElement("b"),i=e.all||[];e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i><![endif]--\x3e",i[0];);return 4<t?t:document.documentMode}(),r=navigator.platform.toLowerCase().indexOf("mac")+1,n=function(s){if(!(this instanceof n))return new n(s);var o=this,a={rows_in_block:50,blocks_in_cluster:4,tag:null,show_no_data_row:!0,no_data_class:"clusterize-no-data",no_data_text:"No data",keep_parity:!0,callbacks:{}};o.options={};for(var l,c="rows_in_block blocks_in_cluster show_no_data_row no_data_class no_data_text keep_parity tag callbacks".split(" "),d=0;l=c[d];d++)o.options[l]=void 0!==s[l]&&null!=s[l]?s[l]:a[l];for(a=["scroll","content"],d=0;c=a[d];d++)if(o[c+"_elem"]=s[c+"Id"]?document.getElementById(s[c+"Id"]):s[c+"Elem"],!o[c+"_elem"])throw Error("Error! Could not find "+c+" element");o.content_elem.hasAttribute("tabindex")||o.content_elem.setAttribute("tabindex",0);var h=i(s.rows)?s.rows:o.fetchMarkup(),u={};s=o.scroll_elem.scrollTop,o.insertToDOM(h,u),o.scroll_elem.scrollTop=s;var g=!1,m=0,p=!1,f=function(){r&&(p||(o.content_elem.style.pointerEvents="none"),p=!0,clearTimeout(m),m=setTimeout(function(){o.content_elem.style.pointerEvents="auto",p=!1},50)),g!=(g=o.getClusterNum(h))&&o.insertToDOM(h,u),o.options.callbacks.scrollingProgress&&o.options.callbacks.scrollingProgress(o.getScrollProgress())},y=0,v=function(){clearTimeout(y),y=setTimeout(o.refresh,100)};t("scroll",o.scroll_elem,f),t("resize",window,v),o.destroy=function(t){e("scroll",o.scroll_elem,f),e("resize",window,v),o.html((t?o.generateEmptyRow():h).join(""))},o.refresh=function(t){(o.getRowsHeight(h)||t)&&o.update(h)},o.update=function(t){h=i(t)?t:[],t=o.scroll_elem.scrollTop,h.length*o.options.item_height<t&&(g=o.scroll_elem.scrollTop=0),o.insertToDOM(h,u),o.scroll_elem.scrollTop=t},o.clear=function(){o.update([])},o.getRowsAmount=function(){return h.length},o.getScrollProgress=function(){return this.options.scroll_top/(h.length*this.options.item_height)*100||0};var b=function(t,e){var s=i(e)?e:[];s.length&&(h="append"==t?h.concat(s):s.concat(h),o.insertToDOM(h,u))};o.append=function(t){b("append",t)},o.prepend=function(t){b("prepend",t)}};return n.prototype={constructor:n,fetchMarkup:function(){for(var t=[],e=this.getChildNodes(this.content_elem);e.length;)t.push(e.shift().outerHTML);return t},exploreEnvironment:function(t,e){var i=this.options;i.content_tag=this.content_elem.tagName.toLowerCase(),t.length&&(o&&9>=o&&!i.tag&&(i.tag=t[0].match(/<([^>\s/]*)/)[1].toLowerCase()),1>=this.content_elem.children.length&&(e.data=this.html(t[0]+t[0]+t[0])),i.tag||(i.tag=this.content_elem.children[0].tagName.toLowerCase()),this.getRowsHeight(t))},getRowsHeight:function(t){var e=this.options,i=e.item_height;if(e.cluster_height=0,t.length&&(t=this.content_elem.children).length){var o=t[Math.floor(t.length/2)];return e.item_height=o.offsetHeight,"tr"==e.tag&&"collapse"!=s("borderCollapse",this.content_elem)&&(e.item_height+=parseInt(s("borderSpacing",this.content_elem),10)||0),"tr"!=e.tag&&(t=parseInt(s("marginTop",o),10)||0,o=parseInt(s("marginBottom",o),10)||0,e.item_height+=Math.max(t,o)),e.block_height=e.item_height*e.rows_in_block,e.rows_in_cluster=e.blocks_in_cluster*e.rows_in_block,e.cluster_height=e.blocks_in_cluster*e.block_height,i!=e.item_height}},getClusterNum:function(t){var e=this.options;e.scroll_top=this.scroll_elem.scrollTop;var i=e.cluster_height-e.block_height;return Math.min(Math.floor(e.scroll_top/i),Math.floor(t.length*e.item_height/i))},generateEmptyRow:function(){var t=this.options;if(!t.tag||!t.show_no_data_row)return[];var e=document.createElement(t.tag),i=document.createTextNode(t.no_data_text);if(e.className=t.no_data_class,"tr"==t.tag){var s=document.createElement("td");s.colSpan=100,s.appendChild(i)}return e.appendChild(s||i),[e.outerHTML]},generate:function(t){var e=this.options,i=t.length;if(i<e.rows_in_block)return{top_offset:0,bottom_offset:0,rows_above:0,rows:i?t:this.generateEmptyRow()};var s=Math.max((e.rows_in_cluster-e.rows_in_block)*this.getClusterNum(t),0),o=s+e.rows_in_cluster,r=Math.max(s*e.item_height,0);e=Math.max((i-o)*e.item_height,0),i=[];var n=s;for(1>r&&n++;s<o;s++)t[s]&&i.push(t[s]);return{top_offset:r,bottom_offset:e,rows_above:n,rows:i}},renderExtraTag:function(t,e){var i=document.createElement(this.options.tag);return i.className=["clusterize-extra-row","clusterize-"+t].join(" "),e&&(i.style.height=e+"px"),i.outerHTML},insertToDOM:function(t,e){this.options.cluster_height||this.exploreEnvironment(t,e);var i=this.generate(t),s=i.rows.join(""),o=this.checkChanges("data",s,e),r=this.checkChanges("top",i.top_offset,e),n=this.checkChanges("bottom",i.bottom_offset,e),a=this.options.callbacks,l=[];o||r?(i.top_offset&&(this.options.keep_parity&&l.push(this.renderExtraTag("keep-parity")),l.push(this.renderExtraTag("top-space",i.top_offset))),l.push(s),i.bottom_offset&&l.push(this.renderExtraTag("bottom-space",i.bottom_offset)),a.clusterWillChange&&a.clusterWillChange(),this.html(l.join("")),"ol"==this.options.content_tag&&this.content_elem.setAttribute("start",i.rows_above),this.content_elem.style["counter-increment"]="clusterize-counter "+(i.rows_above-1),a.clusterChanged&&a.clusterChanged()):n&&(this.content_elem.lastChild.style.height=i.bottom_offset+"px")},html:function(t){var e=this.content_elem;if(o&&9>=o&&"tr"==this.options.tag){var i=document.createElement("div");for(i.innerHTML="<table><tbody>"+t+"</tbody></table>";t=e.lastChild;)e.removeChild(t);for(i=this.getChildNodes(i.firstChild.firstChild);i.length;)e.appendChild(i.shift())}else e.innerHTML=t},getChildNodes:function(t){for(var e=[],i=0,s=(t=t.children).length;i<s;i++)e.push(t[i]);return e},checkChanges:function(t,e,i){var s=e!=i[t];return i[t]=e,s}},n}()},879:function(t){var e;e=function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=Array(e);i<e;i++)s[i]=t[i];return s}function e(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function i(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,s)}return i}function s(t){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?i(Object(o),!0).forEach(function(i){e(t,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function o(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(e,i){if(e){if("string"==typeof e)return t(e,i);var s={}.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(e,i):void 0}}var a=function(t){return"string"==typeof t?document.querySelector(t):t()},l=function(t,e){var i="string"==typeof t?document.createElement(t):t;for(var s in e){var o=e[s];if("inside"===s)o.append(i);else if("dest"===s)a(o[0]).insertAdjacentElement(o[1],i);else if("around"===s){var r=o;r.parentNode.insertBefore(i,r),i.append(r),null!=r.getAttribute("autofocus")&&r.focus()}else s in i?i[s]=o:i.setAttribute(s,o)}return i},c=function(t,e){return t=String(t).toLowerCase(),e?t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):t},d=function(t,e){return l("mark",s({innerHTML:t},"string"==typeof e&&{class:e})).outerHTML},h=function(t,e){e.input.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:e.feedback,cancelable:!0}))},u=function(t,e,i){var s=i||{},o=s.mode,r=s.diacritics,n=s.highlight,a=c(e,r);if(e=String(e),t=c(t,r),"loose"===o){var l=(t=t.replace(/ /g,"")).length,h=0,u=Array.from(e).map(function(e,i){return h<l&&a[i]===t[h]&&(e=n?d(e,n):e,h++),e}).join("");if(h===l)return u}else{var g=a.indexOf(t);if(~g)return t=e.substring(g,g+t.length),n?e.replace(t,d(t,n)):e}},g=function(t,e){return new Promise(function(i,s){var o;return(o=t.data).cache&&o.store?i():new Promise(function(t,i){return"function"==typeof o.src?new Promise(function(t,i){return"AsyncFunction"===o.src.constructor.name?o.src(e).then(t,i):t(o.src(e))}).then(t,i):t(o.src)}).then(function(e){try{return t.feedback=o.store=e,h("response",t),i()}catch(t){return s(t)}},s)})},m=function(t,e){var i=e.data,s=e.searchEngine,o=[];i.store.forEach(function(r,a){var l=function(i){var n=i?r[i]:r,a="function"==typeof s?s(t,n):u(t,n,{mode:s,diacritics:e.diacritics,highlight:e.resultItem.highlight});if(a){var l={match:a,value:r};i&&(l.key=i),o.push(l)}};if(i.keys){var c,d=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=n(t))){e&&(t=e);var i=0,s=function(){};return{s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return r=t.done,t},e:function(t){a=!0,o=t},f:function(){try{r||null==e.return||e.return()}finally{if(a)throw o}}}}(i.keys);try{for(d.s();!(c=d.n()).done;)l(c.value)}catch(t){d.e(t)}finally{d.f()}}else l()}),i.filter&&(o=i.filter(o));var r=o.slice(0,e.resultsList.maxResults);e.feedback={query:t,matches:o,results:r},h("results",e)},p="aria-expanded",f="aria-activedescendant",y="aria-selected",v=function(t,e){t.feedback.selection=s({index:e},t.feedback.results[e])},b=function(t){t.isOpen||((t.wrapper||t.input).setAttribute(p,!0),t.list.removeAttribute("hidden"),t.isOpen=!0,h("open",t))},w=function(t){t.isOpen&&((t.wrapper||t.input).setAttribute(p,!1),t.input.setAttribute(f,""),t.list.setAttribute("hidden",""),t.isOpen=!1,h("close",t))},S=function(t,e){var i=e.resultItem,s=e.list.getElementsByTagName(i.tag),r=!!i.selected&&i.selected.split(" ");if(e.isOpen&&s.length){var n,a,l=e.cursor;t>=s.length&&(t=0),t<0&&(t=s.length-1),e.cursor=t,l>-1&&(s[l].removeAttribute(y),r&&(a=s[l].classList).remove.apply(a,o(r))),s[t].setAttribute(y,!0),r&&(n=s[t].classList).add.apply(n,o(r)),e.input.setAttribute(f,s[e.cursor].id),e.list.scrollTop=s[t].offsetTop-e.list.clientHeight+s[t].clientHeight+5,e.feedback.cursor=e.cursor,v(e,t),h("navigate",e)}},C=function(t){S(t.cursor+1,t)},x=function(t){S(t.cursor-1,t)},I=function(t,e,i){(i=i>=0?i:t.cursor)<0||(t.feedback.event=e,v(t,i),h("selection",t),w(t))};function E(t,e){var i=this;return new Promise(function(o,r){var n,a;return n=e||((a=t.input)instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value:a.innerHTML),function(t,e,i){return e?e(t):t.length>=i}(n=t.query?t.query(n):n,t.trigger,t.threshold)?g(t,n).then(function(e){try{return t.feedback instanceof Error?o():(m(n,t),t.resultsList&&function(t){var e=t.resultsList,i=t.list,o=t.resultItem,r=t.feedback,n=r.matches,a=r.results;if(t.cursor=-1,i.innerHTML="",n.length||e.noResults){var c=new DocumentFragment;a.forEach(function(t,e){var i=l(o.tag,s({id:"".concat(o.id,"_").concat(e),role:"option",innerHTML:t.match,inside:c},o.class&&{class:o.class}));o.element&&o.element(i,t)}),i.append(c),e.element&&e.element(i,r),b(t)}else w(t)}(t),c.call(i))}catch(t){return r(t)}},r):(w(t),c.call(i));function c(){return o()}})}var T=function(t,e){for(var i in t)for(var s in t[i])e(i,s)};function L(t){var e=this;return new Promise(function(i,o){var r,n,a;if(r=t.placeHolder,a={role:"combobox","aria-owns":(n=t.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},l(t.input,s(s({"aria-controls":n.id,"aria-autocomplete":"both"},r&&{placeholder:r}),!t.wrapper&&s({},a))),t.wrapper&&(t.wrapper=l("div",s({around:t.input,class:t.name+"_wrapper"},a))),n&&(t.list=l(n.tag,s({dest:[n.destination,n.position],id:n.id,role:"listbox",hidden:"hidden"},n.class&&{class:n.class}))),function(t){var e,i,o,r=t.events,n=(e=function(){return E(t)},i=t.debounce,function(){clearTimeout(o),o=setTimeout(function(){return e()},i)}),a=t.events=s({input:s({},r&&r.input)},t.resultsList&&{list:r?s({},r.list):{}}),l={input:{input:function(){n()},keydown:function(e){!function(t,e){switch(t.keyCode){case 40:case 38:t.preventDefault(),40===t.keyCode?C(e):x(e);break;case 13:e.submit||t.preventDefault(),e.cursor>=0&&I(e,t);break;case 9:e.resultsList.tabSelect&&e.cursor>=0&&I(e,t);break;case 27:e.input.value="",h("clear",e),w(e)}}(e,t)},blur:function(){w(t)}},list:{mousedown:function(t){t.preventDefault()},click:function(e){!function(t,e){var i=e.resultItem.tag.toUpperCase(),s=Array.from(e.list.querySelectorAll(i)),o=t.target.closest(i);o&&o.nodeName===i&&I(e,t,s.indexOf(o))}(e,t)}}};T(l,function(e,i){(t.resultsList||"input"===i)&&(a[e][i]||(a[e][i]=l[e][i]))}),T(a,function(e,i){t[e].addEventListener(i,a[e][i])})}(t),t.data.cache)return g(t).then(function(t){try{return c.call(e)}catch(t){return o(t)}},o);function c(){return h("init",t),i()}return c.call(e)})}function A(t){var e=t.prototype;e.init=function(){L(this)},e.start=function(t){E(this,t)},e.unInit=function(){if(this.wrapper){var t=this.wrapper.parentNode;t.insertBefore(this.input,this.wrapper),t.removeChild(this.wrapper)}var e;T((e=this).events,function(t,i){e[t].removeEventListener(i,e.events[t][i])})},e.open=function(){b(this)},e.close=function(){w(this)},e.goTo=function(t){S(t,this)},e.next=function(){C(this)},e.previous=function(){x(this)},e.select=function(t){I(this,null,t)},e.search=function(t,e,i){return u(t,e,i)}}return function t(e){this.options=e,this.id=t.instances=(t.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(t){var e=t.name,i=t.options,s=t.resultsList,o=t.resultItem;for(var n in i)if("object"===r(i[n]))for(var l in t[n]||(t[n]={}),i[n])t[n][l]=i[n][l];else t[n]=i[n];t.selector=t.selector||"#"+e,s.destination=s.destination||t.selector,s.id=s.id||e+"_list_"+t.id,o.id=o.id||e+"_result",t.input=a(t.selector)}(this),A.call(this,t),L(this)}},t.exports=e()}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=i(816),e=i.n(t);class s{constructor(t,e){this.wrapper=t,this.storage=e,this.filters={}}prefillFromStorage(t){const e=this.storage.get(t);e&&(Object.keys(e).forEach(t=>{if("object"==typeof e[t]&&null!==e[t]&&"from"in e[t]&&"to"in e[t])return;const i=e[t];this.wrapper.querySelectorAll(`input[data-dataTable-filter="${t}"]`).forEach(t=>{const e=t.value.toLowerCase();Array.isArray(i)?i.map(t=>t.toLowerCase()).includes(e)&&(t.checked=!0):e===i.toLowerCase()&&(t.checked=!0)})}),Object.entries(e).filter(([t,e])=>"object"==typeof e&&null!==e&&"from"in e&&"to"in e).forEach(([t,e])=>{const i=this.wrapper.querySelector(`input[name="${t}[from]"]`),s=this.wrapper.querySelector(`input[name="${t}[to]"]`);i&&e.from&&(i.valueAsDate=new Date(e.from)),s&&e.to&&(s.valueAsDate=new Date(e.to))}),this.storage.clearAll())}getActiveFilters(){const t={};return this.wrapper.querySelectorAll("[data-dataTable-filter]:checked").forEach(e=>{const i=e.getAttribute("data-dataTable-filter"),s=e.value.toLowerCase();t[i]?Array.isArray(t[i])?t[i].push(s):t[i]=[t[i],s]:t[i]=s}),this.wrapper.querySelectorAll('[data-dataTable-filter*="[]"]').forEach(e=>{const i=e.getAttribute("data-dataTable-filter").replace("[]",""),s=e.querySelector(`input[name="${i}[from]"]`),o=e.querySelector(`input[name="${i}[to]"]`);if(s&&o&&s.valueAsDate&&o.valueAsDate){const e=new Date(s.valueAsNumber).setUTCHours(0,0,0),r=new Date(o.valueAsNumber).setUTCHours(23,59,59);t[i]={from:e,to:r}}}),t}updateDropdownState(t){this.wrapper.querySelectorAll(".filter-dropdown [data-dropdown-toggle]").forEach(t=>{t.classList.remove("active")}),Object.entries(t).forEach(([t,e])=>{if(e&&"object"==typeof e&&"from"in e&&"to"in e){const e=this.wrapper.querySelector(`[data-datatable-filter="${t}[]"]`)?.closest(".filter-dropdown"),i=e.querySelector("[data-dropdown-toggle]");return void(i&&i.classList.add("active"))}const i=this.wrapper.querySelector(`[data-dataTable-filter="${t}"]:checked`)?.closest(".filter-dropdown"),s=i.querySelector("[data-dropdown-toggle]");s&&s.classList.add("active")})}applyFiltersToRows(t,e=""){const i=this.getActiveFilters(),s=e.toLowerCase();return t.forEach(t=>{t.active=!t.searchables||t.searchables.toLowerCase().includes(s);for(const[e,s]of Object.entries(i)){const i=t.filterables[e];s&&"object"==typeof s&&"from"in s&&"to"in s?t.active=t.active&&i>=s.from&&i<=s.to:Array.isArray(s)?t.active=t.active&&s.includes(i?.toLowerCase()):t.active=t.active&&i?.toLowerCase()===s}}),t}resetAll(){this.wrapper.querySelectorAll('[data-dataTable-filter], [data-dataTable-filter*="[]"] input').forEach(t=>{"radio"===t.type||"checkbox"===t.type?t.checked=!1:t.value=""}),this.storage.clearAll()}resetOne(t){this.wrapper.querySelectorAll(`[data-dataTable-filter][name^="${t}"], [data-dataTable-filter*="[]"] [name^="${t}"]`).forEach(t=>{"radio"===t.type||"checkbox"===t.type?t.checked=!1:t.value=""})}}class o{static calculate(t){return t.filter(t=>t.active).reduce((t,e)=>(Object.entries(e.summables).forEach(([e,i])=>t[e]=(t[e]||0)+i),t),{})}static render(t,e){const i=this.calculate(e);t.querySelectorAll("[data-dataTable-summable]").forEach(t=>{const e=t.getAttribute("data-dataTable-summable");t.innerHTML=void 0!==i[e]?(t=>{t=(t+"").replace(/[^0-9+\-Ee.]/g,"");const e=isFinite(+t)?+t:0,i=isFinite(0)?Math.abs(0):0;let s="";return s=(i?function(t,e){if(-1===(""+t).indexOf("e"))return+(Math.round(t+"e+"+e)+"e-"+e);{const i=(""+t).split("e");let s="";return+i[1]+e>0&&(s="+"),(+(Math.round(+i[0]+"e"+s+(+i[1]+e))+"e-"+e)).toFixed(e)}}(e,i).toString():""+Math.round(e)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g," ")),(s[1]||"").length<i&&(s[1]=s[1]||"",s[1]+=new Array(i-s[1].length+1).join("0")),s.join(",")})(i[e]):0})}}class r{constructor(t){this.columns=t,this.sortAsc=!1,this.sortOnPrevious=null}attachListeners(t,e,i){this.columns.forEach(s=>s.addEventListener("click",()=>{const o=s.getAttribute("data-dataTable-sort");o===this.sortOnPrevious?this.sortAsc=!this.sortAsc:this.sortAsc=!0,this.sortOnPrevious=o,this.columns.forEach(t=>t.querySelector(".sorting-icon")?.setAttribute("aria-sort","none")),s.querySelector(".sorting-icon")?.setAttribute("aria-sort",this.sortAsc?"ascending":"descending"),t.sort((t,e)=>{const i=t.sort[o],s=e.sort[o];return void 0===i?1:void 0===s?-1:i<s?this.sortAsc?-1:1:i>s?this.sortAsc?1:-1:0}),e.update(t.filter(t=>t.active).map(t=>t.markup)),i.scrollTop=0}))}}class n{constructor(t,e,i){this.wrapper=t,this.tbody=e,this.scrollElem=i,this.cluster=null}init(t){this.cluster=new(e())({rows:t.filter(t=>t.active).map(t=>t.markup),scrollElem:this.scrollElem,contentElem:this.tbody,no_data_class:"clusterize-loading",callbacks:{clusterChanged:()=>{o.render(this.wrapper,t);const e=this.wrapper.querySelector("[data-dataTable-result-count]");e&&(e.innerText=t.filter(t=>t.active).length),document.dispatchEvent(new CustomEvent("dataTableClusterWasChanged",{bubbles:!0,cancelable:!1}))}}})}update(t){this.cluster&&(this.cluster.update(t.filter(t=>t.active).map(t=>t.markup)),this.scrollElem.scrollTop=0)}}class a{constructor(t="dataTableFilters"){this.storageKey=t}clearAll(){localStorage.removeItem(this.storageKey)}get(t){const e=localStorage.getItem(this.storageKey);return e&&JSON.parse(e)[t]||{}}set(t){localStorage.setItem(this.storageKey,JSON.stringify(t))}}class l{constructor(t,e){this.wrapper=t,this.config=e,this.placesControl=null,this.mainFeatureGroup=L.featureGroup(),this.map=L.map(this.wrapper,{scrollWheelZoom:!0,minZoom:1,maxZoom:21}),this.config.tileLayerUrls.forEach(t=>{L.tileLayer(t).addTo(this.map)})}redraw(t){t=t.filter(t=>t.active),this.mainFeatureGroup.clearLayers(),this.placesControl&&this.map.removeControl(this.placesControl);const e=[],i=new Map,s=L.featureGroup(),o=(t=>{const e=t.reduce((t,e)=>{const i=e.location.state;return i&&(t[i]=(t[i]||0)+1),t},{}),i=Object.keys(e).reduce((t,i)=>e[t]>e[i]?t:i,"");return i||null})(t);t.forEach(t=>{const{countryCode:e,state:r}=t.location;i.has(e)||i.set(e,L.featureGroup());const n=L.Polyline.fromEncoded(t.encodedPolyline).getLatLngs();L.polyline(n,{color:this.config.polylineColor,weight:1.5,opacity:.5,smoothFactor:1,overrideExisting:!0,detectColors:!0}).addTo(i.get(e)),o===r&&L.polyline(n).addTo(s)}),i.forEach((t,i)=>{t.addTo(this.mainFeatureGroup),e.push({countryCode:i,bounds:t.getBounds()})}),this.mainFeatureGroup.addTo(this.map),this.placesControl=L.control.flyToPlaces({places:e}),this.placesControl.addTo(this.map),s.getBounds().isValid()&&this.map.fitBounds(s.getBounds())}}class c{constructor(t){this.wrapper=t,this.heatmap=t.querySelector("[data-leaflet-routes]"),this.resetBtn=t.querySelector("[data-dataTable-reset]"),this.config=JSON.parse(this.heatmap.getAttribute("data-heatmap-config")),this.filterManager=new s(t,new a),this.drawer=new l(this.heatmap,this.config)}async render(){this.wrapper.querySelectorAll('input[type="date"][data-default-to-today]').forEach(t=>t.valueAsDate=new Date);const t=JSON.parse(this.heatmap.getAttribute("data-leaflet-routes")),e=()=>{const e=this.filterManager.getActiveFilters();this.filterManager.updateDropdownState(e);const i=this.filterManager.applyFiltersToRows(t);this.drawer.redraw(i),this.resetBtn.classList.toggle("hidden",!(Object.keys(e).length>0));const s=this.wrapper.querySelector("[data-dataTable-result-count]");s&&(s.innerText=i.filter(t=>t.active).length)};e(),this.wrapper.querySelectorAll("[data-dataTable-filter]").forEach(t=>t.addEventListener("input",e)),this.resetBtn&&this.resetBtn.addEventListener("click",t=>{t.preventDefault(),this.filterManager.resetAll(),e()}),this.wrapper.querySelectorAll("[data-datatable-filter-clear]").forEach(t=>{t.addEventListener("click",i=>{i.preventDefault();const s=t.getAttribute("data-datatable-filter-clear");this.filterManager.resetOne(s),e()})})}}var d=i(879),h=i.n(d);class u{constructor(t){this.chatWrapper=t.querySelector(".chat--wrapper"),this.form=t.querySelector("form"),this.button=this.form.querySelector("button.send-message"),this.textInput=this.form.querySelector("input.message"),this.spinner=this.form.querySelector("div.spinner"),this.placeholderIdle=this.textInput.getAttribute("data-placeholder-idle"),this.placeholderProcessing=this.textInput.getAttribute("data-placeholder-processing"),this.commands=JSON.parse(this.chatWrapper.getAttribute("data-chat-commands")||"{}"),this.autoCompleteJS=null}toggleElements(t){this.textInput.disabled=t,this.button.disabled=t,this.button.classList.toggle("inline-flex",!t),this.button.classList.toggle("hidden",t),this.form.classList.toggle("disabled",t),this.spinner.classList.toggle("hidden",!t),this.textInput.value="",this.textInput.placeholder=t?this.placeholderProcessing:this.placeholderIdle}initAutoComplete(){this.commands&&0!==Object.keys(this.commands).length&&(this.autoCompleteJS=new(h())({selector:()=>this.textInput,data:{src:Object.keys(this.commands)},threshold:1,trigger:t=>t.startsWith("/"),resultsList:{tabSelect:!0,position:"beforebegin"},resultItem:{highlight:!0,element:(t,e)=>{t.innerHTML=`\n                        <div>${e.match}</div>\n                        <div class="text-xs text-gray-500">${this.commands[e.value]}</div>\n                    `}},events:{input:{focus:()=>{this.autoCompleteJS.input.value.length&&this.autoCompleteJS.start()}}}}),this.autoCompleteJS.input.addEventListener("selection",t=>{const e=t.detail;this.autoCompleteJS.input.value=this.commands[e.selection.value]||""}))}handleSSE(t){const e=new EventSource(`/chat/sse?message=${encodeURIComponent(t)}`);e.addEventListener("fullMessage",t=>{this.chatWrapper.innerHTML+=t.data.replace(/\\n/g,"\n")}),e.addEventListener("removeThinking",()=>{const t=this.chatWrapper.querySelector(".thinking");t?.remove()}),e.addEventListener("agentResponse",t=>{const e=this.chatWrapper.querySelector("div.message-wrapper:last-child > div.message");e&&(e.innerHTML+=t.data.replace(/\\n/g,"\n"))}),e.addEventListener("done",()=>{e.close(),this.toggleElements(!1),this.textInput.focus()})}bindEvents(){this.form.addEventListener("submit",t=>{t.preventDefault();const e=new FormData(this.form);this.toggleElements(!0),this.handleSSE(e.get("form[message]"))}),this.textInput.addEventListener("keydown",t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),this.form.requestSubmit())})}render(){this.initAutoComplete(),this.bindEvents()}}const g=t=>{const e=document.querySelector("[data-latest-version]"),i=e.querySelector("a");i&&(i.href=i.href.replace("[LATEST_VERSION]",t),i.textContent=i.textContent.replace("[LATEST_VERSION]",t)),e.classList.remove("hidden")},m="undefined"!=typeof window,p=m&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),f=m&&window.devicePixelRatio>1,y={elements_selector:".lazy",container:p||m?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},v=t=>Object.assign({},y,t),b=function(t,e){let i;const s="LazyLoad::Initialized",o=new t(e);try{i=new CustomEvent(s,{detail:{instance:o}})}catch(t){i=document.createEvent("CustomEvent"),i.initCustomEvent(s,!1,!1,{instance:o})}window.dispatchEvent(i)},w="src",S="srcset",C="sizes",x="poster",I="llOriginalAttrs",E="data",T="loading",A="loaded",_="applied",k="error",z="native",O="data-",D="ll-status",M=(t,e)=>t.getAttribute(O+e),P=t=>M(t,D),B=(t,e)=>((t,e,i)=>{const s=O+e;null!==i?t.setAttribute(s,i):t.removeAttribute(s)})(t,D,e),N=t=>B(t,null),G=t=>null===P(t),F=t=>P(t)===z,H=[T,A,_,k],$=(t,e,i,s)=>{t&&"function"==typeof t&&(void 0===s?void 0===i?t(e):t(e,i):t(e,i,s))},q=(t,e)=>{m&&""!==e&&t.classList.add(e)},R=(t,e)=>{m&&""!==e&&t.classList.remove(e)},j=t=>t.llTempImage,Z=(t,e)=>{if(!e)return;const i=e._observer;i&&i.unobserve(t)},Y=(t,e)=>{t&&(t.loadingCount+=e)},X=(t,e)=>{t&&(t.toLoadCount=e)},W=t=>{let e=[];for(let i,s=0;i=t.children[s];s+=1)"SOURCE"===i.tagName&&e.push(i);return e},V=(t,e)=>{const i=t.parentNode;i&&"PICTURE"===i.tagName&&W(i).forEach(e)},J=(t,e)=>{W(t).forEach(e)},U=[w],K=[w,x],Q=[w,S,C],tt=[E],et=t=>!!t[I],it=t=>t[I],st=t=>delete t[I],ot=(t,e)=>{if(et(t))return;const i={};e.forEach(e=>{i[e]=t.getAttribute(e)}),t[I]=i},rt=(t,e)=>{if(!et(t))return;const i=it(t);e.forEach(e=>{((t,e,i)=>{i?t.setAttribute(e,i):t.removeAttribute(e)})(t,e,i[e])})},nt=(t,e,i)=>{q(t,e.class_applied),B(t,_),i&&(e.unobserve_completed&&Z(t,e),$(e.callback_applied,t,i))},at=(t,e,i)=>{q(t,e.class_loading),B(t,T),i&&(Y(i,1),$(e.callback_loading,t,i))},lt=(t,e,i)=>{i&&t.setAttribute(e,i)},ct=(t,e)=>{lt(t,C,M(t,e.data_sizes)),lt(t,S,M(t,e.data_srcset)),lt(t,w,M(t,e.data_src))},dt={IMG:(t,e)=>{V(t,t=>{ot(t,Q),ct(t,e)}),ot(t,Q),ct(t,e)},IFRAME:(t,e)=>{ot(t,U),lt(t,w,M(t,e.data_src))},VIDEO:(t,e)=>{J(t,t=>{ot(t,U),lt(t,w,M(t,e.data_src))}),ot(t,K),lt(t,x,M(t,e.data_poster)),lt(t,w,M(t,e.data_src)),t.load()},OBJECT:(t,e)=>{ot(t,tt),lt(t,E,M(t,e.data_src))}},ht=["IMG","IFRAME","VIDEO","OBJECT"],ut=(t,e)=>{!e||(t=>t.loadingCount>0)(e)||(t=>t.toLoadCount>0)(e)||$(t.callback_finish,e)},gt=(t,e,i)=>{t.addEventListener(e,i),t.llEvLisnrs[e]=i},mt=(t,e,i)=>{t.removeEventListener(e,i)},pt=t=>!!t.llEvLisnrs,ft=t=>{if(!pt(t))return;const e=t.llEvLisnrs;for(let i in e){const s=e[i];mt(t,i,s)}delete t.llEvLisnrs},yt=(t,e,i)=>{(t=>{delete t.llTempImage})(t),Y(i,-1),(t=>{t&&(t.toLoadCount-=1)})(i),R(t,e.class_loading),e.unobserve_completed&&Z(t,i)},vt=(t,e,i)=>{const s=j(t)||t;pt(s)||((t,e,i)=>{pt(t)||(t.llEvLisnrs={});const s="VIDEO"===t.tagName?"loadeddata":"load";gt(t,s,e),gt(t,"error",i)})(s,o=>{((t,e,i,s)=>{const o=F(e);yt(e,i,s),q(e,i.class_loaded),B(e,A),$(i.callback_loaded,e,s),o||ut(i,s)})(0,t,e,i),ft(s)},o=>{((t,e,i,s)=>{const o=F(e);yt(e,i,s),q(e,i.class_error),B(e,k),$(i.callback_error,e,s),i.restore_on_error&&rt(e,Q),o||ut(i,s)})(0,t,e,i),ft(s)})},bt=(t,e,i)=>{(t=>ht.indexOf(t.tagName)>-1)(t)?((t,e,i)=>{vt(t,e,i),((t,e,i)=>{const s=dt[t.tagName];s&&(s(t,e),at(t,e,i))})(t,e,i)})(t,e,i):((t,e,i)=>{(t=>{t.llTempImage=document.createElement("IMG")})(t),vt(t,e,i),(t=>{et(t)||(t[I]={backgroundImage:t.style.backgroundImage})})(t),((t,e,i)=>{const s=M(t,e.data_bg),o=M(t,e.data_bg_hidpi),r=f&&o?o:s;r&&(t.style.backgroundImage=`url("${r}")`,j(t).setAttribute(w,r),at(t,e,i))})(t,e,i),((t,e,i)=>{const s=M(t,e.data_bg_multi),o=M(t,e.data_bg_multi_hidpi),r=f&&o?o:s;r&&(t.style.backgroundImage=r,nt(t,e,i))})(t,e,i),((t,e,i)=>{const s=M(t,e.data_bg_set);if(!s)return;const o=s.split("|");let r=o.map(t=>`image-set(${t})`);t.style.backgroundImage=r.join(),""===t.style.backgroundImage&&(r=o.map(t=>`-webkit-image-set(${t})`),t.style.backgroundImage=r.join()),nt(t,e,i)})(t,e,i)})(t,e,i)},wt=t=>{t.removeAttribute(w),t.removeAttribute(S),t.removeAttribute(C)},St=t=>{V(t,t=>{rt(t,Q)}),rt(t,Q)},Ct={IMG:St,IFRAME:t=>{rt(t,U)},VIDEO:t=>{J(t,t=>{rt(t,U)}),rt(t,K),t.load()},OBJECT:t=>{rt(t,tt)}},xt=["IMG","IFRAME","VIDEO"],It=t=>t.use_native&&"loading"in HTMLImageElement.prototype,Et=t=>Array.prototype.slice.call(t),Tt=t=>t.container.querySelectorAll(t.elements_selector),Lt=t=>(t=>P(t)===k)(t),At=(t,e)=>(t=>Et(t).filter(G))(t||Tt(e)),_t=function(t,e){const i=v(t);this._settings=i,this.loadingCount=0,((t,e)=>{It(t)||(e._observer=new IntersectionObserver(i=>{((t,e,i)=>{t.forEach(t=>(t=>t.isIntersecting||t.intersectionRatio>0)(t)?((t,e,i,s)=>{const o=(t=>H.indexOf(P(t))>=0)(t);B(t,"entered"),q(t,i.class_entered),R(t,i.class_exited),((t,e,i)=>{e.unobserve_entered&&Z(t,i)})(t,i,s),$(i.callback_enter,t,e,s),o||bt(t,i,s)})(t.target,t,e,i):((t,e,i,s)=>{G(t)||(q(t,i.class_exited),((t,e,i,s)=>{i.cancel_on_exit&&(t=>P(t)===T)(t)&&"IMG"===t.tagName&&(ft(t),(t=>{V(t,t=>{wt(t)}),wt(t)})(t),St(t),R(t,i.class_loading),Y(s,-1),N(t),$(i.callback_cancel,t,e,s))})(t,e,i,s),$(i.callback_exit,t,e,s))})(t.target,t,e,i))})(i,t,e)},(t=>({root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}))(t)))})(i,this),((t,e)=>{m&&(e._onlineHandler=()=>{((t,e)=>{(t=>Et(t).filter(Lt))(Tt(t)).forEach(e=>{R(e,t.class_error),N(e)}),e.update()})(t,e)},window.addEventListener("online",e._onlineHandler))})(i,this),this.update(e)};_t.prototype={update:function(t){const e=this._settings,i=At(t,e);X(this,i.length),p?this.loadAll(i):It(e)?((t,e,i)=>{t.forEach(t=>{-1!==xt.indexOf(t.tagName)&&((t,e,i)=>{t.setAttribute("loading","lazy"),vt(t,e,i),((t,e)=>{const i=dt[t.tagName];i&&i(t,e)})(t,e),B(t,z)})(t,e,i)}),X(i,0)})(i,e,this):((t,e)=>{(t=>{t.disconnect()})(t),((t,e)=>{e.forEach(e=>{t.observe(e)})})(t,e)})(this._observer,i)},destroy:function(){this._observer&&this._observer.disconnect(),(t=>{m&&window.removeEventListener("online",t._onlineHandler)})(this),Tt(this._settings).forEach(t=>{st(t)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){const e=this._settings;At(t,e).forEach(t=>{Z(t,this),bt(t,e,this)})},restoreAll:function(){const t=this._settings;Tt(t).forEach(e=>{((t,e)=>{(t=>{const e=Ct[t.tagName];e?e(t):(t=>{if(!et(t))return;const e=it(t);t.style.backgroundImage=e.backgroundImage})(t)})(t),((t,e)=>{G(t)||F(t)||(R(t,e.class_entered),R(t,e.class_exited),R(t,e.class_applied),R(t,e.class_loading),R(t,e.class_loaded),R(t,e.class_error))})(t,e),N(t),st(t)})(e,t)})}},_t.load=(t,e)=>{const i=v(e);bt(t,i)},_t.resetStatus=t=>{N(t)},m&&((t,e)=>{if(e)if(e.length)for(let i,s=0;i=e[s];s+=1)b(t,i);else b(t,e)})(_t,window.lazyLoadOptions);var kt=i(360),zt=i.n(kt),Ot=i(569),Dt=i.n(Ot);class Mt{constructor(t){this.trigger=t.querySelector("[data-light-gallery-trigger]"),this.gallery=zt()(this.trigger,{dynamic:!0,plugins:[Dt()],backdropDuration:200,dynamicEl:[]})}refresh(t){const e=t.map(t=>JSON.parse(t.element.getAttribute("data-light-gallery-element")));this.gallery.refresh(e)}bindEvents(){this.trigger?.addEventListener("click",()=>this.gallery.openGallery())}}class Pt{constructor(t){this.wrapper=t,this.resetBtn=t.querySelector("[data-dataTable-reset]"),this.filterManager=new s(t,new a),this.allImages=Array.from(this.wrapper.querySelectorAll("[data-image]")).map(t=>({element:t,filterables:JSON.parse(t.getAttribute("data-filterables")),active:!0})),this.lightGallery=new Mt(this.wrapper)}async render(){const t=()=>{const t=this.filterManager.getActiveFilters();this.filterManager.updateDropdownState(t);const e=this.filterManager.applyFiltersToRows(this.allImages);for(const{element:t,active:i}of e)t.classList.toggle("hidden",!i);this.resetBtn.classList.toggle("hidden",!(Object.keys(t).length>0));const i=e.filter(t=>t.active),s=this.wrapper.querySelector("[data-dataTable-result-count]");s&&(s.innerText=i.length),this.lightGallery.refresh(i)};t(),this.wrapper.querySelectorAll("[data-dataTable-filter]").forEach(e=>e.addEventListener("input",t)),this.lightGallery.bindEvents(),this.resetBtn&&this.resetBtn.addEventListener("click",e=>{e.preventDefault(),this.filterManager.resetAll(),t()}),this.wrapper.querySelectorAll("[data-datatable-filter-clear]").forEach(e=>{e.addEventListener("click",i=>{i.preventDefault();const s=e.getAttribute("data-datatable-filter-clear");this.filterManager.resetOne(s),t()})})}}const Bt=document.querySelector("main"),Nt=new a,Gt=new class{constructor(t){this.app=t,this.appContent=t.querySelector("#js-loaded-content"),this.spinner=t.querySelector("#spinner"),this.menu=document.querySelector("aside"),this.menuItems=document.querySelectorAll("nav a[data-router-navigate]:not([data-router-disabled]), aside li a[data-router-navigate]:not([data-router-disabled])"),this.mobileNavTriggerEl=document.querySelector('[data-drawer-target="drawer-navigation"]'),this.defaultRoute="/dashboard"}showLoader(){this.spinner.classList.remove("hidden"),this.spinner.classList.add("flex"),this.appContent.classList.add("hidden")}hideLoader(){this.spinner.classList.remove("flex"),this.spinner.classList.add("hidden"),this.appContent.classList.remove("hidden")}determineActiveMenuLink(t){const e=document.querySelector(`aside li a[data-router-navigate="${t}"]`);if(e)return e;const i=t.replace(/\/[^\/]*$/,"");return i===t||""===i?null:this.determineActiveMenuLink(i)}async renderContent(t,e){this.menu.hasAttribute("aria-hidden")||this.mobileNavTriggerEl.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),this.showLoader();const i=await fetch(`${t}.html`,{cache:"no-store"});this.appContent.innerHTML=await i.text(),window.scrollTo(0,0),this.hideLoader(),this.app.setAttribute("data-router-current",t),this.app.setAttribute("data-modal-current",e),this.menuItems.forEach(t=>t.setAttribute("aria-selected","false"));const s=this.determineActiveMenuLink(t);s?.setAttribute("aria-selected","true"),s?.hasAttribute("data-router-sub-menu")&&s.closest("ul")?.classList.remove("hidden");const o=document.querySelectorAll("main a[data-router-navigate]:not([data-router-disabled])");this.registerNavItems(o);const r=t.replace(/^\/+/,"").replaceAll("/","-");document.dispatchEvent(new CustomEvent("pageWasLoaded",{bubbles:!0,detail:{page:r,modalId:e}})),document.dispatchEvent(new CustomEvent(`pageWasLoaded.${r}`,{bubbles:!0,detail:{page:r,modalId:e}}))}registerNavItems(t){t.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const i=t.getAttribute("data-router-navigate");document.dispatchEvent(new CustomEvent("navigationLinkHasBeenClicked",{bubbles:!0,detail:{link:t}})),this.navigateTo(i,null,t.hasAttribute("data-router-force-reload"))})})}registerBrowserBackAndForth(){window.onpopstate=t=>{t.state&&this.renderContent(t.state.route,t.state.modal)}}navigateTo(t,e,i=!1){(this.app.getAttribute("data-router-current")!==t||i)&&(this.renderContent(t,e),this.pushRouteToHistoryState(t,e))}pushRouteToHistoryState(t,e){const i=e?`${t}#${e}`:t;window.history.pushState({route:t,modal:e},"",i)}pushCurrentRouteToHistoryState(t){this.pushRouteToHistoryState(this.currentRoute(),t)}currentRoute(){return location.pathname.replace("/","")?location.pathname:this.defaultRoute}boot(){if(null===this.appContent)return;const t=this.currentRoute(),e=location.hash.replace("#","");this.registerNavItems(this.menuItems),this.registerBrowserBackAndForth(),this.renderContent(t,e),window.history.replaceState({route:t,modal:e},"",t+location.hash)}}(Bt);Gt.boot();const Ft=new class{constructor(t){this.$main=t,this.$sideNav=document.querySelector("aside"),this.$topNav=document.querySelector("nav")}init(){const t="true"===localStorage.getItem("sideNavCollapsed");[this.$main,this.$sideNav,this.$topNav].forEach(e=>e.classList.toggle("sidebar-is-collapsed",t)),document.getElementById("toggle-sidebar-collapsed-state").addEventListener("click",()=>{const t=this.$main.classList.toggle("sidebar-is-collapsed");[this.$sideNav,this.$topNav].forEach(e=>e.classList.toggle("sidebar-is-collapsed",t)),localStorage.setItem("sideNavCollapsed",String(t)),document.dispatchEvent(new Event("sidebarWasResized"))})}}(Bt),Ht=new class{constructor(t){this.router=t,this.initElements=null,this.modalSkeletonNode=document.getElementById("modal-skeleton"),this.modalContent=this.modalSkeletonNode.querySelector("#modal-content"),this.modalSpinner=this.modalSkeletonNode.querySelector(".spinner"),this.modal=null}setInitElements(t){this.initElements=t}init(t){t.querySelectorAll("a[data-model-content-url]").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const i=t.getAttribute("data-model-content-url");this.open(i),this.router.pushCurrentRouteToHistoryState(i)})})}open(t){this.close(),this.modalSpinner.classList.remove("hidden"),this.modalSpinner.classList.add("flex"),this.modal=new Modal(this.modalSkeletonNode,{placement:"bottom",closable:!0,backdropClasses:"bg-gray-900/50 fixed inset-0 z-1400",onShow:async()=>{const e=await fetch(t,{cache:"no-store"});this.modalSpinner.classList.add("hidden"),this.modalSpinner.classList.remove("flex"),this.modalContent.innerHTML=await e.text(),this.initElements(this.modalSkeletonNode),this.modalContent.querySelector("button.close")&&this.modalContent.querySelector("button.close").addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.modal.hide(),this.router.pushCurrentRouteToHistoryState()}),document.body.addEventListener("keydown",t=>{"Escape"===t.key&&this.router.pushCurrentRouteToHistoryState()},{once:!0}),document.body.addEventListener("click",t=>{"modal-skeleton"===t.target.id&&this.router.pushCurrentRouteToHistoryState()},{once:!0});const i=this.modalSkeletonNode.querySelectorAll("a[data-router-navigate]:not([data-router-disabled])");this.router.registerNavItems(i);const s=t.replace(/^\/+/,"").replaceAll("/","-");document.dispatchEvent(new CustomEvent("modalWasLoaded."+s,{bubbles:!0,cancelable:!1,detail:{modal:this.modalSkeletonNode}}))},onHide:()=>{this.modalContent.innerHTML=""}}),this.modal.show()}close(){this.modal&&this.modal.hide()}}(Gt),$t=new class{constructor(t,e,i){this.router=t,this.dataTableStorage=e,this.modalManager=i,this.allCharts=[],this.chartsPerTab=[],echarts.registerTheme("v5",(()=>{const t=["#f6efa6","#d88273","#bf444c"];return{color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:t,loading:{textColor:"red"},bar:{defaultBarGap:"20%",select:{itemStyle:{borderColor:"#212121",borderWidth:1}}},boxplot:{emphasis:{itemStyle:{shadowColor:"rgba(0,0,0,0.2)"}}},graph:{lineStyle:{color:"#aaa"},select:{itemStyle:{borderColor:"#212121"}}},heatmap:{select:{itemStyle:{borderColor:"#212121"}}},line:{symbolSize:4},pictorialBar:{select:{itemStyle:{borderColor:"#212121",borderWidth:1}}},pie:{radius:[0,"75%"],labelLine:{length2:15}},map:{defaultItemStyleColor:"#eee",label:{color:"#000"},itemStyle:{borderColor:"#444",areaColor:"#eee"},emphasis:{label:{color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}}},timeAxis:{axisLine:{lineStyle:{color:"#6E7079"}},axisLabel:{color:null},splitLine:{lineStyle:{color:["#E0E6F1"]}},splitArea:{areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},minorSplitLine:{color:"#F4F7FD"}},logAxis:{axisLine:{lineStyle:{color:"#6E7079"}},axisLabel:{color:null},splitLine:{lineStyle:{color:["#E0E6F1"]}},splitArea:{areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},minorSplitLine:{color:"#F4F7FD"}},valueAxis:{axisLine:{lineStyle:{color:"#6E7079"}},axisLabel:{color:null},splitLine:{lineStyle:{color:["#E0E6F1"]}},splitArea:{areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},minorSplitLine:{color:"#F4F7FD"}},categoryAxis:{axisLine:{lineStyle:{color:"#6E7079"}},axisLabel:{color:null},splitLine:{lineStyle:{color:["#E0E6F1"]}},splitArea:{areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},minorSplitLine:{color:"#F4F7FD"},axisTick:{show:!0}},axisPointer:{lineStyle:{color:"#B9BEC9"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{backgroundColor:"auto",color:"#fff"},handle:{color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2}},brush:{brushStyle:{color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},defaultOutOfBrushColor:"#ddd"},calendar:{splitLine:{lineStyle:{color:"#000"}},itemStyle:{borderColor:"#ccc"},dayLabel:{margin:"50%",color:"#000"},monthLabel:{margin:5,color:"#000"},yearLabel:{margin:30,color:"#ccc"}},dataZoom:{borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleStyle:{color:"#D2DBEE",opacity:.7},textStyle:{color:"#6E7079"},brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7",opacity:.7}},defaultLocationEdgeGap:7},geo:{defaultItemStyleColor:"#eee",label:{color:"#000"},itemStyle:{borderColor:"#444"},emphasis:{label:{color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}}},grid:{left:"10%",top:60,bottom:70,borderColor:"#ccc"},legend:{top:0,bottom:null,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",itemGap:10,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",lineStyle:{inactiveColor:"#ccc"},textStyle:{color:"#333"},selectorLabel:{color:"#666",borderColor:"#666"},emphasis:{selectorLabel:{color:"#eee",backgroundColor:"#666"}},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageTextStyle:{color:"#333"}},title:{left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",textStyle:{color:"#464646"},subtextStyle:{color:"#6E7079"}},toolbox:{borderColor:"#ccc",padding:5,itemGap:8,iconStyle:{borderColor:"#666"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}},tooltip:{axisPointer:{crossStyle:{color:"#999"}},textStyle:{color:"#666"},backgroundColor:"#fff",borderWidth:1,defaultBorderColor:"#fff"},visualMap:{color:[t[2],t[1],t[0]],inactive:["rgba(0,0,0,0)"],indicatorStyle:{shadowColor:"rgba(0,0,0,0.2)"},backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",padding:5,textStyle:{color:"#333"}}}})())}init(t){const e=this.getClickHandlers(),i=[];t.querySelectorAll("[data-echarts-options]").forEach(t=>{const s=echarts.init(t,"v5"),o=JSON.parse(t.getAttribute("data-echarts-options"));["tooltip.formatter","tooltip.valueFormatter","yAxis.axisLabel.formatter","yAxis[].axisLabel.formatter","series.symbolSize"].forEach(t=>((t,e)=>{const i=e.split("."),s=(t,e)=>{if(!t||0===e.length)return;const i=e[0],o=e.slice(1),r=i.endsWith("[]"),n=r?i.slice(0,-2):i;if(r){const e=t?.[n];Array.isArray(e)&&e.forEach(t=>s(t,o))}else 0===o.length?t?.[n]&&t[n]in window.statisticsForStrava.callbacks&&(t[n]=window.statisticsForStrava.callbacks[t[n]]):s(t?.[n],o)};s(t,i)})(o,t)),s.setOption(o);const r=t.getAttribute("data-echarts-click");r&&e[r]&&s.on("click",function(i){const s=JSON.parse(t.getAttribute("data-echarts-click-data")||"{}");e[r](i,s)}),t.hasAttribute("data-echarts-connect")&&i.push(s),this.allCharts.push(s);const n=((t,e)=>{const i=[];let s=t.parentElement;for(;s;)e&&!s.matches(e)||i.push(s),s=s.parentElement;return i})(t,'div[role="tabpanel"]');for(const t of n){const e=t.getAttribute("id");this.chartsPerTab[e]??=[],this.chartsPerTab[e].push(s)}}),echarts.connect(i)}getClickHandlers(){return{handleMonthlyStatsClick:(t,e)=>{if(!t||!t.dataIndex||!t.seriesName)return;const i=(t.dataIndex+1).toString().padStart(2,"0"),s=`month/month-${t.seriesName}-${i}.html`;this.modalManager.open(s),this.router.pushCurrentRouteToHistoryState(s)},handleWeeklyStatsClick:(t,e)=>{if(!t||!t.dataIndex)return;const i=e.weeks;!t.dataIndex in i||(this.dataTableStorage.set({activities:{sportType:e.sportTypes,"start-date":{from:i[t.dataIndex].from,to:i[t.dataIndex].to}}}),this.router.navigateTo("/activities"))},handleActivityGridChartClick:(t,e)=>{!t||!t.value||t.value<1||(this.dataTableStorage.set({activities:{"start-date":{from:t.value[0],to:t.value[0]}}}),this.router.navigateTo("/activities"))}}}reset(){this.allCharts=[],this.chartsPerTab=[]}resizeAll(){this.allCharts.filter(t=>t.getDom().offsetParent).forEach(t=>t.resize())}resizeInTab(t){t in this.chartsPerTab&&this.chartsPerTab[t].filter(t=>t.getDom().offsetParent).forEach(t=>t.resize())}}(Gt,Nt,Ht),qt=new class{init(t){t.querySelectorAll("[data-leaflet]").forEach(function(t){const e=JSON.parse(t.getAttribute("data-leaflet")),i=L.map(t,{scrollWheelZoom:e.scrollWheelZoom||!1,minZoom:e.minZoom,maxZoom:e.maxZoom});e.tileLayer&&L.tileLayer(e.tileLayer).addTo(i);const s=L.featureGroup();if(e.routes.forEach(t=>{L.polyline(L.Polyline.fromEncoded(t).getLatLngs(),{color:"#fc6719",weight:2,opacity:.9,lineJoin:"round"}).addTo(s)}),e.imageOverlay&&(L.imageOverlay(e.imageOverlay,e.bounds,{attribution:' <a href="https://zwift.com" rel="noreferrer noopener">Zwift</a>'}).addTo(i),i.setMaxBounds(e.bounds)),s.addTo(i),i.fitBounds(s.getBounds(),{maxZoom:e.maxZoom}),!t.hasAttribute("data-leaflet-echart-connect"))return;const o=document.querySelector("div[data-echarts-options][data-leaflet-echart-connect]");if(!o)return;const r=JSON.parse(o.getAttribute("data-leaflet-echart-connect"));if(!r)return;const n=L.circleMarker([0,0],{radius:6,color:"#303030",fillColor:"#F26722",fillOpacity:0,opacity:0}).addTo(i),a=echarts.getInstanceByDom(o),l=i.getZoom();a.on("updateAxisPointer",function(t){if(t.dataIndex&&t.dataIndex in r){const e=r[t.dataIndex];n.setLatLng(e),n.setStyle({opacity:1,fillOpacity:1}),i.getZoom()>l?i.panTo(e):i.getBounds().contains(e)||i.panTo(e)}else n.setStyle({opacity:0,fillOpacity:0})})})}},Rt=new class{constructor(t){this.chartManager=t}init(t){t.querySelectorAll("[data-tabs]").forEach(t=>{const e=[];let i=null;t.querySelectorAll('[role="tab"]').forEach(function(t){const s=t.getAttribute("data-tabs-target");e.push({id:s,triggerEl:t,targetEl:document.querySelector(s)}),t.hasAttribute("data-tab-default")&&(i=s)}),new Tabs(t,e,{defaultTabId:i,activeClasses:t.getAttribute("data-tabs-active-classes")||"text-strava-orange border-strava-orange hover:text-gray-600 hover:border-gray-300",inactiveClasses:t.getAttribute("data-tabs-inactive-classes")||"text-gray-500 hover:text-gray-600 border-gray-100 hover:border-gray-300",onShow:(t,e)=>{const i=e.id.replace("#","");this.chartManager.resizeInTab(i)}})})}}($t),jt=new class{constructor(t){this.storage=t}init(){document.querySelectorAll("div[data-dataTable-settings]").forEach(t=>{const e=t.querySelector("table"),i=e?.querySelector("tbody"),o=t.querySelector(".scroll-area"),a=t.querySelector('input[type="search"]'),l=t.querySelector("[data-dataTable-reset]"),c=JSON.parse(t.getAttribute("data-dataTable-settings")),d=new s(t,this.storage),h=new n(t,i,o),u=new r(t.querySelectorAll("thead th[data-dataTable-sort]"));e&&i&&a&&(t.querySelectorAll('input[type="date"][data-default-to-today]').forEach(t=>t.valueAsDate=new Date),fetch(c.url,{cache:"no-store"}).then(async e=>{const i=await e.json();h.init(i);const s=()=>{const t=a.value.trim(),e=d.getActiveFilters();d.updateDropdownState(e);const s=d.applyFiltersToRows(i,t);h.update(s),l.classList.toggle("hidden",!(Object.keys(e).length>0||t.length>0))};d.prefillFromStorage(c.name),s(),a.addEventListener("input",((t,e=300)=>{let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>{t.apply(void 0,s)},e)}})(s)),t.querySelectorAll("[data-dataTable-filter]").forEach(t=>t.addEventListener("input",s)),u.attachListeners(i,h.cluster,o),l&&l.addEventListener("click",t=>{t.preventDefault(),a.value="",d.resetAll(),s()}),t.querySelectorAll("[data-datatable-filter-clear]").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const i=t.getAttribute("data-datatable-filter-clear");d.resetOne(i),s()})})}))})}}(Nt),Zt=new _t({thresholds:"50px",callback_error:t=>{t.setAttribute("src",window.statisticsForStrava.placeholderBrokenImage)}}),Yt=t=>{Zt.update(),Rt.init(t),initPopovers(),initTooltips(),initDropdowns(),initAccordions(),Ht.init(t),$t.init(t),qt.init(t)};Ht.setInitElements(Yt),Ft.init(),document.addEventListener("pageWasLoaded",t=>{Ht.close(),jt.init(),$t.reset(),Yt(document),t.detail&&t.detail.modalId&&Ht.open(t.detail.modalId)}),document.addEventListener("pageWasLoaded.heatmap",()=>{const t=document.querySelector(".heatmap-wrapper");new c(t).render()}),document.addEventListener("pageWasLoaded.photos",()=>{const t=document.querySelector(".photo-wall-wrapper");new Pt(t).render()}),document.addEventListener("navigationLinkHasBeenClicked",t=>{t.detail&&t.detail.link&&t.detail.link.hasAttribute("data-dataTable-filters")&&Nt.set(JSON.parse(t.detail.link.getAttribute("data-dataTable-filters")))}),document.addEventListener("dataTableClusterWasChanged",()=>{Ht.init(document)}),window.addEventListener("resize",function(){$t.resizeAll()}),document.addEventListener("sidebarWasResized",function(){$t.resizeAll()});const Xt=document.querySelector("a[data-modal-custom-ai]");Xt&&Xt.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const e=Xt.getAttribute("data-modal-custom-ai");Ht.open(e),Gt.pushCurrentRouteToHistoryState(e)}),document.addEventListener("modalWasLoaded.ai-chat",t=>{const e=t.detail.modal;new u(e).render()}),(async()=>{await(async()=>{const t=document.querySelector("[data-latest-version]");if(!t)return;const e=t.dataset.currentVersion;if(!e)return;const i="latestReleaseCache",s=Date.now(),o=JSON.parse(localStorage.getItem(i)||"null");if(o&&s-o.timestamp<216e5)((t,e)=>{t=t.replace(/^v/,""),e=e.replace(/^v/,"");const i=t.split(".").map(Number),s=e.split(".").map(Number);for(let t=0;t<Math.max(i.length,s.length);t++){const e=i[t]||0,o=s[t]||0;if(e>o)return 1;if(e<o)return-1}return 0})(e,o.latestVersion)<0&&g(o.latestVersion);else try{const t=await fetch("https://api.github.com/repos/robiningelbrecht/statistics-for-strava/releases/latest",{headers:{Accept:"application/vnd.github+json"}});if(!t.ok)throw new Error("Failed to fetch latest release");const o=(await t.json()).name;if(e===o)return void localStorage.setItem(i,JSON.stringify({latestVersion:o,timestamp:s}));const r=await fetch(`https://api.github.com/repos/robiningelbrecht/statistics-for-strava/actions/runs?event=push&status=completed&conclusion=success&exclude_pull_requests=true&branch=${o}`,{headers:{Accept:"application/vnd.github+json"}});if(!r.ok)throw new Error("Failed to fetch workflow runs");const{workflow_runs:n=[]}=await r.json();if(!n.find(t=>".github/workflows/docker-image.yml"===t.path))return;g(o),localStorage.setItem(i,JSON.stringify({latestVersion:o,timestamp:s}))}catch(t){console.error("Error checking latest release:",t)}})()})()})()})();
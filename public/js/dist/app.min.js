/*! For license information please see app.min.js.LICENSE.txt */
(()=>{var e={360(e){e.exports=function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},e.apply(this,arguments)},t="lgUpdateSlides",i="lgPosterClick",s="lgBeforeNextSlide",r="lgBeforePrevSlide",n={mode:"lg-slide",easing:"ease",speed:400,licenseKey:"0000-0000-000-0000",height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:300,container:"",startAnimationDuration:400,zoomFromOrigin:!0,hideBarsDelay:0,showBarsAfter:1e4,slideDelay:0,supportLegacyBrowser:!0,allowMediaOverlap:!1,videoMaxSize:"1280-720",loadYouTubePoster:!0,defaultCaptionHeight:0,ariaLabelledby:"",ariaDescribedby:"",resetScrollPosition:!0,hideScrollbar:!1,closable:!0,swipeToClose:!0,closeOnTap:!0,showCloseIcon:!0,showMaximizeIcon:!1,loop:!0,escKey:!0,keyPress:!0,trapFocus:!0,controls:!0,slideEndAnimation:!0,hideControlOnEnd:!1,mousewheel:!1,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:2,numberOfSlideItemsInDom:10,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:0,iframeWidth:"100%",iframeHeight:"100%",iframeMaxWidth:"100%",iframeMaxHeight:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],extraProps:[],exThumbImage:"",isMobile:void 0,mobileSettings:{controls:!1,showCloseIcon:!1,download:!1},plugins:[],strings:{closeGallery:"Close gallery",toggleMaximize:"Toggle maximize",previousSlide:"Previous slide",nextSlide:"Next slide",download:"Download",playVideo:"Play video",mediaLoadingFailed:"Oops... Failed to load content..."}},o=function(){function e(e){return this.cssVenderPrefixes=["TransitionDuration","TransitionTimingFunction","Transform","Transition"],this.selector=this._getSelector(e),this.firstElement=this._getFirstEl(),this}return e.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},e.prototype._getSelector=function(e,t){return void 0===t&&(t=document),"string"!=typeof e?e:(t=t||document,"#"===e.substring(0,1)?t.querySelector(e):t.querySelectorAll(e))},e.prototype._each=function(e){return this.selector?(void 0!==this.selector.length?[].forEach.call(this.selector,e):e(this.selector,0),this):this},e.prototype._setCssVendorPrefix=function(e,t,i){var s=t.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()});-1!==this.cssVenderPrefixes.indexOf(s)?(e.style[s.charAt(0).toLowerCase()+s.slice(1)]=i,e.style["webkit"+s]=i,e.style["moz"+s]=i,e.style["ms"+s]=i,e.style["o"+s]=i):e.style[s]=i},e.prototype._getFirstEl=function(){return this.selector&&void 0!==this.selector.length?this.selector[0]:this.selector},e.prototype.isEventMatched=function(e,t){var i=t.split(".");return e.split(".").filter(function(e){return e}).every(function(e){return-1!==i.indexOf(e)})},e.prototype.attr=function(e,t){return void 0===t?this.firstElement?this.firstElement.getAttribute(e):"":(this._each(function(i){i.setAttribute(e,t)}),this)},e.prototype.find=function(e){return a(this._getSelector(e,this.selector))},e.prototype.first=function(){return this.selector&&void 0!==this.selector.length?a(this.selector[0]):a(this.selector)},e.prototype.eq=function(e){return a(this.selector[e])},e.prototype.parent=function(){return a(this.selector.parentElement)},e.prototype.get=function(){return this._getFirstEl()},e.prototype.removeAttr=function(e){var t=e.split(" ");return this._each(function(e){t.forEach(function(t){return e.removeAttribute(t)})}),this},e.prototype.wrap=function(e){if(!this.firstElement)return this;var t=document.createElement("div");return t.className=e,this.firstElement.parentNode.insertBefore(t,this.firstElement),this.firstElement.parentNode.removeChild(this.firstElement),t.appendChild(this.firstElement),this},e.prototype.addClass=function(e){return void 0===e&&(e=""),this._each(function(t){e.split(" ").forEach(function(e){e&&t.classList.add(e)})}),this},e.prototype.removeClass=function(e){return this._each(function(t){e.split(" ").forEach(function(e){e&&t.classList.remove(e)})}),this},e.prototype.hasClass=function(e){return!!this.firstElement&&this.firstElement.classList.contains(e)},e.prototype.hasAttribute=function(e){return!!this.firstElement&&this.firstElement.hasAttribute(e)},e.prototype.toggleClass=function(e){return this.firstElement?(this.hasClass(e)?this.removeClass(e):this.addClass(e),this):this},e.prototype.css=function(e,t){var i=this;return this._each(function(s){i._setCssVendorPrefix(s,e,t)}),this},e.prototype.on=function(t,i){var s=this;return this.selector?(t.split(" ").forEach(function(t){Array.isArray(e.eventListeners[t])||(e.eventListeners[t]=[]),e.eventListeners[t].push(i),s.selector.addEventListener(t.split(".")[0],i)}),this):this},e.prototype.once=function(e,t){var i=this;return this.on(e,function(){i.off(e),t(e)}),this},e.prototype.off=function(t){var i=this;return this.selector?(Object.keys(e.eventListeners).forEach(function(s){i.isEventMatched(t,s)&&(e.eventListeners[s].forEach(function(e){i.selector.removeEventListener(s.split(".")[0],e)}),e.eventListeners[s]=[])}),this):this},e.prototype.trigger=function(e,t){if(!this.firstElement)return this;var i=new CustomEvent(e.split(".")[0],{detail:t||null});return this.firstElement.dispatchEvent(i),this},e.prototype.load=function(e){var t=this;return fetch(e).then(function(e){return e.text()}).then(function(e){t.selector.innerHTML=e}),this},e.prototype.html=function(e){return void 0===e?this.firstElement?this.firstElement.innerHTML:"":(this._each(function(t){t.innerHTML=e}),this)},e.prototype.append=function(e){return this._each(function(t){"string"==typeof e?t.insertAdjacentHTML("beforeend",e):t.appendChild(e)}),this},e.prototype.prepend=function(e){return this._each(function(t){"string"==typeof e?t.insertAdjacentHTML("afterbegin",e):e instanceof HTMLElement&&t.insertBefore(e.cloneNode(!0),t.firstChild)}),this},e.prototype.remove=function(){return this._each(function(e){e.parentNode.removeChild(e)}),this},e.prototype.empty=function(){return this._each(function(e){e.innerHTML=""}),this},e.prototype.scrollTop=function(e){return void 0!==e?(document.body.scrollTop=e,document.documentElement.scrollTop=e,this):window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},e.prototype.scrollLeft=function(e){return void 0!==e?(document.body.scrollLeft=e,document.documentElement.scrollLeft=e,this):window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},e.prototype.offset=function(){if(!this.firstElement)return{left:0,top:0};var e=this.firstElement.getBoundingClientRect(),t=a("body").style().marginLeft;return{left:e.left-parseFloat(t)+this.scrollLeft(),top:e.top+this.scrollTop()}},e.prototype.style=function(){return this.firstElement?this.firstElement.currentStyle||window.getComputedStyle(this.firstElement):{}},e.prototype.width=function(){var e=this.style();return this.firstElement.clientWidth-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)},e.prototype.height=function(){var e=this.style();return this.firstElement.clientHeight-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)},e.eventListeners={},e}();function a(e){return function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),new o(e)}var l=["src","sources","subHtml","subHtmlUrl","html","video","poster","slideName","responsive","srcset","sizes","iframe","downloadUrl","download","width","facebookShareUrl","tweetText","iframeTitle","twitterShareUrl","pinterestShareUrl","pinterestText","fbHtml","disqusIdentifier","disqusUrl"];function c(e){return"href"===e?"src":e=(e=(e=e.replace("data-","")).charAt(0).toLowerCase()+e.slice(1)).replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}var h=function(e,t,i){fetch(e).then(function(e){return e.text()}).then(function(e){if("append"===i){var s='<div class="lg-sub-html">'+e+"</div>";t.append(s)}else t.html(e)})},u=function(e,t,i,s){void 0===i&&(i=0);var r=a(e).attr("data-lg-size")||s;if(r){var n=r.split(",");if(n[1])for(var o=window.innerWidth,l=0;l<n.length;l++){var c=n[l];if(parseInt(c.split("-")[2],10)>o){r=c;break}l===n.length-1&&(r=c)}var h=r.split("-"),u=parseInt(h[0],10),d=parseInt(h[1],10),g=t.width(),p=t.height()-i,m=Math.min(g,u),f=Math.min(p,d),b=Math.min(m/u,f/d);return{width:u*b,height:d*b}}},d=function(e,t,i,s,r){if(r){var n=a(e).find("img").first();if(n.get()){var o=t.get().getBoundingClientRect(),l=o.width,c=t.height()-(i+s),h=n.width(),u=n.height(),d=n.style(),g=(l-h)/2-n.offset().left+(parseFloat(d.paddingLeft)||0)+(parseFloat(d.borderLeft)||0)+a(window).scrollLeft()+o.left,p=(c-u)/2-n.offset().top+(parseFloat(d.paddingTop)||0)+(parseFloat(d.borderTop)||0)+a(window).scrollTop()+i;return"translate3d("+(g*=-1)+"px, "+(p*=-1)+"px, 0) scale3d("+h/r.width+", "+u/r.height+", 1)"}}},g=function(e,t,i,s,r,n){var o="<img "+i+" "+(s?'srcset="'+s+'"':"")+"  "+(r?'sizes="'+r+'"':"")+' class="lg-object lg-image" data-index="'+e+'" src="'+t+'" />',a="";return n&&(a=("string"==typeof n?JSON.parse(n):n).map(function(e){var t="";return Object.keys(e).forEach(function(i){t+=" "+i+'="'+e[i]+'"'}),"<source "+t+"></source>"})),""+a+o},p=function(e,t,i,s){var r=[],n=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var s=Array(e),r=0;for(t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,r++)s[r]=n[o];return s}(l,t);return[].forEach.call(e,function(e){for(var t={},o=0;o<e.attributes.length;o++){var l=e.attributes[o];if(l.specified){var h=c(l.name),u="";n.indexOf(h)>-1&&(u=h),u&&(t[u]=l.value)}}var d=a(e),g=d.find("img").first().attr("alt"),p=d.attr("title"),m=s?d.attr(s):d.find("img").first().attr("src");t.thumb=m,i&&!t.subHtml&&(t.subHtml=p||g||""),t.alt=g||p||"",r.push(t)}),r},m=0,f=function(){function l(e,t){if(this.lgOpened=!1,this.index=0,this.plugins=[],this.lGalleryOn=!1,this.lgBusy=!1,this.currentItemsInDom=[],this.prevScrollTop=0,this.bodyPaddingRight=0,this.isDummyImageRemoved=!1,this.dragOrSwipeEnabled=!1,this.mediaContainerPosition={top:0,bottom:0},!e)return this;if(m++,this.lgId=m,this.el=e,this.LGel=a(e),this.generateSettings(t),this.buildModules(),this.settings.dynamic&&void 0!==this.settings.dynamicEl&&!Array.isArray(this.settings.dynamicEl))throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.galleryItems=this.getItems(),this.normalizeSettings(),this.init(),this.validateLicense(),this}return l.prototype.generateSettings=function(t){if(this.settings=e(e({},n),t),this.settings.isMobile&&"function"==typeof this.settings.isMobile?this.settings.isMobile():/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){var i=e(e({},this.settings.mobileSettings),this.settings.mobileSettings);this.settings=e(e({},this.settings),i)}},l.prototype.normalizeSettings=function(){if(this.settings.slideEndAnimation&&(this.settings.hideControlOnEnd=!1),this.settings.closable||(this.settings.swipeToClose=!1),this.zoomFromOrigin=this.settings.zoomFromOrigin,this.settings.dynamic&&(this.zoomFromOrigin=!1),this.settings.container){var e=this.settings.container;if("function"==typeof e)this.settings.container=e();else if("string"==typeof e){var t=document.querySelector(e);this.settings.container=null!=t?t:document.body}}else this.settings.container=document.body;this.settings.preload=Math.min(this.settings.preload,this.galleryItems.length)},l.prototype.init=function(){var e=this;this.addSlideVideoInfo(this.galleryItems),this.buildStructure(),this.LGel.trigger("lgInit",{instance:this}),this.settings.keyPress&&this.keyPress(),setTimeout(function(){e.enableDrag(),e.enableSwipe(),e.triggerPosterClick()},50),this.arrow(),this.settings.mousewheel&&this.mousewheel(),this.settings.dynamic||this.openGalleryOnItemClick()},l.prototype.openGalleryOnItemClick=function(){for(var e=this,t=function(t){var s=i.items[t],r=a(s),n=o.generateUUID();r.attr("data-lg-id",n).on("click.lgcustom-item-"+n,function(i){i.preventDefault();var r=e.settings.index||t;e.openGallery(r,s)})},i=this,s=0;s<this.items.length;s++)t(s)},l.prototype.buildModules=function(){var e=this;this.settings.plugins.forEach(function(t){e.plugins.push(new t(e,a))})},l.prototype.validateLicense=function(){this.settings.licenseKey?"0000-0000-000-0000"===this.settings.licenseKey&&console.warn("lightGallery: "+this.settings.licenseKey+" license key is not valid for production use"):console.error("Please provide a valid license key")},l.prototype.getSlideItem=function(e){return a(this.getSlideItemId(e))},l.prototype.getSlideItemId=function(e){return"#lg-item-"+this.lgId+"-"+e},l.prototype.getIdName=function(e){return e+"-"+this.lgId},l.prototype.getElementById=function(e){return a("#"+this.getIdName(e))},l.prototype.manageSingleSlideClassName=function(){this.galleryItems.length<2?this.outer.addClass("lg-single-item"):this.outer.removeClass("lg-single-item")},l.prototype.buildStructure=function(){var e=this;if(!this.$container||!this.$container.get()){var t="",i="";this.settings.controls&&(t='<button type="button" id="'+this.getIdName("lg-prev")+'" aria-label="'+this.settings.strings.previousSlide+'" class="lg-prev lg-icon"> '+this.settings.prevHtml+' </button>\n                <button type="button" id="'+this.getIdName("lg-next")+'" aria-label="'+this.settings.strings.nextSlide+'" class="lg-next lg-icon"> '+this.settings.nextHtml+" </button>"),".lg-item"!==this.settings.appendSubHtmlTo&&(i='<div class="lg-sub-html" role="status" aria-live="polite"></div>');var s="";this.settings.allowMediaOverlap&&(s+="lg-media-overlap ");var r=this.settings.ariaLabelledby?'aria-labelledby="'+this.settings.ariaLabelledby+'"':"",n=this.settings.ariaDescribedby?'aria-describedby="'+this.settings.ariaDescribedby+'"':"",o="lg-container "+this.settings.addClass+" "+(document.body!==this.settings.container?"lg-inline":""),l=this.settings.closable&&this.settings.showCloseIcon?'<button type="button" aria-label="'+this.settings.strings.closeGallery+'" id="'+this.getIdName("lg-close")+'" class="lg-close lg-icon"></button>':"",c=this.settings.showMaximizeIcon?'<button type="button" aria-label="'+this.settings.strings.toggleMaximize+'" id="'+this.getIdName("lg-maximize")+'" class="lg-maximize lg-icon"></button>':"",h='\n        <div class="'+o+'" id="'+this.getIdName("lg-container")+'" tabindex="-1" aria-modal="true" '+r+" "+n+' role="dialog"\n        >\n            <div id="'+this.getIdName("lg-backdrop")+'" class="lg-backdrop"></div>\n\n            <div id="'+this.getIdName("lg-outer")+'" class="lg-outer lg-use-css3 lg-css3 lg-hide-items '+s+' ">\n\n              <div id="'+this.getIdName("lg-content")+'" class="lg-content">\n                <div id="'+this.getIdName("lg-inner")+'" class="lg-inner">\n                </div>\n                '+t+'\n              </div>\n                <div id="'+this.getIdName("lg-toolbar")+'" class="lg-toolbar lg-group">\n                    '+c+"\n                    "+l+"\n                    </div>\n                    "+(".lg-outer"===this.settings.appendSubHtmlTo?i:"")+'\n                <div id="'+this.getIdName("lg-components")+'" class="lg-components">\n                    '+(".lg-sub-html"===this.settings.appendSubHtmlTo?i:"")+"\n                </div>\n            </div>\n        </div>\n        ";a(this.settings.container).append(h),document.body!==this.settings.container&&a(this.settings.container).css("position","relative"),this.outer=this.getElementById("lg-outer"),this.$lgComponents=this.getElementById("lg-components"),this.$backdrop=this.getElementById("lg-backdrop"),this.$container=this.getElementById("lg-container"),this.$inner=this.getElementById("lg-inner"),this.$content=this.getElementById("lg-content"),this.$toolbar=this.getElementById("lg-toolbar"),this.$backdrop.css("transition-duration",this.settings.backdropDuration+"ms");var u=this.settings.mode+" ";this.manageSingleSlideClassName(),this.settings.enableDrag&&(u+="lg-grab "),this.outer.addClass(u),this.$inner.css("transition-timing-function",this.settings.easing),this.$inner.css("transition-duration",this.settings.speed+"ms"),this.settings.download&&this.$toolbar.append('<a id="'+this.getIdName("lg-download")+'" target="_blank" rel="noopener" aria-label="'+this.settings.strings.download+'" download class="lg-download lg-icon"></a>'),this.counter(),a(window).on("resize.lg.global"+this.lgId+" orientationchange.lg.global"+this.lgId,function(){e.refreshOnResize()}),this.hideBars(),this.manageCloseGallery(),this.toggleMaximize(),this.initModules()}},l.prototype.refreshOnResize=function(){if(this.lgOpened){var e=this.galleryItems[this.index].__slideVideoInfo;this.mediaContainerPosition=this.getMediaContainerPosition();var t=this.mediaContainerPosition,i=t.top,s=t.bottom;if(this.currentImageSize=u(this.items[this.index],this.outer,i+s,e&&this.settings.videoMaxSize),e&&this.resizeVideoSlide(this.index,this.currentImageSize),this.zoomFromOrigin&&!this.isDummyImageRemoved){var r=this.getDummyImgStyles(this.currentImageSize);this.outer.find(".lg-current .lg-dummy-img").first().attr("style",r)}this.LGel.trigger("lgContainerResize")}},l.prototype.resizeVideoSlide=function(e,t){var i=this.getVideoContStyle(t);this.getSlideItem(e).find(".lg-video-cont").attr("style",i)},l.prototype.updateSlides=function(e,i){if(this.index>e.length-1&&(this.index=e.length-1),1===e.length&&(this.index=0),e.length){var s=this.galleryItems[i].src;this.galleryItems=e,this.updateControls(),this.$inner.empty(),this.currentItemsInDom=[];var r=0;this.galleryItems.some(function(e,t){return e.src===s&&(r=t,!0)}),this.currentItemsInDom=this.organizeSlideItems(r,-1),this.loadContent(r,!0),this.getSlideItem(r).addClass("lg-current"),this.index=r,this.updateCurrentCounter(r),this.LGel.trigger(t)}else this.closeGallery()},l.prototype.getItems=function(){if(this.items=[],this.settings.dynamic)return this.settings.dynamicEl||[];if("this"===this.settings.selector)this.items.push(this.el);else if(this.settings.selector)if("string"==typeof this.settings.selector)if(this.settings.selectWithin){var e=a(this.settings.selectWithin);this.items=e.find(this.settings.selector).get()}else this.items=this.el.querySelectorAll(this.settings.selector);else this.items=this.settings.selector;else this.items=this.el.children;return p(this.items,this.settings.extraProps,this.settings.getCaptionFromTitleOrAlt,this.settings.exThumbImage)},l.prototype.shouldHideScrollbar=function(){return this.settings.hideScrollbar&&document.body===this.settings.container},l.prototype.hideScrollbar=function(){if(this.shouldHideScrollbar()){this.bodyPaddingRight=parseFloat(a("body").style().paddingRight);var e=document.documentElement.getBoundingClientRect(),t=window.innerWidth-e.width;a(document.body).css("padding-right",t+this.bodyPaddingRight+"px"),a(document.body).addClass("lg-overlay-open")}},l.prototype.resetScrollBar=function(){this.shouldHideScrollbar()&&(a(document.body).css("padding-right",this.bodyPaddingRight+"px"),a(document.body).removeClass("lg-overlay-open"))},l.prototype.openGallery=function(e,t){var i=this;if(void 0===e&&(e=this.settings.index),!this.lgOpened){this.lgOpened=!0,this.outer.removeClass("lg-hide-items"),this.hideScrollbar(),this.$container.addClass("lg-show");var s=this.getItemsToBeInsertedToDom(e,e);this.currentItemsInDom=s;var r="";s.forEach(function(e){r=r+'<div id="'+e+'" class="lg-item"></div>'}),this.$inner.append(r),this.addHtml(e);var n="";this.mediaContainerPosition=this.getMediaContainerPosition();var o=this.mediaContainerPosition,l=o.top,c=o.bottom;this.settings.allowMediaOverlap||this.setMediaContainerPosition(l,c);var h=this.galleryItems[e].__slideVideoInfo;this.zoomFromOrigin&&t&&(this.currentImageSize=u(t,this.outer,l+c,h&&this.settings.videoMaxSize),n=d(t,this.outer,l,c,this.currentImageSize)),this.zoomFromOrigin&&n||(this.outer.addClass(this.settings.startClass),this.getSlideItem(e).removeClass("lg-complete"));var g=this.settings.zoomFromOrigin?100:this.settings.backdropDuration;setTimeout(function(){i.outer.addClass("lg-components-open")},g),this.index=e,this.LGel.trigger("lgBeforeOpen"),this.getSlideItem(e).addClass("lg-current"),this.lGalleryOn=!1,this.prevScrollTop=a(window).scrollTop(),setTimeout(function(){if(i.zoomFromOrigin&&n){var t=i.getSlideItem(e);t.css("transform",n),setTimeout(function(){t.addClass("lg-start-progress lg-start-end-progress").css("transition-duration",i.settings.startAnimationDuration+"ms"),i.outer.addClass("lg-zoom-from-image")}),setTimeout(function(){t.css("transform","translate3d(0, 0, 0)")},100)}setTimeout(function(){i.$backdrop.addClass("in"),i.$container.addClass("lg-show-in")},10),setTimeout(function(){i.settings.trapFocus&&document.body===i.settings.container&&i.trapFocus()},i.settings.backdropDuration+50),i.zoomFromOrigin&&n||setTimeout(function(){i.outer.addClass("lg-visible")},i.settings.backdropDuration),i.slide(e,!1,!1,!1),i.LGel.trigger("lgAfterOpen")}),document.body===this.settings.container&&a("html").addClass("lg-on")}},l.prototype.getMediaContainerPosition=function(){if(this.settings.allowMediaOverlap)return{top:0,bottom:0};var e=this.$toolbar.get().clientHeight||0,t=this.outer.find(".lg-components .lg-sub-html").get(),i=this.settings.defaultCaptionHeight||t&&t.clientHeight||0,s=this.outer.find(".lg-thumb-outer").get();return{top:e,bottom:(s?s.clientHeight:0)+i}},l.prototype.setMediaContainerPosition=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.$content.css("top",e+"px").css("bottom",t+"px")},l.prototype.hideBars=function(){var e=this;setTimeout(function(){e.outer.removeClass("lg-hide-items"),e.settings.hideBarsDelay>0&&(e.outer.on("mousemove.lg click.lg touchstart.lg",function(){e.outer.removeClass("lg-hide-items"),clearTimeout(e.hideBarTimeout),e.hideBarTimeout=setTimeout(function(){e.outer.addClass("lg-hide-items")},e.settings.hideBarsDelay)}),e.outer.trigger("mousemove.lg"))},this.settings.showBarsAfter)},l.prototype.initPictureFill=function(e){if(this.settings.supportLegacyBrowser)try{picturefill({elements:[e.get()]})}catch(e){console.warn("lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.")}},l.prototype.counter=function(){if(this.settings.counter){var e='<div class="lg-counter" role="status" aria-live="polite">\n                <span id="'+this.getIdName("lg-counter-current")+'" class="lg-counter-current">'+(this.index+1)+' </span> /\n                <span id="'+this.getIdName("lg-counter-all")+'" class="lg-counter-all">'+this.galleryItems.length+" </span></div>";this.outer.find(this.settings.appendCounterTo).append(e)}},l.prototype.addHtml=function(e){var t,i;if(this.galleryItems[e].subHtmlUrl?i=this.galleryItems[e].subHtmlUrl:t=this.galleryItems[e].subHtml,!i)if(t){var s=t.substring(0,1);"."!==s&&"#"!==s||(t=this.settings.subHtmlSelectorRelative&&!this.settings.dynamic?a(this.items).eq(e).find(t).first().html():a(t).first().html())}else t="";if(".lg-item"!==this.settings.appendSubHtmlTo)i?h(i,this.outer.find(".lg-sub-html"),"replace"):this.outer.find(".lg-sub-html").html(t);else{var r=a(this.getSlideItemId(e));i?h(i,r,"append"):r.append('<div class="lg-sub-html">'+t+"</div>")}null!=t&&(""===t?this.outer.find(this.settings.appendSubHtmlTo).addClass("lg-empty-html"):this.outer.find(this.settings.appendSubHtmlTo).removeClass("lg-empty-html")),this.LGel.trigger("lgAfterAppendSubHtml",{index:e})},l.prototype.preload=function(e){for(var t=1;t<=this.settings.preload&&!(t>=this.galleryItems.length-e);t++)this.loadContent(e+t,!1);for(var i=1;i<=this.settings.preload&&!(e-i<0);i++)this.loadContent(e-i,!1)},l.prototype.getDummyImgStyles=function(e){return e?"width:"+e.width+"px;\n                margin-left: -"+e.width/2+"px;\n                margin-top: -"+e.height/2+"px;\n                height:"+e.height+"px":""},l.prototype.getVideoContStyle=function(e){return e?"width:"+e.width+"px;\n                height:"+e.height+"px":""},l.prototype.getDummyImageContent=function(e,t,i){var s;if(this.settings.dynamic||(s=a(this.items).eq(t)),s){var r;if(!(r=this.settings.exThumbImage?s.attr(this.settings.exThumbImage):s.find("img").first().attr("src")))return"";var n=this.getDummyImgStyles(this.currentImageSize),o=document.createElement("img");return o.alt=i||"",o.src=r,o.className="lg-dummy-img",o.style.cssText=n,e.addClass("lg-first-slide"),this.outer.addClass("lg-first-slide-loading"),o}return""},l.prototype.setImgMarkup=function(e,t,i){var s,r=this.galleryItems[i],n=r.alt,o=r.srcset,l=r.sizes,c=r.sources,h=n?'alt="'+n+'"':"";s=this.isFirstSlideWithZoomAnimation()?this.getDummyImageContent(t,i,h):g(i,e,h,o,l,c);var u=document.createElement("picture");u.className="lg-img-wrap",a(u).append(s),t.prepend(u)},l.prototype.onSlideObjectLoad=function(e,t,i,s){var r=e.find(".lg-object").first();(function(e){return!!e&&!!e.complete&&0!==e.naturalWidth})(r.get())||t?i():(r.on("load.lg error.lg",function(){i&&i()}),r.on("error.lg",function(){s&&s()}))},l.prototype.onLgObjectLoad=function(e,t,i,s,r,n){var o=this;this.onSlideObjectLoad(e,n,function(){o.triggerSlideItemLoad(e,t,i,s,r)},function(){e.addClass("lg-complete lg-complete_"),e.html('<span class="lg-error-msg">'+o.settings.strings.mediaLoadingFailed+"</span>")})},l.prototype.triggerSlideItemLoad=function(e,t,i,s,r){var n=this,o=this.galleryItems[t],a=r&&"video"===this.getSlideType(o)&&!o.poster?s:0;setTimeout(function(){e.addClass("lg-complete lg-complete_"),n.LGel.trigger("lgSlideItemLoad",{index:t,delay:i||0,isFirstSlide:r})},a)},l.prototype.isFirstSlideWithZoomAnimation=function(){return!(this.lGalleryOn||!this.zoomFromOrigin||!this.currentImageSize)},l.prototype.addSlideVideoInfo=function(e){var t=this;e.forEach(function(e,i){e.__slideVideoInfo=function(e,t,i){if(!e)return t?{html5:!0}:void console.error("lightGallery :- data-src is not provided on slide item "+(i+1)+". Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/");var s=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)([\&|?][\S]*)*/i),r=e.match(/\/\/(?:www\.)?(?:player\.)?vimeo.com\/(?:video\/)?([0-9a-z\-_]+)(.*)?/i),n=e.match(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/(medias|embed)\/([0-9a-z\-_]+)(.*)/);return s?{youtube:s}:r?{vimeo:r}:n?{wistia:n}:void 0}(e.src,!!e.video,i),e.__slideVideoInfo&&t.settings.loadYouTubePoster&&!e.poster&&e.__slideVideoInfo.youtube&&(e.poster="//img.youtube.com/vi/"+e.__slideVideoInfo.youtube[1]+"/maxresdefault.jpg")})},l.prototype.loadContent=function(e,t){var i=this,s=this.galleryItems[e],r=a(this.getSlideItemId(e)),n=s.poster,o=s.srcset,l=s.sizes,c=s.sources,h=s.src,d=s.video,p=d&&"string"==typeof d?JSON.parse(d):d;if(s.responsive){var m=s.responsive.split(",");h=function(e){for(var t=[],i=[],s="",r=0;r<e.length;r++){var n=e[r].split(" ");""===n[0]&&n.splice(0,1),i.push(n[0]),t.push(n[1])}for(var o=window.innerWidth,a=0;a<t.length;a++)if(parseInt(t[a],10)>o){s=i[a];break}return s}(m)||h}var f=s.__slideVideoInfo,b="",y=!!s.iframe,v=!this.lGalleryOn,w=0;if(v&&(w=this.zoomFromOrigin&&this.currentImageSize?this.settings.startAnimationDuration+10:this.settings.backdropDuration+10),!r.hasClass("lg-loaded")){if(f){var x=this.mediaContainerPosition,k=x.top,S=x.bottom,C=u(this.items[e],this.outer,k+S,f&&this.settings.videoMaxSize);b=this.getVideoContStyle(C)}if(y){var I=function(e,t,i,s,r,n){return'<div class="lg-media-cont lg-has-iframe" style="width:'+e+"; max-width:"+i+"; height: "+t+"; max-height:"+s+'">\n                    <iframe class="lg-object" frameborder="0" '+(n?'title="'+n+'"':"")+' src="'+r+'"  allowfullscreen="true"></iframe>\n                </div>'}(this.settings.iframeWidth,this.settings.iframeHeight,this.settings.iframeMaxWidth,this.settings.iframeMaxHeight,h,s.iframeTitle);r.prepend(I)}else if(n){var E="";v&&this.zoomFromOrigin&&this.currentImageSize&&(E=this.getDummyImageContent(r,e,"")),I=function(e,t,i,s,r){var n;n=r&&r.youtube?"lg-has-youtube":r&&r.vimeo?"lg-has-vimeo":"lg-has-html5";var o=t;return"string"!=typeof t&&(o=t.outerHTML),'<div class="lg-video-cont '+n+'" style="'+i+'">\n                <div class="lg-video-play-button">\n                <svg\n                    viewBox="0 0 20 20"\n                    preserveAspectRatio="xMidYMid"\n                    focusable="false"\n                    aria-labelledby="'+s+'"\n                    role="img"\n                    class="lg-video-play-icon"\n                >\n                    <title>'+s+'</title>\n                    <polygon class="lg-video-play-icon-inner" points="1,0 20,10 1,20"></polygon>\n                </svg>\n                <svg class="lg-video-play-icon-bg" viewBox="0 0 50 50" focusable="false">\n                    <circle cx="50%" cy="50%" r="20"></circle></svg>\n                <svg class="lg-video-play-icon-circle" viewBox="0 0 50 50" focusable="false">\n                    <circle cx="50%" cy="50%" r="20"></circle>\n                </svg>\n            </div>\n            '+o+'\n            <img class="lg-object lg-video-poster" src="'+e+'" />\n        </div>'}(n,E||"",b,this.settings.strings.playVideo,f),r.prepend(I)}else if(f)I='<div class="lg-video-cont " style="'+b+'"></div>',r.prepend(I);else if(this.setImgMarkup(h,r,e),o||c){var T=r.find(".lg-object");this.initPictureFill(T)}(n||f)&&this.LGel.trigger("lgHasVideo",{index:e,src:h,html5Video:p,hasPoster:!!n}),this.LGel.trigger("lgAfterAppendSlide",{index:e}),this.lGalleryOn&&".lg-item"===this.settings.appendSubHtmlTo&&this.addHtml(e)}var L=0;w&&!a(document.body).hasClass("lg-from-hash")&&(L=w),this.isFirstSlideWithZoomAnimation()&&(setTimeout(function(){r.removeClass("lg-start-end-progress lg-start-progress").removeAttr("style")},this.settings.startAnimationDuration+100),r.hasClass("lg-loaded")||setTimeout(function(){if("image"===i.getSlideType(s)){var t=s.alt,a=t?'alt="'+t+'"':"";if(r.find(".lg-img-wrap").append(g(e,h,a,o,l,s.sources)),o||c){var u=r.find(".lg-object");i.initPictureFill(u)}}("image"===i.getSlideType(s)||"video"===i.getSlideType(s)&&n)&&(i.onLgObjectLoad(r,e,w,L,!0,!1),i.onSlideObjectLoad(r,!(!f||!f.html5||n),function(){i.loadContentOnFirstSlideLoad(e,r,L)},function(){i.loadContentOnFirstSlideLoad(e,r,L)}))},this.settings.startAnimationDuration+100)),r.addClass("lg-loaded"),this.isFirstSlideWithZoomAnimation()&&("video"!==this.getSlideType(s)||n)||this.onLgObjectLoad(r,e,w,L,v,!(!f||!f.html5||n)),this.zoomFromOrigin&&this.currentImageSize||!r.hasClass("lg-complete_")||this.lGalleryOn||setTimeout(function(){r.addClass("lg-complete")},this.settings.backdropDuration),this.lGalleryOn=!0,!0===t&&(r.hasClass("lg-complete_")?this.preload(e):r.find(".lg-object").first().on("load.lg error.lg",function(){i.preload(e)}))},l.prototype.loadContentOnFirstSlideLoad=function(e,t,i){var s=this;setTimeout(function(){t.find(".lg-dummy-img").remove(),t.removeClass("lg-first-slide"),s.outer.removeClass("lg-first-slide-loading"),s.isDummyImageRemoved=!0,s.preload(e)},i+300)},l.prototype.getItemsToBeInsertedToDom=function(e,t,i){var s=this;void 0===i&&(i=0);var r=[],n=Math.max(i,3);n=Math.min(n,this.galleryItems.length);var o="lg-item-"+this.lgId+"-"+t;if(this.galleryItems.length<=3)return this.galleryItems.forEach(function(e,t){r.push("lg-item-"+s.lgId+"-"+t)}),r;if(e<(this.galleryItems.length-1)/2){for(var a=e;a>e-n/2&&a>=0;a--)r.push("lg-item-"+this.lgId+"-"+a);var l=r.length;for(a=0;a<n-l;a++)r.push("lg-item-"+this.lgId+"-"+(e+a+1))}else{for(a=e;a<=this.galleryItems.length-1&&a<e+n/2;a++)r.push("lg-item-"+this.lgId+"-"+a);for(l=r.length,a=0;a<n-l;a++)r.push("lg-item-"+this.lgId+"-"+(e-a-1))}return this.settings.loop&&(e===this.galleryItems.length-1?r.push("lg-item-"+this.lgId+"-0"):0===e&&r.push("lg-item-"+this.lgId+"-"+(this.galleryItems.length-1))),-1===r.indexOf(o)&&r.push("lg-item-"+this.lgId+"-"+t),r},l.prototype.organizeSlideItems=function(e,t){var i=this,s=this.getItemsToBeInsertedToDom(e,t,this.settings.numberOfSlideItemsInDom);return s.forEach(function(e){-1===i.currentItemsInDom.indexOf(e)&&i.$inner.append('<div id="'+e+'" class="lg-item"></div>')}),this.currentItemsInDom.forEach(function(e){-1===s.indexOf(e)&&a("#"+e).remove()}),s},l.prototype.getPreviousSlideIndex=function(){var e=0;try{var t=this.outer.find(".lg-current").first().attr("id");e=parseInt(t.split("-")[3])||0}catch(t){e=0}return e},l.prototype.setDownloadValue=function(e){if(this.settings.download){var t=this.galleryItems[e];if(!1===t.downloadUrl||"false"===t.downloadUrl)this.outer.addClass("lg-hide-download");else{var i=this.getElementById("lg-download");this.outer.removeClass("lg-hide-download"),i.attr("href",t.downloadUrl||t.src),t.download&&i.attr("download",t.download)}}},l.prototype.makeSlideAnimation=function(e,t,i){var s=this;this.lGalleryOn&&i.addClass("lg-slide-progress"),setTimeout(function(){s.outer.addClass("lg-no-trans"),s.outer.find(".lg-item").removeClass("lg-prev-slide lg-next-slide"),"prev"===e?(t.addClass("lg-prev-slide"),i.addClass("lg-next-slide")):(t.addClass("lg-next-slide"),i.addClass("lg-prev-slide")),setTimeout(function(){s.outer.find(".lg-item").removeClass("lg-current"),t.addClass("lg-current"),s.outer.removeClass("lg-no-trans")},50)},this.lGalleryOn?this.settings.slideDelay:0)},l.prototype.slide=function(e,t,i,s){var r=this,n=this.getPreviousSlideIndex();if(this.currentItemsInDom=this.organizeSlideItems(e,n),!this.lGalleryOn||n!==e){var o=this.galleryItems.length;if(!this.lgBusy){this.settings.counter&&this.updateCurrentCounter(e);var a=this.getSlideItem(e),l=this.getSlideItem(n),c=this.galleryItems[e],h=c.__slideVideoInfo;if(this.outer.attr("data-lg-slide-type",this.getSlideType(c)),this.setDownloadValue(e),h){var d=this.mediaContainerPosition,g=d.top,p=d.bottom,m=u(this.items[e],this.outer,g+p,h&&this.settings.videoMaxSize);this.resizeVideoSlide(e,m)}if(this.LGel.trigger("lgBeforeSlide",{prevIndex:n,index:e,fromTouch:!!t,fromThumb:!!i}),this.lgBusy=!0,clearTimeout(this.hideBarTimeout),this.arrowDisable(e),s||(e<n?s="prev":e>n&&(s="next")),t){this.outer.find(".lg-item").removeClass("lg-prev-slide lg-current lg-next-slide");var f=void 0,b=void 0;o>2?(f=e-1,b=e+1,(0===e&&n===o-1||e===o-1&&0===n)&&(b=0,f=o-1)):(f=0,b=1),"prev"===s?this.getSlideItem(b).addClass("lg-next-slide"):this.getSlideItem(f).addClass("lg-prev-slide"),a.addClass("lg-current")}else this.makeSlideAnimation(s,a,l);this.lGalleryOn?setTimeout(function(){r.loadContent(e,!0),".lg-item"!==r.settings.appendSubHtmlTo&&r.addHtml(e)},this.settings.speed+50+(t?0:this.settings.slideDelay)):this.loadContent(e,!0),setTimeout(function(){r.lgBusy=!1,l.removeClass("lg-slide-progress"),r.LGel.trigger("lgAfterSlide",{prevIndex:n,index:e,fromTouch:t,fromThumb:i})},(this.lGalleryOn?this.settings.speed+100:100)+(t?0:this.settings.slideDelay))}this.index=e}},l.prototype.updateCurrentCounter=function(e){this.getElementById("lg-counter-current").html(e+1+"")},l.prototype.updateCounterTotal=function(){this.getElementById("lg-counter-all").html(this.galleryItems.length+"")},l.prototype.getSlideType=function(e){return e.__slideVideoInfo?"video":e.iframe?"iframe":"image"},l.prototype.touchMove=function(e,t,i){var s=t.pageX-e.pageX,r=t.pageY-e.pageY,n=!1;if(this.swipeDirection?n=!0:Math.abs(s)>15?(this.swipeDirection="horizontal",n=!0):Math.abs(r)>15&&(this.swipeDirection="vertical",n=!0),n){var o=this.getSlideItem(this.index);if("horizontal"===this.swipeDirection){null==i||i.preventDefault(),this.outer.addClass("lg-dragging"),this.setTranslate(o,s,0);var a=o.get().offsetWidth,l=15*a/100-Math.abs(10*s/100);this.setTranslate(this.outer.find(".lg-prev-slide").first(),-a+s-l,0),this.setTranslate(this.outer.find(".lg-next-slide").first(),a+s+l,0)}else if("vertical"===this.swipeDirection&&this.settings.swipeToClose){null==i||i.preventDefault(),this.$container.addClass("lg-dragging-vertical");var c=1-Math.abs(r)/window.innerHeight;this.$backdrop.css("opacity",c);var h=1-Math.abs(r)/(2*window.innerWidth);this.setTranslate(o,0,r,h,h),Math.abs(r)>100&&this.outer.addClass("lg-hide-items").removeClass("lg-components-open")}}},l.prototype.touchEnd=function(e,t,s){var r,n=this;"lg-slide"!==this.settings.mode&&this.outer.addClass("lg-slide"),setTimeout(function(){n.$container.removeClass("lg-dragging-vertical"),n.outer.removeClass("lg-dragging lg-hide-items").addClass("lg-components-open");var o=!0;if("horizontal"===n.swipeDirection){r=e.pageX-t.pageX;var l=Math.abs(e.pageX-t.pageX);r<0&&l>n.settings.swipeThreshold?(n.goToNextSlide(!0),o=!1):r>0&&l>n.settings.swipeThreshold&&(n.goToPrevSlide(!0),o=!1)}else if("vertical"===n.swipeDirection){if(r=Math.abs(e.pageY-t.pageY),n.settings.closable&&n.settings.swipeToClose&&r>100)return void n.closeGallery();n.$backdrop.css("opacity",1)}if(n.outer.find(".lg-item").removeAttr("style"),o&&Math.abs(e.pageX-t.pageX)<5){var c=a(s.target);n.isPosterElement(c)&&n.LGel.trigger(i)}n.swipeDirection=void 0}),setTimeout(function(){n.outer.hasClass("lg-dragging")||"lg-slide"===n.settings.mode||n.outer.removeClass("lg-slide")},this.settings.speed+100)},l.prototype.enableSwipe=function(){var e=this,t={},s={},r=!1,n=!1;this.settings.enableSwipe&&(this.$inner.on("touchstart.lg",function(i){e.dragOrSwipeEnabled=!0;var s=e.getSlideItem(e.index);!a(i.target).hasClass("lg-item")&&!s.get().contains(i.target)||e.outer.hasClass("lg-zoomed")||e.lgBusy||1!==i.touches.length||(n=!0,e.touchAction="swipe",e.manageSwipeClass(),t={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY})}),this.$inner.on("touchmove.lg",function(i){n&&"swipe"===e.touchAction&&1===i.touches.length&&(s={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},e.touchMove(t,s,i),r=!0)}),this.$inner.on("touchend.lg",function(o){if("swipe"===e.touchAction){if(r)r=!1,e.touchEnd(s,t,o);else if(n){var l=a(o.target);e.isPosterElement(l)&&e.LGel.trigger(i)}e.touchAction=void 0,n=!1}}))},l.prototype.enableDrag=function(){var e=this,t={},s={},r=!1,n=!1;this.settings.enableDrag&&(this.outer.on("mousedown.lg",function(i){e.dragOrSwipeEnabled=!0;var s=e.getSlideItem(e.index);(a(i.target).hasClass("lg-item")||s.get().contains(i.target))&&(e.outer.hasClass("lg-zoomed")||e.lgBusy||(i.preventDefault(),e.lgBusy||(e.manageSwipeClass(),t={pageX:i.pageX,pageY:i.pageY},r=!0,e.outer.get().scrollLeft+=1,e.outer.get().scrollLeft-=1,e.outer.removeClass("lg-grab").addClass("lg-grabbing"),e.LGel.trigger("lgDragStart"))))}),a(window).on("mousemove.lg.global"+this.lgId,function(i){r&&e.lgOpened&&(n=!0,s={pageX:i.pageX,pageY:i.pageY},e.touchMove(t,s),e.LGel.trigger("lgDragMove"))}),a(window).on("mouseup.lg.global"+this.lgId,function(o){if(e.lgOpened){var l=a(o.target);n?(n=!1,e.touchEnd(s,t,o),e.LGel.trigger("lgDragEnd")):e.isPosterElement(l)&&e.LGel.trigger(i),r&&(r=!1,e.outer.removeClass("lg-grabbing").addClass("lg-grab"))}}))},l.prototype.triggerPosterClick=function(){var e=this;this.$inner.on("click.lg",function(t){!e.dragOrSwipeEnabled&&e.isPosterElement(a(t.target))&&e.LGel.trigger(i)})},l.prototype.manageSwipeClass=function(){var e=this.index+1,t=this.index-1;this.settings.loop&&this.galleryItems.length>2&&(0===this.index?t=this.galleryItems.length-1:this.index===this.galleryItems.length-1&&(e=0)),this.outer.find(".lg-item").removeClass("lg-next-slide lg-prev-slide"),t>-1&&this.getSlideItem(t).addClass("lg-prev-slide"),this.getSlideItem(e).addClass("lg-next-slide")},l.prototype.goToNextSlide=function(e){var t=this,i=this.settings.loop;e&&this.galleryItems.length<3&&(i=!1),this.lgBusy||(this.index+1<this.galleryItems.length?(this.index++,this.LGel.trigger(s,{index:this.index}),this.slide(this.index,!!e,!1,"next")):i?(this.index=0,this.LGel.trigger(s,{index:this.index}),this.slide(this.index,!!e,!1,"next")):this.settings.slideEndAnimation&&!e&&(this.outer.addClass("lg-right-end"),setTimeout(function(){t.outer.removeClass("lg-right-end")},400)))},l.prototype.goToPrevSlide=function(e){var t=this,i=this.settings.loop;e&&this.galleryItems.length<3&&(i=!1),this.lgBusy||(this.index>0?(this.index--,this.LGel.trigger(r,{index:this.index,fromTouch:e}),this.slide(this.index,!!e,!1,"prev")):i?(this.index=this.galleryItems.length-1,this.LGel.trigger(r,{index:this.index,fromTouch:e}),this.slide(this.index,!!e,!1,"prev")):this.settings.slideEndAnimation&&!e&&(this.outer.addClass("lg-left-end"),setTimeout(function(){t.outer.removeClass("lg-left-end")},400)))},l.prototype.keyPress=function(){var e=this;a(window).on("keydown.lg.global"+this.lgId,function(t){e.lgOpened&&!0===e.settings.escKey&&27===t.keyCode&&(t.preventDefault(),e.settings.allowMediaOverlap&&e.outer.hasClass("lg-can-toggle")&&e.outer.hasClass("lg-components-open")?e.outer.removeClass("lg-components-open"):e.closeGallery()),e.lgOpened&&e.galleryItems.length>1&&(37===t.keyCode&&(t.preventDefault(),e.goToPrevSlide()),39===t.keyCode&&(t.preventDefault(),e.goToNextSlide()))})},l.prototype.arrow=function(){var e=this;this.getElementById("lg-prev").on("click.lg",function(){e.goToPrevSlide()}),this.getElementById("lg-next").on("click.lg",function(){e.goToNextSlide()})},l.prototype.arrowDisable=function(e){if(!this.settings.loop&&this.settings.hideControlOnEnd){var t=this.getElementById("lg-prev"),i=this.getElementById("lg-next");e+1===this.galleryItems.length?i.attr("disabled","disabled").addClass("disabled"):i.removeAttr("disabled").removeClass("disabled"),0===e?t.attr("disabled","disabled").addClass("disabled"):t.removeAttr("disabled").removeClass("disabled")}},l.prototype.setTranslate=function(e,t,i,s,r){void 0===s&&(s=1),void 0===r&&(r=1),e.css("transform","translate3d("+t+"px, "+i+"px, 0px) scale3d("+s+", "+r+", 1)")},l.prototype.mousewheel=function(){var e=this,t=0;this.outer.on("wheel.lg",function(i){if(i.deltaY&&!(e.galleryItems.length<2)){i.preventDefault();var s=(new Date).getTime();s-t<1e3||(t=s,i.deltaY>0?e.goToNextSlide():i.deltaY<0&&e.goToPrevSlide())}})},l.prototype.isSlideElement=function(e){return e.hasClass("lg-outer")||e.hasClass("lg-item")||e.hasClass("lg-img-wrap")||e.hasClass("lg-img-rotate")},l.prototype.isPosterElement=function(e){var t=this.getSlideItem(this.index).find(".lg-video-play-button").get();return e.hasClass("lg-video-poster")||e.hasClass("lg-video-play-button")||t&&t.contains(e.get())},l.prototype.toggleMaximize=function(){var e=this;this.getElementById("lg-maximize").on("click.lg",function(){e.$container.toggleClass("lg-inline"),e.refreshOnResize()})},l.prototype.invalidateItems=function(){for(var e=0;e<this.items.length;e++){var t=a(this.items[e]);t.off("click.lgcustom-item-"+t.attr("data-lg-id"))}},l.prototype.trapFocus=function(){var e=this;this.$container.get().focus({preventScroll:!0}),a(window).on("keydown.lg.global"+this.lgId,function(t){if(e.lgOpened&&("Tab"===t.key||9===t.keyCode)){var i=function(e){var t=e.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])');return[].filter.call(t,function(e){var t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility})}(e.$container.get()),s=i[0],r=i[i.length-1];t.shiftKey?document.activeElement===s&&(r.focus(),t.preventDefault()):document.activeElement===r&&(s.focus(),t.preventDefault())}})},l.prototype.manageCloseGallery=function(){var e=this;if(this.settings.closable){var t=!1;this.getElementById("lg-close").on("click.lg",function(){e.closeGallery()}),this.settings.closeOnTap&&(this.outer.on("mousedown.lg",function(i){var s=a(i.target);t=!!e.isSlideElement(s)}),this.outer.on("mousemove.lg",function(){t=!1}),this.outer.on("mouseup.lg",function(i){var s=a(i.target);e.isSlideElement(s)&&t&&(e.outer.hasClass("lg-dragging")||e.closeGallery())}))}},l.prototype.closeGallery=function(e){var t=this;if(!this.lgOpened||!this.settings.closable&&!e)return 0;this.LGel.trigger("lgBeforeClose"),this.settings.resetScrollPosition&&!this.settings.hideScrollbar&&a(window).scrollTop(this.prevScrollTop);var i,s=this.items[this.index];if(this.zoomFromOrigin&&s){var r=this.mediaContainerPosition,n=r.top,o=r.bottom,l=this.galleryItems[this.index],c=l.__slideVideoInfo,h=l.poster,g=u(s,this.outer,n+o,c&&h&&this.settings.videoMaxSize);i=d(s,this.outer,n,o,g)}this.zoomFromOrigin&&i?(this.outer.addClass("lg-closing lg-zoom-from-image"),this.getSlideItem(this.index).addClass("lg-start-end-progress").css("transition-duration",this.settings.startAnimationDuration+"ms").css("transform",i)):(this.outer.addClass("lg-hide-items"),this.outer.removeClass("lg-zoom-from-image")),this.destroyModules(),this.lGalleryOn=!1,this.isDummyImageRemoved=!1,this.zoomFromOrigin=this.settings.zoomFromOrigin,clearTimeout(this.hideBarTimeout),this.hideBarTimeout=!1,a("html").removeClass("lg-on"),this.outer.removeClass("lg-visible lg-components-open"),this.$backdrop.removeClass("in").css("opacity",0);var p=this.zoomFromOrigin&&i?Math.max(this.settings.startAnimationDuration,this.settings.backdropDuration):this.settings.backdropDuration;return this.$container.removeClass("lg-show-in"),setTimeout(function(){t.zoomFromOrigin&&i&&t.outer.removeClass("lg-zoom-from-image"),t.$container.removeClass("lg-show"),t.resetScrollBar(),t.$backdrop.removeAttr("style").css("transition-duration",t.settings.backdropDuration+"ms"),t.outer.removeClass("lg-closing "+t.settings.startClass),t.getSlideItem(t.index).removeClass("lg-start-end-progress"),t.$inner.empty(),t.lgOpened&&t.LGel.trigger("lgAfterClose",{instance:t}),t.$container.get()&&t.$container.get().blur(),t.lgOpened=!1},p+100),p+100},l.prototype.initModules=function(){this.plugins.forEach(function(e){try{e.init()}catch(e){console.warn("lightGallery:- make sure lightGallery module is properly initiated")}})},l.prototype.destroyModules=function(e){this.plugins.forEach(function(t){try{e?t.destroy():t.closeGallery&&t.closeGallery()}catch(e){console.warn("lightGallery:- make sure lightGallery module is properly destroyed")}})},l.prototype.refresh=function(e){this.settings.dynamic||this.invalidateItems(),this.galleryItems=e||this.getItems(),this.updateControls(),this.openGalleryOnItemClick(),this.LGel.trigger(t)},l.prototype.updateControls=function(){this.addSlideVideoInfo(this.galleryItems),this.updateCounterTotal(),this.manageSingleSlideClassName()},l.prototype.destroyGallery=function(){this.destroyModules(!0),this.settings.dynamic||this.invalidateItems(),a(window).off(".lg.global"+this.lgId),this.LGel.off(".lg"),this.$container.remove()},l.prototype.destroy=function(){var e=this.closeGallery(!0);return e?setTimeout(this.destroyGallery.bind(this),e):this.destroyGallery(),e},l}();return function(e,t){return new f(e,t)}}()},563(e){e.exports=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},t={fullScreen:!0,fullscreenPluginStrings:{toggleFullscreen:"Toggle Fullscreen"}};return function(){function i(i,s){return this.core=i,this.$LG=s,this.settings=e(e({},t),this.core.settings),this}return i.prototype.init=function(){var e="";if(this.settings.fullScreen){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))return;e='<button type="button" aria-label="'+this.settings.fullscreenPluginStrings.toggleFullscreen+'" class="lg-fullscreen lg-icon"></button>',this.core.$toolbar.append(e),this.fullScreen()}},i.prototype.isFullScreen=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},i.prototype.requestFullscreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},i.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},i.prototype.fullScreen=function(){var e=this;this.$LG(document).on("fullscreenchange.lg.global"+this.core.lgId+" \n            webkitfullscreenchange.lg.global"+this.core.lgId+" \n            mozfullscreenchange.lg.global"+this.core.lgId+" \n            MSFullscreenChange.lg.global"+this.core.lgId,function(){e.core.lgOpened&&e.core.outer.toggleClass("lg-fullscreen-on")}),this.core.outer.find(".lg-fullscreen").first().on("click.lg",function(){e.isFullScreen()?e.exitFullscreen():e.requestFullscreen()})},i.prototype.closeGallery=function(){this.isFullScreen()&&this.exitFullscreen()},i.prototype.destroy=function(){this.$LG(document).off("fullscreenchange.lg.global"+this.core.lgId+" \n            webkitfullscreenchange.lg.global"+this.core.lgId+" \n            mozfullscreenchange.lg.global"+this.core.lgId+" \n            MSFullscreenChange.lg.global"+this.core.lgId)},i}()}()},569(e){e.exports=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},t={scale:1,zoom:!0,infiniteZoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300,zoomPluginStrings:{zoomIn:"Zoom in",zoomOut:"Zoom out",viewActualSize:"View actual size"}};return function(){function i(i,s){return this.core=i,this.$LG=s,this.settings=e(e({},t),this.core.settings),this}return i.prototype.buildTemplates=function(){var e=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomIn+'" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.zoomOut+'" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(e+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="'+this.settings.zoomPluginStrings.viewActualSize+'" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(e)},i.prototype.enableZoom=function(e){var t=this,i=this.settings.enableZoomAfter+e.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&e.detail.delay?i=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout(function(){t.isImageSlide(t.core.index)&&(t.core.getSlideItem(e.detail.index).addClass("lg-zoomable"),e.detail.index===t.core.index&&t.setZoomEssentials())},i+30)},i.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on("lgSlideItemLoad.zoom",this.enableZoom.bind(this))},i.prototype.getDragCords=function(e){return{x:e.pageX,y:e.pageY}},i.prototype.getSwipeCords=function(e){return{x:e.touches[0].pageX,y:e.touches[0].pageY}},i.prototype.getDragAllowedAxises=function(e,t){if(!this.containerRect)return{allowX:!1,allowY:!1};var i=this.core.getSlideItem(this.core.index).find(".lg-image").first().get(),s=0,r=0,n=i.getBoundingClientRect();e?(s=i.offsetHeight*e,r=i.offsetWidth*e):t?(s=n.height+t*n.height,r=n.width+t*n.width):(s=n.height,r=n.width);var o=s>this.containerRect.height;return{allowX:r>this.containerRect.width,allowY:o}},i.prototype.setZoomEssentials=function(){this.containerRect=this.core.$content.get().getBoundingClientRect()},i.prototype.zoomImage=function(e,t,i,s){if(!(Math.abs(t)<=0)){var r,n,o=this.containerRect.width/2+this.containerRect.left,a=this.containerRect.height/2+this.containerRect.top+this.scrollTop;1===e&&(this.positionChanged=!1);var l=this.getDragAllowedAxises(0,t),c=l.allowY,h=l.allowX;this.positionChanged&&(r=this.left/(this.scale-t),n=this.top/(this.scale-t),this.pageX=o-r,this.pageY=a-n,this.positionChanged=!1);var u,d,g=this.getPossibleSwipeDragCords(t),p=o-this.pageX,m=a-this.pageY;if(e-t>1){var f=(e-t)/Math.abs(t);u=(p=(t<0?-p:p)+this.left*(f+(t<0?-1:1)))/f,d=(m=(t<0?-m:m)+this.top*(f+(t<0?-1:1)))/f}else u=p*(f=(e-t)*t),d=m*f;i&&(h?this.isBeyondPossibleLeft(u,g.minX)?u=g.minX:this.isBeyondPossibleRight(u,g.maxX)&&(u=g.maxX):e>1&&(u<g.minX?u=g.minX:u>g.maxX&&(u=g.maxX)),c?this.isBeyondPossibleTop(d,g.minY)?d=g.minY:this.isBeyondPossibleBottom(d,g.maxY)&&(d=g.maxY):e>1&&(d<g.minY?d=g.minY:d>g.maxY&&(d=g.maxY))),this.setZoomStyles({x:u,y:d,scale:e}),this.left=u,this.top=d,s&&this.setZoomImageSize()}},i.prototype.resetImageTranslate=function(e){if(this.isImageSlide(e)){var t=this.core.getSlideItem(e).find(".lg-image").first();this.imageReset=!1,t.removeClass("reset-transition reset-transition-y reset-transition-x"),this.core.outer.removeClass("lg-actual-size"),t.css("width","auto").css("height","auto"),setTimeout(function(){t.removeClass("no-transition")},10)}},i.prototype.setZoomImageSize=function(){var e=this,t=this.core.getSlideItem(this.core.index).find(".lg-image").first();setTimeout(function(){var i=e.getCurrentImageActualSizeScale();e.scale>=i&&(t.addClass("no-transition"),e.imageReset=!0)},500),setTimeout(function(){var i=e.getCurrentImageActualSizeScale();if(e.scale>=i){var s=e.getDragAllowedAxises(e.scale);t.css("width",t.get().naturalWidth+"px").css("height",t.get().naturalHeight+"px"),e.core.outer.addClass("lg-actual-size"),s.allowX&&s.allowY?t.addClass("reset-transition"):s.allowX&&!s.allowY?t.addClass("reset-transition-x"):!s.allowX&&s.allowY&&t.addClass("reset-transition-y")}},550)},i.prototype.setZoomStyles=function(e){var t=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),i=this.core.getSlideItem(this.core.index).find(".lg-image").first(),s=this.core.outer.find(".lg-current .lg-dummy-img").first();this.scale=e.scale,i.css("transform","scale3d("+e.scale+", "+e.scale+", 1)"),s.css("transform","scale3d("+e.scale+", "+e.scale+", 1)");var r="translate3d("+e.x+"px, "+e.y+"px, 0)";t.css("transform",r)},i.prototype.setActualSize=function(e,t){var i=this;if(!this.zoomInProgress){this.zoomInProgress=!0;var s=this.core.galleryItems[this.core.index];this.resetImageTranslate(e),setTimeout(function(){if(s.src&&!i.core.outer.hasClass("lg-first-slide-loading")){var e=i.getCurrentImageActualSizeScale(),r=i.scale;i.core.outer.hasClass("lg-zoomed")?i.scale=1:i.scale=i.getScale(e),i.setPageCords(t),i.beginZoom(i.scale),i.zoomImage(i.scale,i.scale-r,!0,!0)}},50),setTimeout(function(){i.core.outer.removeClass("lg-grabbing").addClass("lg-grab")},60),setTimeout(function(){i.zoomInProgress=!1},610)}},i.prototype.getNaturalWidth=function(e){var t=this.core.getSlideItem(e).find(".lg-image").first(),i=this.core.galleryItems[e].width;return i?parseFloat(i):t.get().naturalWidth},i.prototype.getActualSizeScale=function(e,t){return e>=t?e/t||2:1},i.prototype.getCurrentImageActualSizeScale=function(){var e=this.core.getSlideItem(this.core.index).find(".lg-image").first().get().offsetWidth,t=this.getNaturalWidth(this.core.index)||e;return this.getActualSizeScale(t,e)},i.prototype.getPageCords=function(e){var t={};if(e)t.x=e.pageX||e.touches[0].pageX,t.y=e.pageY||e.touches[0].pageY;else{var i=this.core.$content.get().getBoundingClientRect();t.x=i.width/2+i.left,t.y=i.height/2+this.scrollTop+i.top}return t},i.prototype.setPageCords=function(e){var t=this.getPageCords(e);this.pageX=t.x,this.pageY=t.y},i.prototype.manageActualPixelClassNames=function(){this.core.getElementById("lg-actual-size").removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)},i.prototype.beginZoom=function(e){return this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),e>1?(this.core.outer.addClass("lg-zoomed"),this.manageActualPixelClassNames()):this.resetZoom(),e>1},i.prototype.getScale=function(e){var t=this.getCurrentImageActualSizeScale();return e<1?e=1:e>t&&(e=t),e},i.prototype.init=function(){var e=this;if(this.settings.zoom){this.buildTemplates(),this.enableZoomOnSlideItemLoad();var t=null;this.core.outer.on("dblclick.lg",function(t){e.$LG(t.target).hasClass("lg-image")&&e.setActualSize(e.core.index,t)}),this.core.outer.on("touchstart.lg",function(i){var s=e.$LG(i.target);1===i.touches.length&&s.hasClass("lg-image")&&(t?(clearTimeout(t),t=null,i.preventDefault(),e.setActualSize(e.core.index,i)):t=setTimeout(function(){t=null},300))}),this.core.LGel.on("lgContainerResize.zoom lgRotateRight.zoom lgRotateLeft.zoom lgFlipHorizontal.zoom lgFlipVertical.zoom",function(){if(e.core.lgOpened&&e.isImageSlide(e.core.index)&&!e.core.touchAction){var t=e.core.getSlideItem(e.core.index).find(".lg-img-wrap").first();e.top=0,e.left=0,e.setZoomEssentials(),e.setZoomSwipeStyles(t,{x:0,y:0}),e.positionChanged=!0}}),this.$LG(window).on("scroll.lg.zoom.global"+this.core.lgId,function(){e.core.lgOpened&&(e.scrollTop=e.$LG(window).scrollTop())}),this.core.getElementById("lg-zoom-out").on("click.lg",function(){if(e.isImageSlide(e.core.index)){var t=0;e.imageReset&&(e.resetImageTranslate(e.core.index),t=50),setTimeout(function(){var t=e.scale-e.settings.scale;t<1&&(t=1),e.beginZoom(t),e.zoomImage(t,-e.settings.scale,!0,!e.settings.infiniteZoom)},t)}}),this.core.getElementById("lg-zoom-in").on("click.lg",function(){e.zoomIn()}),this.core.getElementById("lg-actual-size").on("click.lg",function(){e.setActualSize(e.core.index)}),this.core.LGel.on("lgBeforeOpen.zoom",function(){e.core.outer.find(".lg-item").removeClass("lg-zoomable")}),this.core.LGel.on("lgAfterOpen.zoom",function(){e.scrollTop=e.$LG(window).scrollTop(),e.pageX=e.core.outer.width()/2,e.pageY=e.core.outer.height()/2+e.scrollTop,e.scale=1}),this.core.LGel.on("lgAfterSlide.zoom",function(t){var i=t.detail.prevIndex;e.scale=1,e.positionChanged=!1,e.zoomInProgress=!1,e.resetZoom(i),e.resetImageTranslate(i),e.isImageSlide(e.core.index)&&e.setZoomEssentials()}),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe(),this.zoomableTimeout=!1,this.positionChanged=!1,this.zoomInProgress=!1}},i.prototype.zoomIn=function(){if(this.isImageSlide(this.core.index)){var e=this.scale+this.settings.scale;this.settings.infiniteZoom||(e=this.getScale(e)),this.beginZoom(e),this.zoomImage(e,Math.min(this.settings.scale,e-this.scale),!0,!this.settings.infiniteZoom)}},i.prototype.resetZoom=function(e){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var t=this.core.getElementById("lg-actual-size"),i=this.core.getSlideItem(void 0!==e?e:this.core.index);t.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),i.find(".lg-img-wrap").first().removeAttr("style"),i.find(".lg-image").first().removeAttr("style"),this.scale=1,this.left=0,this.top=0,this.setPageCords()},i.prototype.getTouchDistance=function(e){return Math.sqrt((e.touches[0].pageX-e.touches[1].pageX)*(e.touches[0].pageX-e.touches[1].pageX)+(e.touches[0].pageY-e.touches[1].pageY)*(e.touches[0].pageY-e.touches[1].pageY))},i.prototype.pinchZoom=function(){var e=this,t=0,i=!1,s=1,r=0,n=this.core.getSlideItem(this.core.index);this.core.outer.on("touchstart.lg",function(i){if(n=e.core.getSlideItem(e.core.index),e.isImageSlide(e.core.index)&&2===i.touches.length){if(i.preventDefault(),e.core.outer.hasClass("lg-first-slide-loading"))return;s=e.scale||1,e.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),e.setPageCords(i),e.resetImageTranslate(e.core.index),e.core.touchAction="pinch",t=e.getTouchDistance(i)}}),this.core.$inner.on("touchmove.lg",function(o){if(2===o.touches.length&&"pinch"===e.core.touchAction&&(e.$LG(o.target).hasClass("lg-item")||n.get().contains(o.target))){o.preventDefault();var a=e.getTouchDistance(o),l=t-a;if(!i&&Math.abs(l)>5&&(i=!0),i){r=e.scale;var c=Math.max(1,s+.02*-l);e.scale=Math.round(100*(c+Number.EPSILON))/100;var h=e.scale-r;e.zoomImage(e.scale,Math.round(100*(h+Number.EPSILON))/100,!1,!1)}}}),this.core.$inner.on("touchend.lg",function(s){if("pinch"===e.core.touchAction&&(e.$LG(s.target).hasClass("lg-item")||n.get().contains(s.target))){if(i=!1,t=0,e.scale<=1)e.resetZoom();else{var r=e.getCurrentImageActualSizeScale();if(e.scale>=r){var o=r-e.scale;0===o&&(o=.01),e.zoomImage(r,o,!1,!0)}e.manageActualPixelClassNames(),e.core.outer.addClass("lg-zoomed")}e.core.touchAction=void 0}})},i.prototype.touchendZoom=function(e,t,i,s,r){var n=t.x-e.x,o=t.y-e.y,a=Math.abs(n)/r+1,l=Math.abs(o)/r+1;a>2&&(a+=1),l>2&&(l+=1),n*=a,o*=l;var c=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),h={};h.x=this.left+n,h.y=this.top+o;var u=this.getPossibleSwipeDragCords();(Math.abs(n)>15||Math.abs(o)>15)&&(s&&(this.isBeyondPossibleTop(h.y,u.minY)?h.y=u.minY:this.isBeyondPossibleBottom(h.y,u.maxY)&&(h.y=u.maxY)),i&&(this.isBeyondPossibleLeft(h.x,u.minX)?h.x=u.minX:this.isBeyondPossibleRight(h.x,u.maxX)&&(h.x=u.maxX)),s?this.top=h.y:h.y=this.top,i?this.left=h.x:h.x=this.left,this.setZoomSwipeStyles(c,h),this.positionChanged=!0)},i.prototype.getZoomSwipeCords=function(e,t,i,s,r){var n={};if(s){if(n.y=this.top+(t.y-e.y),this.isBeyondPossibleTop(n.y,r.minY)){var o=r.minY-n.y;n.y=r.minY-o/6}else if(this.isBeyondPossibleBottom(n.y,r.maxY)){var a=n.y-r.maxY;n.y=r.maxY+a/6}}else n.y=this.top;if(i){if(n.x=this.left+(t.x-e.x),this.isBeyondPossibleLeft(n.x,r.minX)){var l=r.minX-n.x;n.x=r.minX-l/6}else if(this.isBeyondPossibleRight(n.x,r.maxX)){var c=n.x-r.maxX;n.x=r.maxX+c/6}}else n.x=this.left;return n},i.prototype.isBeyondPossibleLeft=function(e,t){return e>=t},i.prototype.isBeyondPossibleRight=function(e,t){return e<=t},i.prototype.isBeyondPossibleTop=function(e,t){return e>=t},i.prototype.isBeyondPossibleBottom=function(e,t){return e<=t},i.prototype.isImageSlide=function(e){var t=this.core.galleryItems[e];return"image"===this.core.getSlideType(t)},i.prototype.getPossibleSwipeDragCords=function(e){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first(),i=this.core.mediaContainerPosition.bottom,s=t.get().getBoundingClientRect(),r=s.height,n=s.width;return e&&(r+=e*r,n+=e*n),{minY:(r-this.containerRect.height)/2,maxY:(this.containerRect.height-r)/2+i,minX:(n-this.containerRect.width)/2,maxX:(this.containerRect.width-n)/2}},i.prototype.setZoomSwipeStyles=function(e,t){e.css("transform","translate3d("+t.x+"px, "+t.y+"px, 0)")},i.prototype.zoomSwipe=function(){var e,t,i=this,s={},r={},n=!1,o=!1,a=!1,l=new Date,c=(new Date,this.core.getSlideItem(this.core.index));this.core.$inner.on("touchstart.lg",function(r){if(i.isImageSlide(i.core.index)&&(c=i.core.getSlideItem(i.core.index),(i.$LG(r.target).hasClass("lg-item")||c.get().contains(r.target))&&1===r.touches.length&&i.core.outer.hasClass("lg-zoomed"))){r.preventDefault(),l=new Date,i.core.touchAction="zoomSwipe",t=i.core.getSlideItem(i.core.index).find(".lg-img-wrap").first();var n=i.getDragAllowedAxises(0);a=n.allowY,((o=n.allowX)||a)&&(s=i.getSwipeCords(r)),e=i.getPossibleSwipeDragCords(),i.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}}),this.core.$inner.on("touchmove.lg",function(l){if(1===l.touches.length&&"zoomSwipe"===i.core.touchAction&&(i.$LG(l.target).hasClass("lg-item")||c.get().contains(l.target))){l.preventDefault(),i.core.touchAction="zoomSwipe",r=i.getSwipeCords(l);var h=i.getZoomSwipeCords(s,r,o,a,e);(Math.abs(r.x-s.x)>15||Math.abs(r.y-s.y)>15)&&(n=!0,i.setZoomSwipeStyles(t,h))}}),this.core.$inner.on("touchend.lg",function(e){if("zoomSwipe"===i.core.touchAction&&(i.$LG(e.target).hasClass("lg-item")||c.get().contains(e.target))){if(e.preventDefault(),i.core.touchAction=void 0,i.core.outer.removeClass("lg-zoom-dragging"),!n)return;n=!1;var t=(new Date).valueOf()-l.valueOf();i.touchendZoom(s,r,o,a,t)}})},i.prototype.zoomDrag=function(){var e,t,i,s,r=this,n={},o={},a=!1,l=!1,c=!1,h=!1;this.core.outer.on("mousedown.lg.zoom",function(t){if(r.isImageSlide(r.core.index)){var o=r.core.getSlideItem(r.core.index);if(r.$LG(t.target).hasClass("lg-item")||o.get().contains(t.target)){e=new Date,s=r.core.getSlideItem(r.core.index).find(".lg-img-wrap").first();var l=r.getDragAllowedAxises(0);h=l.allowY,c=l.allowX,r.core.outer.hasClass("lg-zoomed")&&r.$LG(t.target).hasClass("lg-object")&&(c||h)&&(t.preventDefault(),n=r.getDragCords(t),i=r.getPossibleSwipeDragCords(),a=!0,r.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}}),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,function(e){if(a){l=!0,o=r.getDragCords(e);var t=r.getZoomSwipeCords(n,o,c,h,i);r.setZoomSwipeStyles(s,t)}}),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,function(i){if(a){if(t=new Date,a=!1,r.core.outer.removeClass("lg-zoom-dragging"),l&&(n.x!==o.x||n.y!==o.y)){o=r.getDragCords(i);var s=t.valueOf()-e.valueOf();r.touchendZoom(n,o,c,h,s)}l=!1}r.core.outer.removeClass("lg-grabbing").addClass("lg-grab")})},i.prototype.closeGallery=function(){this.resetZoom(),this.zoomInProgress=!1},i.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},i}()}()},816(e){e.exports=function(){function e(e,t,i){return t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function t(e,t,i){return t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i)}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e,t){return window.getComputedStyle?window.getComputedStyle(t)[e]:t.currentStyle[e]}var r=function(){for(var e=3,t=document.createElement("b"),i=t.all||[];t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i><![endif]--\x3e",i[0];);return 4<e?e:document.documentMode}(),n=navigator.platform.toLowerCase().indexOf("mac")+1,o=function(s){if(!(this instanceof o))return new o(s);var r=this,a={rows_in_block:50,blocks_in_cluster:4,tag:null,show_no_data_row:!0,no_data_class:"clusterize-no-data",no_data_text:"No data",keep_parity:!0,callbacks:{}};r.options={};for(var l,c="rows_in_block blocks_in_cluster show_no_data_row no_data_class no_data_text keep_parity tag callbacks".split(" "),h=0;l=c[h];h++)r.options[l]=void 0!==s[l]&&null!=s[l]?s[l]:a[l];for(a=["scroll","content"],h=0;c=a[h];h++)if(r[c+"_elem"]=s[c+"Id"]?document.getElementById(s[c+"Id"]):s[c+"Elem"],!r[c+"_elem"])throw Error("Error! Could not find "+c+" element");r.content_elem.hasAttribute("tabindex")||r.content_elem.setAttribute("tabindex",0);var u=i(s.rows)?s.rows:r.fetchMarkup(),d={};s=r.scroll_elem.scrollTop,r.insertToDOM(u,d),r.scroll_elem.scrollTop=s;var g=!1,p=0,m=!1,f=function(){n&&(m||(r.content_elem.style.pointerEvents="none"),m=!0,clearTimeout(p),p=setTimeout(function(){r.content_elem.style.pointerEvents="auto",m=!1},50)),g!=(g=r.getClusterNum(u))&&r.insertToDOM(u,d),r.options.callbacks.scrollingProgress&&r.options.callbacks.scrollingProgress(r.getScrollProgress())},b=0,y=function(){clearTimeout(b),b=setTimeout(r.refresh,100)};e("scroll",r.scroll_elem,f),e("resize",window,y),r.destroy=function(e){t("scroll",r.scroll_elem,f),t("resize",window,y),r.html((e?r.generateEmptyRow():u).join(""))},r.refresh=function(e){(r.getRowsHeight(u)||e)&&r.update(u)},r.update=function(e){u=i(e)?e:[],e=r.scroll_elem.scrollTop,u.length*r.options.item_height<e&&(g=r.scroll_elem.scrollTop=0),r.insertToDOM(u,d),r.scroll_elem.scrollTop=e},r.clear=function(){r.update([])},r.getRowsAmount=function(){return u.length},r.getScrollProgress=function(){return this.options.scroll_top/(u.length*this.options.item_height)*100||0};var v=function(e,t){var s=i(t)?t:[];s.length&&(u="append"==e?u.concat(s):s.concat(u),r.insertToDOM(u,d))};r.append=function(e){v("append",e)},r.prepend=function(e){v("prepend",e)}};return o.prototype={constructor:o,fetchMarkup:function(){for(var e=[],t=this.getChildNodes(this.content_elem);t.length;)e.push(t.shift().outerHTML);return e},exploreEnvironment:function(e,t){var i=this.options;i.content_tag=this.content_elem.tagName.toLowerCase(),e.length&&(r&&9>=r&&!i.tag&&(i.tag=e[0].match(/<([^>\s/]*)/)[1].toLowerCase()),1>=this.content_elem.children.length&&(t.data=this.html(e[0]+e[0]+e[0])),i.tag||(i.tag=this.content_elem.children[0].tagName.toLowerCase()),this.getRowsHeight(e))},getRowsHeight:function(e){var t=this.options,i=t.item_height;if(t.cluster_height=0,e.length&&(e=this.content_elem.children).length){var r=e[Math.floor(e.length/2)];return t.item_height=r.offsetHeight,"tr"==t.tag&&"collapse"!=s("borderCollapse",this.content_elem)&&(t.item_height+=parseInt(s("borderSpacing",this.content_elem),10)||0),"tr"!=t.tag&&(e=parseInt(s("marginTop",r),10)||0,r=parseInt(s("marginBottom",r),10)||0,t.item_height+=Math.max(e,r)),t.block_height=t.item_height*t.rows_in_block,t.rows_in_cluster=t.blocks_in_cluster*t.rows_in_block,t.cluster_height=t.blocks_in_cluster*t.block_height,i!=t.item_height}},getClusterNum:function(e){var t=this.options;t.scroll_top=this.scroll_elem.scrollTop;var i=t.cluster_height-t.block_height;return Math.min(Math.floor(t.scroll_top/i),Math.floor(e.length*t.item_height/i))},generateEmptyRow:function(){var e=this.options;if(!e.tag||!e.show_no_data_row)return[];var t=document.createElement(e.tag),i=document.createTextNode(e.no_data_text);if(t.className=e.no_data_class,"tr"==e.tag){var s=document.createElement("td");s.colSpan=100,s.appendChild(i)}return t.appendChild(s||i),[t.outerHTML]},generate:function(e){var t=this.options,i=e.length;if(i<t.rows_in_block)return{top_offset:0,bottom_offset:0,rows_above:0,rows:i?e:this.generateEmptyRow()};var s=Math.max((t.rows_in_cluster-t.rows_in_block)*this.getClusterNum(e),0),r=s+t.rows_in_cluster,n=Math.max(s*t.item_height,0);t=Math.max((i-r)*t.item_height,0),i=[];var o=s;for(1>n&&o++;s<r;s++)e[s]&&i.push(e[s]);return{top_offset:n,bottom_offset:t,rows_above:o,rows:i}},renderExtraTag:function(e,t){var i=document.createElement(this.options.tag);return i.className=["clusterize-extra-row","clusterize-"+e].join(" "),t&&(i.style.height=t+"px"),i.outerHTML},insertToDOM:function(e,t){this.options.cluster_height||this.exploreEnvironment(e,t);var i=this.generate(e),s=i.rows.join(""),r=this.checkChanges("data",s,t),n=this.checkChanges("top",i.top_offset,t),o=this.checkChanges("bottom",i.bottom_offset,t),a=this.options.callbacks,l=[];r||n?(i.top_offset&&(this.options.keep_parity&&l.push(this.renderExtraTag("keep-parity")),l.push(this.renderExtraTag("top-space",i.top_offset))),l.push(s),i.bottom_offset&&l.push(this.renderExtraTag("bottom-space",i.bottom_offset)),a.clusterWillChange&&a.clusterWillChange(),this.html(l.join("")),"ol"==this.options.content_tag&&this.content_elem.setAttribute("start",i.rows_above),this.content_elem.style["counter-increment"]="clusterize-counter "+(i.rows_above-1),a.clusterChanged&&a.clusterChanged()):o&&(this.content_elem.lastChild.style.height=i.bottom_offset+"px")},html:function(e){var t=this.content_elem;if(r&&9>=r&&"tr"==this.options.tag){var i=document.createElement("div");for(i.innerHTML="<table><tbody>"+e+"</tbody></table>";e=t.lastChild;)t.removeChild(e);for(i=this.getChildNodes(i.firstChild.firstChild);i.length;)t.appendChild(i.shift())}else t.innerHTML=e},getChildNodes:function(e){for(var t=[],i=0,s=(e=e.children).length;i<s;i++)t.push(e[i]);return t},checkChanges:function(e,t,i){var s=t!=i[e];return i[e]=t,s}},o}()},879(e){var t;t=function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function t(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function i(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function s(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?i(Object(r),!0).forEach(function(i){t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function r(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(t,i){if(t){if("string"==typeof t)return e(t,i);var s={}.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e(t,i):void 0}}var a=function(e){return"string"==typeof e?document.querySelector(e):e()},l=function(e,t){var i="string"==typeof e?document.createElement(e):e;for(var s in t){var r=t[s];if("inside"===s)r.append(i);else if("dest"===s)a(r[0]).insertAdjacentElement(r[1],i);else if("around"===s){var n=r;n.parentNode.insertBefore(i,n),i.append(n),null!=n.getAttribute("autofocus")&&n.focus()}else s in i?i[s]=r:i.setAttribute(s,r)}return i},c=function(e,t){return e=String(e).toLowerCase(),t?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):e},h=function(e,t){return l("mark",s({innerHTML:e},"string"==typeof t&&{class:t})).outerHTML},u=function(e,t){t.input.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t.feedback,cancelable:!0}))},d=function(e,t,i){var s=i||{},r=s.mode,n=s.diacritics,o=s.highlight,a=c(t,n);if(t=String(t),e=c(e,n),"loose"===r){var l=(e=e.replace(/ /g,"")).length,u=0,d=Array.from(t).map(function(t,i){return u<l&&a[i]===e[u]&&(t=o?h(t,o):t,u++),t}).join("");if(u===l)return d}else{var g=a.indexOf(e);if(~g)return e=t.substring(g,g+e.length),o?t.replace(e,h(e,o)):t}},g=function(e,t){return new Promise(function(i,s){var r;return(r=e.data).cache&&r.store?i():new Promise(function(e,i){return"function"==typeof r.src?new Promise(function(e,i){return"AsyncFunction"===r.src.constructor.name?r.src(t).then(e,i):e(r.src(t))}).then(e,i):e(r.src)}).then(function(t){try{return e.feedback=r.store=t,u("response",e),i()}catch(e){return s(e)}},s)})},p=function(e,t){var i=t.data,s=t.searchEngine,r=[];i.store.forEach(function(n,a){var l=function(i){var o=i?n[i]:n,a="function"==typeof s?s(e,o):d(e,o,{mode:s,diacritics:t.diacritics,highlight:t.resultItem.highlight});if(a){var l={match:a,value:n};i&&(l.key=i),r.push(l)}};if(i.keys){var c,h=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=o(e))){t&&(e=t);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return n=e.done,e},e:function(e){a=!0,r=e},f:function(){try{n||null==t.return||t.return()}finally{if(a)throw r}}}}(i.keys);try{for(h.s();!(c=h.n()).done;)l(c.value)}catch(e){h.e(e)}finally{h.f()}}else l()}),i.filter&&(r=i.filter(r));var n=r.slice(0,t.resultsList.maxResults);t.feedback={query:e,matches:r,results:n},u("results",t)},m="aria-expanded",f="aria-activedescendant",b="aria-selected",y=function(e,t){e.feedback.selection=s({index:t},e.feedback.results[t])},v=function(e){e.isOpen||((e.wrapper||e.input).setAttribute(m,!0),e.list.removeAttribute("hidden"),e.isOpen=!0,u("open",e))},w=function(e){e.isOpen&&((e.wrapper||e.input).setAttribute(m,!1),e.input.setAttribute(f,""),e.list.setAttribute("hidden",""),e.isOpen=!1,u("close",e))},x=function(e,t){var i=t.resultItem,s=t.list.getElementsByTagName(i.tag),n=!!i.selected&&i.selected.split(" ");if(t.isOpen&&s.length){var o,a,l=t.cursor;e>=s.length&&(e=0),e<0&&(e=s.length-1),t.cursor=e,l>-1&&(s[l].removeAttribute(b),n&&(a=s[l].classList).remove.apply(a,r(n))),s[e].setAttribute(b,!0),n&&(o=s[e].classList).add.apply(o,r(n)),t.input.setAttribute(f,s[t.cursor].id),t.list.scrollTop=s[e].offsetTop-t.list.clientHeight+s[e].clientHeight+5,t.feedback.cursor=t.cursor,y(t,e),u("navigate",t)}},k=function(e){x(e.cursor+1,e)},S=function(e){x(e.cursor-1,e)},C=function(e,t,i){(i=i>=0?i:e.cursor)<0||(e.feedback.event=t,y(e,i),u("selection",e),w(e))};function I(e,t){var i=this;return new Promise(function(r,n){var o,a;return o=t||((a=e.input)instanceof HTMLInputElement||a instanceof HTMLTextAreaElement?a.value:a.innerHTML),function(e,t,i){return t?t(e):e.length>=i}(o=e.query?e.query(o):o,e.trigger,e.threshold)?g(e,o).then(function(t){try{return e.feedback instanceof Error?r():(p(o,e),e.resultsList&&function(e){var t=e.resultsList,i=e.list,r=e.resultItem,n=e.feedback,o=n.matches,a=n.results;if(e.cursor=-1,i.innerHTML="",o.length||t.noResults){var c=new DocumentFragment;a.forEach(function(e,t){var i=l(r.tag,s({id:"".concat(r.id,"_").concat(t),role:"option",innerHTML:e.match,inside:c},r.class&&{class:r.class}));r.element&&r.element(i,e)}),i.append(c),t.element&&t.element(i,n),v(e)}else w(e)}(e),c.call(i))}catch(e){return n(e)}},n):(w(e),c.call(i));function c(){return r()}})}var E=function(e,t){for(var i in e)for(var s in e[i])t(i,s)};function T(e){var t=this;return new Promise(function(i,r){var n,o,a;if(n=e.placeHolder,a={role:"combobox","aria-owns":(o=e.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},l(e.input,s(s({"aria-controls":o.id,"aria-autocomplete":"both"},n&&{placeholder:n}),!e.wrapper&&s({},a))),e.wrapper&&(e.wrapper=l("div",s({around:e.input,class:e.name+"_wrapper"},a))),o&&(e.list=l(o.tag,s({dest:[o.destination,o.position],id:o.id,role:"listbox",hidden:"hidden"},o.class&&{class:o.class}))),function(e){var t,i,r,n=e.events,o=(t=function(){return I(e)},i=e.debounce,function(){clearTimeout(r),r=setTimeout(function(){return t()},i)}),a=e.events=s({input:s({},n&&n.input)},e.resultsList&&{list:n?s({},n.list):{}}),l={input:{input:function(){o()},keydown:function(t){!function(e,t){switch(e.keyCode){case 40:case 38:e.preventDefault(),40===e.keyCode?k(t):S(t);break;case 13:t.submit||e.preventDefault(),t.cursor>=0&&C(t,e);break;case 9:t.resultsList.tabSelect&&t.cursor>=0&&C(t,e);break;case 27:t.input.value="",u("clear",t),w(t)}}(t,e)},blur:function(){w(e)}},list:{mousedown:function(e){e.preventDefault()},click:function(t){!function(e,t){var i=t.resultItem.tag.toUpperCase(),s=Array.from(t.list.querySelectorAll(i)),r=e.target.closest(i);r&&r.nodeName===i&&C(t,e,s.indexOf(r))}(t,e)}}};E(l,function(t,i){(e.resultsList||"input"===i)&&(a[t][i]||(a[t][i]=l[t][i]))}),E(a,function(t,i){e[t].addEventListener(i,a[t][i])})}(e),e.data.cache)return g(e).then(function(e){try{return c.call(t)}catch(e){return r(e)}},r);function c(){return u("init",e),i()}return c.call(t)})}function L(e){var t=e.prototype;t.init=function(){T(this)},t.start=function(e){I(this,e)},t.unInit=function(){if(this.wrapper){var e=this.wrapper.parentNode;e.insertBefore(this.input,this.wrapper),e.removeChild(this.wrapper)}var t;E((t=this).events,function(e,i){t[e].removeEventListener(i,t.events[e][i])})},t.open=function(){v(this)},t.close=function(){w(this)},t.goTo=function(e){x(e,this)},t.next=function(){k(this)},t.previous=function(){S(this)},t.select=function(e){C(this,null,e)},t.search=function(e,t,i){return d(e,t,i)}}return function e(t){this.options=t,this.id=e.instances=(e.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(e){var t=e.name,i=e.options,s=e.resultsList,r=e.resultItem;for(var o in i)if("object"===n(i[o]))for(var l in e[o]||(e[o]={}),i[o])e[o][l]=i[o][l];else e[o]=i[o];e.selector=e.selector||"#"+t,s.destination=s.destination||e.selector,s.id=s.id||t+"_list_"+e.id,r.id=r.id||t+"_result",e.input=a(e.selector)}(this),L.call(this,e),T(this)}},e.exports=t()}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(816),t=i.n(e);class s{constructor(e,t){this.wrapper=e,this.storage=t,this.filters={}}prefillFromStorage(e){const t=this.storage.get(e);t&&(Object.keys(t).forEach(e=>{if("object"==typeof t[e]&&null!==t[e]&&"from"in t[e]&&"to"in t[e])return;const i=t[e];this.wrapper.querySelectorAll(`input[data-dataTable-filter="${e}"]`).forEach(e=>{const t=e.value.toLowerCase();Array.isArray(i)?i.filter(e=>null!==e).map(e=>e.toLowerCase()).includes(t)&&(e.checked=!0):null!==i&&t===i.toLowerCase()&&(e.checked=!0)})}),Object.entries(t).filter(([e,t])=>"object"==typeof t&&null!==t&&"from"in t&&"to"in t).forEach(([e,t])=>{const i=this.wrapper.querySelector(`input[name="${e}[from]"]`),s=this.wrapper.querySelector(`input[name="${e}[to]"]`);i&&t.from&&(i.valueAsDate=new Date(t.from)),s&&t.to&&(s.valueAsDate=new Date(t.to))}),this.storage.clearAll())}getActiveFilters(){const e={};return this.wrapper.querySelectorAll("[data-dataTable-filter]:checked").forEach(t=>{const i=t.getAttribute("data-dataTable-filter"),s=t.value.toLowerCase();e[i]?Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]:e[i]=s}),this.wrapper.querySelectorAll('[data-dataTable-filter*="[]"]').forEach(t=>{const i=t.getAttribute("data-dataTable-filter").replace("[]",""),s=t.querySelector(`input[name="${i}[from]"]`),r=t.querySelector(`input[name="${i}[to]"]`);if(s&&r&&s.valueAsDate&&r.valueAsDate){const t=new Date(s.valueAsNumber).setUTCHours(0,0,0),n=new Date(r.valueAsNumber).setUTCHours(23,59,59);e[i]={from:t,to:n}}}),e}updateDropdownState(e){this.wrapper.querySelectorAll(".filter-dropdown [data-dropdown-toggle]").forEach(e=>{e.classList.remove("active")}),Object.entries(e).forEach(([e,t])=>{if(t&&"object"==typeof t&&"from"in t&&"to"in t){const t=this.wrapper.querySelector(`[data-datatable-filter="${e}[]"]`)?.closest(".filter-dropdown"),i=t.querySelector("[data-dropdown-toggle]");return void(i&&i.classList.add("active"))}const i=this.wrapper.querySelector(`[data-dataTable-filter="${e}"]:checked`)?.closest(".filter-dropdown"),s=i.querySelector("[data-dropdown-toggle]");s&&s.classList.add("active")})}applyFiltersToRows(e,t=""){const i=this.getActiveFilters(),s=t.toLowerCase();return e.forEach(e=>{e.active=!e.searchables||e.searchables.toLowerCase().includes(s);for(const[t,s]of Object.entries(i)){const i=e.filterables[t];s&&"object"==typeof s&&"from"in s&&"to"in s?e.active=e.active&&i>=s.from&&i<=s.to:Array.isArray(s)?e.active=e.active&&s.includes(i?.toLowerCase()):e.active=e.active&&(Array.isArray(i)?i.map(e=>e.toLowerCase()).includes(s):i?.toLowerCase()===s)}}),e}resetAll(){this.wrapper.querySelectorAll('[data-dataTable-filter], [data-dataTable-filter*="[]"] input').forEach(e=>{"radio"===e.type||"checkbox"===e.type?e.checked=!1:e.value=""}),this.storage.clearAll()}resetOne(e){this.wrapper.querySelectorAll(`[data-dataTable-filter][name^="${e}"], [data-dataTable-filter*="[]"] [name^="${e}"]`).forEach(e=>{"radio"===e.type||"checkbox"===e.type?e.checked=!1:e.value=""})}}class r{static calculate(e){return e.filter(e=>e.active).reduce((e,t)=>(Object.entries(t.summables).forEach(([t,i])=>e[t]=(e[t]||0)+i),e),{})}static render(e,t){const i=this.calculate(t);e.querySelectorAll("[data-dataTable-summable]").forEach(e=>{const t=e.getAttribute("data-dataTable-summable");e.innerHTML=void 0!==i[t]?(e=>{e=(e+"").replace(/[^0-9+\-Ee.]/g,"");const t=isFinite(+e)?+e:0,i=isFinite(0)?Math.abs(0):0;let s="";return s=(i?function(e,t){if(-1===(""+e).indexOf("e"))return+(Math.round(e+"e+"+t)+"e-"+t);{const i=(""+e).split("e");let s="";return+i[1]+t>0&&(s="+"),(+(Math.round(+i[0]+"e"+s+(+i[1]+t))+"e-"+t)).toFixed(t)}}(t,i).toString():""+Math.round(t)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g," ")),(s[1]||"").length<i&&(s[1]=s[1]||"",s[1]+=new Array(i-s[1].length+1).join("0")),s.join(",")})(i[t]):0})}}class n{constructor(e){this.columns=e,this.sortAsc=!1,this.sortOnPrevious=null}attachListeners(e,t,i){this.columns.forEach(s=>s.addEventListener("click",()=>{const r=s.getAttribute("data-dataTable-sort");r===this.sortOnPrevious?this.sortAsc=!this.sortAsc:this.sortAsc=!0,this.sortOnPrevious=r,this.columns.forEach(e=>e.querySelector(".sorting-icon")?.setAttribute("aria-sort","none")),s.querySelector(".sorting-icon")?.setAttribute("aria-sort",this.sortAsc?"ascending":"descending"),e.sort((e,t)=>{const i=e.sort[r],s=t.sort[r];return void 0===i?1:void 0===s?-1:i<s?this.sortAsc?-1:1:i>s?this.sortAsc?1:-1:0}),t.update(e.filter(e=>e.active).map(e=>e.markup)),i.scrollTop=0}))}}class o{constructor(e,t,i){this.wrapper=e,this.tbody=t,this.scrollElem=i,this.cluster=null}init(e){this.cluster=new(t())({rows:e.filter(e=>e.active).map(e=>e.markup),scrollElem:this.scrollElem,contentElem:this.tbody,no_data_class:"clusterize-loading",callbacks:{clusterChanged:()=>{r.render(this.wrapper,e);const t=this.wrapper.querySelector("[data-dataTable-result-count]");t&&(t.innerText=e.filter(e=>e.active).length),document.dispatchEvent(new CustomEvent("dataTableClusterWasChanged",{bubbles:!0,cancelable:!1}))}}})}update(e){this.cluster&&(this.cluster.update(e.filter(e=>e.active).map(e=>e.markup)),this.scrollElem.scrollTop=0)}}class a{constructor(e="dataTableFilters"){this.storageKey=e}clearAll(){localStorage.removeItem(this.storageKey)}get(e){const t=localStorage.getItem(this.storageKey);return t&&JSON.parse(t)[e]||{}}set(e){localStorage.setItem(this.storageKey,JSON.stringify(e))}}const l=6371008.8,c={centimeters:637100880,centimetres:637100880,degrees:360/(2*Math.PI),feet:20902260.511392,inches:39.37*l,kilometers:6371.0088,kilometres:6371.0088,meters:l,metres:l,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:l/1852,radians:1,yards:6967335.223679999},h=Object.defineProperty,u=Object.defineProperties,d=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,f=(e,t,i)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,b=(e,t)=>{for(var i in t||(t={}))p.call(t,i)&&f(e,i,t[i]);if(g)for(var i of g(t))m.call(t,i)&&f(e,i,t[i]);return e},y=(e,t)=>u(e,d(t));function v(e,t,i={}){var s=A(e),r=A(t),n=I(r[1]-s[1]),o=I(r[0]-s[0]),a=I(s[1]),l=I(r[1]),c=Math.pow(Math.sin(n/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return S(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i.units)}function w(e,t,i={}){const s={type:"Feature"};return(0===i.id||i.id)&&(s.id=i.id),i.bbox&&(s.bbox=i.bbox),s.properties=t||{},s.geometry=e,s}function x(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(e[0])||!T(e[1]))throw new Error("coordinates must contain numbers");return w({type:"Point",coordinates:e},t,i)}function k(e,t,i={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return w({type:"LineString",coordinates:e},t,i)}function S(e,t="kilometers"){const i=c[t];if(!i)throw new Error(t+" units is invalid");return e*i}function C(e){return e%(2*Math.PI)*180/Math.PI}function I(e){return e%360*Math.PI/180}function E(e,t="kilometers",i="kilometers"){if(!(e>=0))throw new Error("length must be a positive number");return S(function(e,t="kilometers"){const i=c[t];if(!i)throw new Error(t+" units is invalid");return e/i}(e,t),i)}function T(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function A(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return[...e.geometry.coordinates];if("Point"===e.type)return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function _(e,t,i){if(!e)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.geometry.type)}function z(e,t,i){if(null!==e)for(var s,r,n,o,a,l,c,h,u=0,d=0,g=e.type,p="FeatureCollection"===g,m="Feature"===g,f=p?e.features.length:1,b=0;b<f;b++){a=(h=!!(c=p?e.features[b].geometry:m?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var y=0;y<a;y++){var v=0,w=0;if(null!==(o=h?c.geometries[y]:c)){l=o.coordinates;var x=o.type;switch(u=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(l,d,b,v,w))return!1;d++,v++;break;case"LineString":case"MultiPoint":for(s=0;s<l.length;s++){if(!1===t(l[s],d,b,v,w))return!1;d++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(s=0;s<l.length;s++){for(r=0;r<l[s].length-u;r++){if(!1===t(l[s][r],d,b,v,w))return!1;d++}"MultiLineString"===x&&v++,"Polygon"===x&&w++}"Polygon"===x&&v++;break;case"MultiPolygon":for(s=0;s<l.length;s++){for(w=0,r=0;r<l[s].length;r++){for(n=0;n<l[s][r].length-u;n++){if(!1===t(l[s][r][n],d,b,v,w))return!1;d++}w++}v++}break;case"GeometryCollection":for(s=0;s<o.geometries.length;s++)if(!1===z(o.geometries[s],t,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(e,t){!function(e,t){var i,s,r,n,o,a,l,c,h,u,d=0,g="FeatureCollection"===e.type,p="Feature"===e.type,m=g?e.features.length:1;for(i=0;i<m;i++){for(a=g?e.features[i].geometry:p?e.geometry:e,c=g?e.features[i].properties:p?e.properties:{},h=g?e.features[i].bbox:p?e.bbox:void 0,u=g?e.features[i].id:p?e.id:void 0,o=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(n=l?a.geometries[r]:a))switch(n.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(n,d,c,h,u))return!1;break;case"GeometryCollection":for(s=0;s<n.geometries.length;s++)if(!1===t(n.geometries[s],d,c,h,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,c,h,u))return!1;d++}}(e,function(e,i,s,r,n){var o,a=null===e?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==t(w(e,s,{bbox:r,id:n}),i,0)&&void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var l=0;l<e.coordinates.length;l++){var c=e.coordinates[l];if(!1===t(w({type:o,coordinates:c},s),i,l))return!1}})}function P(e,t){M(e,function(e,i,s){var r=0;if(e.geometry){var n=e.geometry.type;if("Point"!==n&&"MultiPoint"!==n){var o,a=0,l=0,c=0;return!1!==z(e,function(n,h,u,d,g){if(void 0===o||i>a||d>l||g>c)return o=n,a=i,l=d,c=g,void(r=0);var p=k([o,n],e.properties);if(!1===t(p,i,s,g,r))return!1;r++,o=n})&&void 0}}})}function O(e,t,i={}){if(!e||!t)throw new Error("lines and pt are required arguments");const s=A(t);let r=x([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),n=0;return M(e,function(e,o,a){const l=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e);for(let e=0;e<l.length-1;e++){const o=x(l[e]),c=A(o),h=x(l[e+1]),u=A(h),d=v(o,h,i);let g,p;u[0]===s[0]&&u[1]===s[1]?[g,p]=[u,!0]:c[0]===s[0]&&c[1]===s[1]?[g,p]=[c,!1]:[g,p]=F(c,u,s);const m=x(g,{dist:v(t,g,i),multiFeatureIndex:a,location:n+v(o,g,i)});m.properties.dist<r.properties.dist&&(r=y(b({},m),{properties:y(b({},m.properties),{index:p?e+1:e})})),n+=d}}),r}function $(e,t){const[i,s,r]=e,[n,o,a]=t;return[s*a-r*o,r*n-i*a,i*o-s*n]}function R(e){const t=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2))}(e);return[e[0]/t,e[1]/t,e[2]/t]}function D(e){const t=I(e[1]),i=I(e[0]);return[Math.cos(t)*Math.cos(i),Math.cos(t)*Math.sin(i),Math.sin(t)]}function B(e){const[t,i,s]=e,r=Math.min(Math.max(s,-1),1),n=C(Math.asin(r));return[C(Math.atan2(i,t)),n]}function F(e,t,i){const s=D(e),r=D(t),n=D(i),o=$(s,r);if(0===o[0]&&0===o[1]&&0===o[2])return q(s,r)>0?[[...t],!0]:[[...i],!1];const a=$(o,n);if(0===a[0]&&0===a[1]&&0===a[2])return[[...t],!0];const l=R($(a,o)),c=[-l[0],-l[1],-l[2]],h=q(n,l)>q(n,c)?l:c,u=R(o),d=q($(s,h),u),g=q($(h,r),u);return d>=0&&g>=0?[B(h),!1]:q(s,n)>q(r,n)?[[...e],!1]:[[...t],!0]}function q(e,t){return e[0]*t[0]+e[1]*t[1]}function G(e,t,i={}){const s=A(e),r=A(t);r[0]+=r[0]-s[0]>180?-360:s[0]-r[0]>180?360:0;const n=function(e,t,i){const s=i=void 0===i?l:Number(i),r=e[1]*Math.PI/180,n=t[1]*Math.PI/180,o=n-r;let a=Math.abs(t[0]-e[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);const c=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),h=Math.abs(c)>1e-11?o/c:Math.cos(r);return Math.sqrt(o*o+h*h*a*a)*s}(s,r);return E(n,"meters",i.units)}class N{constructor(e,t,i){this.wrapper=e,this.config=t,this.modalManager=i,this.placesControl=null,this.mainFeatureGroup=L.featureGroup(),this.routePolylines=[],this.map=L.map(this.wrapper,{scrollWheelZoom:!0,minZoom:1,maxZoom:21}),this.config.tileLayerUrls.forEach(e=>{L.tileLayer(e).addTo(this.map)}),this.defaultPolylineStyle={color:this.config.polylineColor,weight:1.5,opacity:.5,smoothFactor:1,overrideExisting:!0,detectColors:!0},this.inactivePolylineStyle={weight:0,opacity:0},this.map.on("click",e=>this._handleMapClick(e)),this.map.on("popupclose",()=>this._resetRouteStyles()),this.map.on("popupopen",e=>this._handlePopupOpen(e))}_resetRouteStyles(){this.routePolylines.forEach(e=>{e.polyline.setStyle(this.defaultPolylineStyle)})}_handlePopupOpen(e){const t=e.popup.getElement();t&&t.querySelectorAll("a[data-model-content-url]").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.modalManager.open(e.getAttribute("data-model-content-url"))})})}_handleMapClick(e){const t=x([e.latlng.lng,e.latlng.lat]);this._resetRouteStyles();const i=[],s=[];if(this.routePolylines.forEach(e=>{const r=k(e.latlngs.map(e=>[e.lng,e.lat]));(function(e,t,i={}){var s,r;const n=null!=(s=i.method)?s:"geodesic",o=null!=(r=i.units)?r:"kilometers";if(!e)throw new Error("pt is required");if(Array.isArray(e)?e=x(e):"Point"===e.type?e=w(e):_(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=k(t):"LineString"===t.type?t=w(t):_(t,"LineString","line");let a=1/0;const l=e.geometry.coordinates;return P(t,e=>{if(e){const t=e.geometry.coordinates[0],i=e.geometry.coordinates[1],s=function(e,t,i,s){if("geodesic"===s.method)return O(k([t,i]).geometry,e,{units:"degrees"}).properties.dist;const r=[i[0]-t[0],i[1]-t[1]],n=q([e[0]-t[0],e[1]-t[1]],r);if(n<=0)return G(e,t,{units:"degrees"});const o=q(r,r);if(o<=n)return G(e,i,{units:"degrees"});const a=n/o;return G(e,[t[0]+a*r[0],t[1]+a*r[1]],{units:"degrees"})}(l,t,i,{method:n});s<a&&(a=s)}}),E(a,"degrees",o)})(t,r,{units:"meters"})<=100?i.push(e):s.push(e)}),0===i.length)return;s.forEach(e=>{e.polyline.setStyle(this.inactivePolylineStyle)});const r=`\n            <div class="m-4 text-sm max-h-50 overflow-y-auto">\n                <div class="font-medium">${i.length} nearby route(s):</div>\n                 <ul class="divide-default divide-y divide-gray-200">\n                    ${i.map(e=>`\n                     <li class="py-2">\n                      <a href="#" title="${e.route.name}" class="block truncate font-medium text-blue-600 hover:underline" \n                        data-model-content-url="${e.route.activityUrl}">\n                        ${e.route.name}\n                      </a>\n                      <div class="flex items-center justify-between text-xs text-gray-500">\n                        <div>${e.route.startDate}</div>\n                        <div>${e.route.distance}</div>\n                      </div>\n                    </li>`).join("")}\n                </ul>\n            </div>`;L.popup(e.latlng,{content:r,maxWidth:300,minWidth:300}).openOn(this.map)}redraw(e){e=e.filter(e=>e.active),this.mainFeatureGroup.clearLayers(),this.routePolylines=[],this.placesControl&&this.map.removeControl(this.placesControl);const t=[],i=new Map,s=L.featureGroup(),r=(e=>{const t=e.reduce((e,t)=>{const i=t.startLocation.state;return i&&(e[i]=(e[i]||0)+1),e},{}),i=Object.keys(t).reduce((e,i)=>t[e]>t[i]?e:i,"");return i||null})(e);e.forEach(e=>{const{countryCode:t,state:n}=e.startLocation;i.has(t)||i.set(t,L.featureGroup());const o=L.Polyline.fromEncoded(e.encodedPolyline).getLatLngs(),a=L.polyline(o,this.defaultPolylineStyle).addTo(i.get(t));this.routePolylines.push({route:e,polyline:a,latlngs:o}),r===n&&L.polyline(o).addTo(s)}),i.forEach((e,i)=>{e.addTo(this.mainFeatureGroup),t.push({countryCode:i,bounds:e.getBounds()})}),this.mainFeatureGroup.addTo(this.map),this.placesControl=L.control.flyToPlaces({places:t}),this.placesControl.addTo(this.map),s.getBounds().isValid()&&this.map.fitBounds(s.getBounds())}}class H{constructor(e,t){this.wrapper=e,this.heatmap=e.querySelector("[data-leaflet-routes]"),this.resetBtn=e.querySelector("[data-dataTable-reset]"),this.config=JSON.parse(this.heatmap.getAttribute("data-heatmap-config")),this.filterManager=new s(e,new a),this.drawer=new N(this.heatmap,this.config,t)}async render(){this.wrapper.querySelectorAll('input[type="date"][data-default-to-today]').forEach(e=>e.valueAsDate=new Date);const e=JSON.parse(this.heatmap.getAttribute("data-leaflet-routes")),t=()=>{const t=this.filterManager.getActiveFilters();this.filterManager.updateDropdownState(t);const i=this.filterManager.applyFiltersToRows(e);this.drawer.redraw(i),this.resetBtn.classList.toggle("hidden",!(Object.keys(t).length>0));const s=this.wrapper.querySelector("[data-dataTable-result-count]");s&&(s.innerText=i.filter(e=>e.active).length)};t(),this.wrapper.querySelectorAll("[data-dataTable-filter]").forEach(e=>e.addEventListener("input",t)),this.resetBtn&&this.resetBtn.addEventListener("click",e=>{e.preventDefault(),this.filterManager.resetAll(),t()}),this.wrapper.querySelectorAll("[data-datatable-filter-clear]").forEach(e=>{e.addEventListener("click",i=>{i.preventDefault();const s=e.getAttribute("data-datatable-filter-clear");this.filterManager.resetOne(s),t()})})}}var j=i(879),Z=i.n(j);var W={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function X(e){W=e}var Y={exec:()=>null};function V(e,t=""){let i="string"==typeof e?e:e.source,s={replace:(e,t)=>{let r="string"==typeof t?t:t.source;return r=r.replace(J.caret,"$1"),i=i.replace(e,r),s},getRegex:()=>new RegExp(i,t)};return s}var U=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),J={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Q=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,K=/(?:[*+-]|\d{1,9}[.)])/,ee=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,te=V(ee).replace(/bull/g,K).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ie=V(ee).replace(/bull/g,K).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),se=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,re=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ne=V(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",re).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),oe=V(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,K).getRegex(),ae="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",le=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ce=V("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",le).replace("tag",ae).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),he=V(se).replace("hr",Q).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ae).getRegex(),ue={blockquote:V(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",he).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:ne,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Q,html:ce,lheading:te,list:oe,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:he,table:Y,text:/^[^\n]+/},de=V("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Q).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ae).getRegex(),ge={...ue,lheading:ie,table:de,paragraph:V(se).replace("hr",Q).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",de).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ae).getRegex()},pe={...ue,html:V("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",le).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Y,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:V(se).replace("hr",Q).replace("heading"," *#{1,6} *[^\n]").replace("lheading",te).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},me=/^( {2,}|\\)\n(?!\s*$)/,fe=/[\p{P}\p{S}]/u,be=/[\s\p{P}\p{S}]/u,ye=/[^\s\p{P}\p{S}]/u,ve=V(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,be).getRegex(),we=/(?!~)[\p{P}\p{S}]/u,xe=V(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",U?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),ke=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Se=V(ke,"u").replace(/punct/g,fe).getRegex(),Ce=V(ke,"u").replace(/punct/g,we).getRegex(),Ie="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ee=V(Ie,"gu").replace(/notPunctSpace/g,ye).replace(/punctSpace/g,be).replace(/punct/g,fe).getRegex(),Te=V(Ie,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,we).getRegex(),Le=V("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ye).replace(/punctSpace/g,be).replace(/punct/g,fe).getRegex(),Ae=V(/\\(punct)/,"gu").replace(/punct/g,fe).getRegex(),_e=V(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ze=V(le).replace("(?:--\x3e|$)","--\x3e").getRegex(),Me=V("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ze).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Pe=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Oe=V(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Pe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$e=V(/^!?\[(label)\]\[(ref)\]/).replace("label",Pe).replace("ref",re).getRegex(),Re=V(/^!?\[(ref)\](?:\[\])?/).replace("ref",re).getRegex(),De=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Be={_backpedal:Y,anyPunctuation:Ae,autolink:_e,blockSkip:xe,br:me,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Y,emStrongLDelim:Se,emStrongRDelimAst:Ee,emStrongRDelimUnd:Le,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:Oe,nolink:Re,punctuation:ve,reflink:$e,reflinkSearch:V("reflink|nolink(?!\\()","g").replace("reflink",$e).replace("nolink",Re).getRegex(),tag:Me,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Y},Fe={...Be,link:V(/^!?\[(label)\]\((.*?)\)/).replace("label",Pe).getRegex(),reflink:V(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Pe).getRegex()},qe={...Be,emStrongRDelimAst:Te,emStrongLDelim:Ce,url:V(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",De).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:V(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",De).getRegex()},Ge={...qe,br:V(me).replace("{2,}","*").getRegex(),text:V(qe.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ne={normal:ue,gfm:ge,pedantic:pe},He={normal:Be,gfm:qe,breaks:Ge,pedantic:Fe},je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ze=e=>je[e];function We(e,t){if(t){if(J.escapeTest.test(e))return e.replace(J.escapeReplace,Ze)}else if(J.escapeTestNoEncode.test(e))return e.replace(J.escapeReplaceNoEncode,Ze);return e}function Xe(e){try{e=encodeURI(e).replace(J.percentDecode,"%")}catch{return null}return e}function Ye(e,t){let i=e.replace(J.findPipe,(e,t,i)=>{let s=!1,r=t;for(;--r>=0&&"\\"===i[r];)s=!s;return s?"|":" |"}),s=i.split(J.splitPipe),r=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(J.slashPipe,"|");return s}function Ve(e,t,i){let s=e.length;if(0===s)return"";let r=0;for(;r<s;){let n=e.charAt(s-r-1);if(n!==t||i){if(n===t||!i)break;r++}else r++}return e.slice(0,s-r)}function Ue(e,t,i,s,r){let n=t.href,o=t.title||null,a=e[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:i,href:n,title:o,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,l}var Je=class{options;rules;lexer;constructor(e){this.options=e||W}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Ve(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],i=function(e,t,i){let s=e.match(i.other.indentCodeCompensation);if(null===s)return t;let r=s[1];return t.split("\n").map(e=>{let t=e.match(i.other.beginningSpace);if(null===t)return e;let[s]=t;return s.length>=r.length?e.slice(r.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=Ve(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Ve(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=Ve(t[0],"\n").split("\n"),i="",s="",r=[];for(;e.length>0;){let t,n=!1,o=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))o.push(e[t]),n=!0;else{if(n)break;o.push(e[t])}e=e.slice(t);let a=o.join("\n"),l=a.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}\n${a}`:a,s=s?`${s}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,r,!0),this.lexer.state.top=c,0===e.length)break;let h=r.at(-1);if("code"===h?.type)break;if("blockquote"===h?.type){let t=h,n=t.raw+"\n"+e.join("\n"),o=this.blockquote(n);r[r.length-1]=o,i=i.substring(0,i.length-t.raw.length)+o.raw,s=s.substring(0,s.length-t.text.length)+o.text;break}if("list"===h?.type){let t=h,n=t.raw+"\n"+e.join("\n"),o=this.list(n);r[r.length-1]=o,i=i.substring(0,i.length-h.raw.length)+o.raw,s=s.substring(0,s.length-t.raw.length)+o.raw,e=n.substring(r.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:i,tokens:r,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim(),s=i.length>1,r={type:"list",raw:"",ordered:s,start:s?+i.slice(0,-1):"",loose:!1,items:[]};i=s?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=s?i:"[*+-]");let n=this.rules.other.listItemRegex(i),o=!1;for(;e;){let i=!1,s="",a="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;s=t[0],e=e.substring(s.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),c=e.split("\n",1)[0],h=!l.trim(),u=0;if(this.options.pedantic?(u=2,a=l.trimStart()):h?u=t[1].length+1:(u=t[2].search(this.rules.other.nonSpaceChar),u=u>4?1:u,a=l.slice(u),u+=t[1].length),h&&this.rules.other.blankLine.test(c)&&(s+=c+"\n",e=e.substring(c.length+1),i=!0),!i){let t=this.rules.other.nextBulletRegex(u),i=this.rules.other.hrRegex(u),r=this.rules.other.fencesBeginRegex(u),n=this.rules.other.headingBeginRegex(u),o=this.rules.other.htmlBeginRegex(u);for(;e;){let d,g=e.split("\n",1)[0];if(c=g,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),d=c):d=c.replace(this.rules.other.tabCharGlobal,"    "),r.test(c)||n.test(c)||o.test(c)||t.test(c)||i.test(c))break;if(d.search(this.rules.other.nonSpaceChar)>=u||!c.trim())a+="\n"+d.slice(u);else{if(h||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||r.test(l)||n.test(l)||i.test(l))break;a+="\n"+c}!h&&!c.trim()&&(h=!0),s+=g+"\n",e=e.substring(g.length+1),l=d.slice(u)}}r.loose||(o?r.loose=!0:this.rules.other.doubleBlankLine.test(s)&&(o=!0)),r.items.push({type:"list_item",raw:s,task:!!this.options.gfm&&this.rules.other.listIsTask.test(a),loose:!1,text:a,tokens:[]}),r.raw+=s}let a=r.items.at(-1);if(!a)return;a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd(),r.raw=r.raw.trimEnd();for(let e of r.items){if(this.lexer.state.top=!1,e.tokens=this.lexer.blockTokens(e.text,[]),e.task){if(e.text=e.text.replace(this.rules.other.listReplaceTask,""),"text"===e.tokens[0]?.type||"paragraph"===e.tokens[0]?.type){e.tokens[0].raw=e.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),e.tokens[0].text=e.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let e=this.lexer.inlineQueue.length-1;e>=0;e--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[e].src)){this.lexer.inlineQueue[e].src=this.lexer.inlineQueue[e].src.replace(this.rules.other.listReplaceTask,"");break}}let t=this.rules.other.listTaskCheckbox.exec(e.raw);if(t){let i={type:"checkbox",raw:t[0]+" ",checked:"[ ]"!==t[0]};e.checked=i.checked,r.loose?e.tokens[0]&&["paragraph","text"].includes(e.tokens[0].type)&&"tokens"in e.tokens[0]&&e.tokens[0].tokens?(e.tokens[0].raw=i.raw+e.tokens[0].raw,e.tokens[0].text=i.raw+e.tokens[0].text,e.tokens[0].tokens.unshift(i)):e.tokens.unshift({type:"paragraph",raw:i.raw,text:i.raw,tokens:[i]}):e.tokens.unshift(i)}}if(!r.loose){let t=e.tokens.filter(e=>"space"===e.type),i=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw));r.loose=i}}if(r.loose)for(let e of r.items){e.loose=!0;for(let t of e.tokens)"text"===t.type&&(t.type="paragraph")}return r}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let i=Ye(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===s.length){for(let e of s)this.rules.other.tableAlignRight.test(e)?n.align.push("right"):this.rules.other.tableAlignCenter.test(e)?n.align.push("center"):this.rules.other.tableAlignLeft.test(e)?n.align.push("left"):n.align.push(null);for(let e=0;e<i.length;e++)n.header.push({text:i[e],tokens:this.lexer.inline(i[e]),header:!0,align:n.align[e]});for(let e of r)n.rows.push(Ye(e,n.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:n.align[t]})));return n}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=Ve(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let i=0;for(let s=0;s<e.length;s++)if("\\"===e[s])s++;else if(e[s]===t[0])i++;else if(e[s]===t[1]&&(i--,i<0))return s;return i>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let i=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(i);e&&(i=e[1],s=e[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(i=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i.slice(1):i.slice(1,-1)),Ue(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let e=t[(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return Ue(i,e,i[0],this.lexer,this.rules)}}emStrong(e,t,i=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!(!s||s[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!s[1]&&!s[2]||!i||this.rules.inline.punctuation.exec(i))){let i,r,n=[...s[0]].length-1,o=n,a=0,l="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(s=l.exec(t));){if(i=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!i)continue;if(r=[...i].length,s[3]||s[4]){o+=r;continue}if((s[5]||s[6])&&n%3&&!((n+r)%3)){a+=r;continue}if(o-=r,o>0)continue;r=Math.min(r,r+o+a);let t=[...s[0]][0].length,l=e.slice(0,n+s.index+t+r);if(Math.min(n,r)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),s=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&s&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,i;return"@"===t[2]?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,i;if("@"===t[2])e=t[0],i="mailto:"+e;else{let s;do{s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(s!==t[0]);e=t[0],i="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},Qe=class e{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||W,this.options.tokenizer=this.options.tokenizer||new Je,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:J,block:Ne.normal,inline:He.normal};this.options.pedantic?(t.block=Ne.pedantic,t.inline=He.pedantic):this.options.gfm&&(t.block=Ne.gfm,this.options.breaks?t.inline=He.breaks:t.inline=He.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ne,inline:He}}static lex(t,i){return new e(i).lex(t)}static lexInline(t,i){return new e(i).inlineTokens(t)}lex(e){e=e.replace(J.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){for(this.options.pedantic&&(e=e.replace(J.tabCharGlobal,"    ").replace(J.spaceLine,""));e;){let s;if(this.options.extensions?.block?.some(i=>!!(s=i.call({lexer:this},e,t))&&(e=e.substring(s.raw.length),t.push(s),!0)))continue;if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length);let i=t.at(-1);1===s.raw.length&&void 0!==i?i.raw+="\n":t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length);let i=t.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+s.raw,i.text+="\n"+s.text,this.inlineQueue.at(-1).src=i.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length);let i=t.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+s.raw,i.text+="\n"+s.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},t.push(s));continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}let r=e;if(this.options.extensions?.startBlock){let t,i=1/0,s=e.slice(1);this.options.extensions.startBlock.forEach(e=>{t=e.call({lexer:this},s),"number"==typeof t&&t>=0&&(i=Math.min(i,t))}),i<1/0&&i>=0&&(r=e.substring(0,i+1))}if(this.state.top&&(s=this.tokenizer.paragraph(r))){let n=t.at(-1);i&&"paragraph"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+s.raw,n.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(s),i=r.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length);let i=t.at(-1);"text"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+s.raw,i.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(s);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,s=e,r=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(s));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(s));)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(s));)i=r[2]?r[2].length:0,s=s.slice(0,r.index+i)+"["+"a".repeat(r[0].length-i-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let n=!1,o="";for(;e;){let i;if(n||(o=""),n=!1,this.options.extensions?.inline?.some(s=>!!(i=s.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))continue;if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length);let s=t.at(-1);"text"===i.type&&"text"===s?.type?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,s,o)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}let r=e;if(this.options.extensions?.startInline){let t,i=1/0,s=e.slice(1);this.options.extensions.startInline.forEach(e=>{t=e.call({lexer:this},s),"number"==typeof t&&t>=0&&(i=Math.min(i,t))}),i<1/0&&i>=0&&(r=e.substring(0,i+1))}if(i=this.tokenizer.inlineText(r)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(o=i.raw.slice(-1)),n=!0;let s=t.at(-1);"text"===s?.type?(s.raw+=i.raw,s.text+=i.text):t.push(i);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},Ke=class{options;parser;constructor(e){this.options=e||W}space(e){return""}code({text:e,lang:t,escaped:i}){let s=(t||"").match(J.notSpaceStart)?.[0],r=e.replace(J.endingNewline,"")+"\n";return s?'<pre><code class="language-'+We(s)+'">'+(i?r:We(r,!0))+"</code></pre>\n":"<pre><code>"+(i?r:We(r,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,i=e.start,s="";for(let t=0;t<e.items.length;t++){let i=e.items[t];s+=this.listitem(i)}let r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+s+"</"+r+">\n"}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",i="";for(let t=0;t<e.header.length;t++)i+=this.tablecell(e.header[t]);t+=this.tablerow({text:i});let s="";for(let t=0;t<e.rows.length;t++){let r=e.rows[t];i="";for(let e=0;e<r.length;e++)i+=this.tablecell(r[e]);s+=this.tablerow({text:i})}return s&&(s=`<tbody>${s}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+s+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${We(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){let s=this.parser.parseInline(i),r=Xe(e);if(null===r)return s;let n='<a href="'+(e=r)+'"';return t&&(n+=' title="'+We(t)+'"'),n+=">"+s+"</a>",n}image({href:e,title:t,text:i,tokens:s}){s&&(i=this.parser.parseInline(s,this.parser.textRenderer));let r=Xe(e);if(null===r)return We(i);let n=`<img src="${e=r}" alt="${i}"`;return t&&(n+=` title="${We(t)}"`),n+=">",n}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:We(e.text)}},et=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},tt=class e{options;renderer;textRenderer;constructor(e){this.options=e||W,this.options.renderer=this.options.renderer||new Ke,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new et}static parse(t,i){return new e(i).parse(t)}static parseInline(t,i){return new e(i).parseInline(t)}parse(e){let t="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let e=s,i=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==i||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(e.type)){t+=i||"";continue}}let r=s;switch(r.type){case"space":t+=this.renderer.space(r);break;case"hr":t+=this.renderer.hr(r);break;case"heading":t+=this.renderer.heading(r);break;case"code":t+=this.renderer.code(r);break;case"table":t+=this.renderer.table(r);break;case"blockquote":t+=this.renderer.blockquote(r);break;case"list":t+=this.renderer.list(r);break;case"checkbox":t+=this.renderer.checkbox(r);break;case"html":t+=this.renderer.html(r);break;case"def":t+=this.renderer.def(r);break;case"paragraph":t+=this.renderer.paragraph(r);break;case"text":t+=this.renderer.text(r);break;default:{let e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return t}parseInline(e,t=this.renderer){let i="";for(let s=0;s<e.length;s++){let r=e[s];if(this.options.extensions?.renderers?.[r.type]){let e=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){i+=e||"";continue}}let n=r;switch(n.type){case"escape":case"text":i+=t.text(n);break;case"html":i+=t.html(n);break;case"link":i+=t.link(n);break;case"image":i+=t.image(n);break;case"checkbox":i+=t.checkbox(n);break;case"strong":i+=t.strong(n);break;case"em":i+=t.em(n);break;case"codespan":i+=t.codespan(n);break;case"br":i+=t.br(n);break;case"del":i+=t.del(n);break;default:{let e='Token with "'+n.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}},it=class{options;block;constructor(e){this.options=e||W}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Qe.lex:Qe.lexInline}provideParser(){return this.block?tt.parse:tt.parseInline}},st=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=tt;Renderer=Ke;TextRenderer=et;Lexer=Qe;Tokenizer=Je;Hooks=it;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(let s of e)switch(i=i.concat(t.call(this,s)),s.type){case"table":{let e=s;for(let s of e.header)i=i.concat(this.walkTokens(s.tokens,t));for(let s of e.rows)for(let e of s)i=i.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=s;i=i.concat(this.walkTokens(e.items,t));break}default:{let e=s;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(s=>{let r=e[s].flat(1/0);i=i.concat(this.walkTokens(r,t))}):e.tokens&&(i=i.concat(this.walkTokens(e.tokens,t)))}}return i}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let i=t.renderers[e.name];t.renderers[e.name]=i?function(...t){let s=e.renderer.apply(this,t);return!1===s&&(s=i.apply(this,t)),s}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let i=t[e.level];i?i.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),i.extensions=t),e.renderer){let t=this.defaults.renderer||new Ke(this.defaults);for(let i in e.renderer){if(!(i in t))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let s=i,r=e.renderer[s],n=t[s];t[s]=(...e)=>{let i=r.apply(t,e);return!1===i&&(i=n.apply(t,e)),i||""}}i.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new Je(this.defaults);for(let i in e.tokenizer){if(!(i in t))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let s=i,r=e.tokenizer[s],n=t[s];t[s]=(...e)=>{let i=r.apply(t,e);return!1===i&&(i=n.apply(t,e)),i}}i.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new it;for(let i in e.hooks){if(!(i in t))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let s=i,r=e.hooks[s],n=t[s];it.passThroughHooks.has(i)?t[s]=e=>{if(this.defaults.async&&it.passThroughHooksRespectAsync.has(i))return(async()=>{let i=await r.call(t,e);return n.call(t,i)})();let s=r.call(t,e);return n.call(t,s)}:t[s]=(...e)=>{if(this.defaults.async)return(async()=>{let i=await r.apply(t,e);return!1===i&&(i=await n.apply(t,e)),i})();let i=r.apply(t,e);return!1===i&&(i=n.apply(t,e)),i}}i.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,s=e.walkTokens;i.walkTokens=function(e){let i=[];return i.push(s.call(this,e)),t&&(i=i.concat(t.call(this,e))),i}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Qe.lex(e,t??this.defaults)}parser(e,t){return tt.parse(e,t??this.defaults)}parseMarkdown(e){return(t,i)=>{let s={...i},r={...this.defaults,...s},n=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===s.async)return n(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return n(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return n(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=e),r.async)return(async()=>{let i=r.hooks?await r.hooks.preprocess(t):t,s=await(r.hooks?await r.hooks.provideLexer():e?Qe.lex:Qe.lexInline)(i,r),n=r.hooks?await r.hooks.processAllTokens(s):s;r.walkTokens&&await Promise.all(this.walkTokens(n,r.walkTokens));let o=await(r.hooks?await r.hooks.provideParser():e?tt.parse:tt.parseInline)(n,r);return r.hooks?await r.hooks.postprocess(o):o})().catch(n);try{r.hooks&&(t=r.hooks.preprocess(t));let i=(r.hooks?r.hooks.provideLexer():e?Qe.lex:Qe.lexInline)(t,r);r.hooks&&(i=r.hooks.processAllTokens(i)),r.walkTokens&&this.walkTokens(i,r.walkTokens);let s=(r.hooks?r.hooks.provideParser():e?tt.parse:tt.parseInline)(i,r);return r.hooks&&(s=r.hooks.postprocess(s)),s}catch(e){return n(e)}}}onError(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+We(i.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(i);throw i}}};function rt(e,t){return st.parse(e,t)}rt.options=rt.setOptions=function(e){return st.setOptions(e),rt.defaults=st.defaults,X(rt.defaults),rt},rt.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},rt.defaults=W,rt.use=function(...e){return st.use(...e),rt.defaults=st.defaults,X(rt.defaults),rt},rt.walkTokens=function(e,t){return st.walkTokens(e,t)},rt.parseInline=st.parseInline,rt.Parser=tt,rt.parser=tt.parse,rt.Renderer=Ke,rt.TextRenderer=et,rt.Lexer=Qe,rt.lexer=Qe.lex,rt.Tokenizer=Je,rt.Hooks=it,rt.parse=rt,rt.options,rt.setOptions,rt.use,rt.walkTokens,rt.parseInline,tt.parse,Qe.lex,rt.setOptions({gfm:!0,breaks:!0});class nt{constructor(e){this.chatModal=e,this.chatWrapper=e.querySelector(".chat--wrapper"),this.form=e.querySelector("form"),this.button=this.form.querySelector("button.send-message"),this.textInput=this.form.querySelector("input.message"),this.spinner=this.form.querySelector("div.spinner"),this.clearButton=e.querySelector("button.clear-chat"),this.placeholderIdle=this.textInput.getAttribute("data-placeholder-idle"),this.placeholderProcessing=this.textInput.getAttribute("data-placeholder-processing"),this.commands=JSON.parse(this.chatWrapper.getAttribute("data-chat-commands")||"{}"),this.autoCompleteJS=null,this.currentMessageRaw=""}toggleElements(e){this.textInput.disabled=e,this.button.disabled=e,this.button.classList.toggle("inline-flex",!e),this.button.classList.toggle("hidden",e),this.form.classList.toggle("disabled",e),this.spinner.classList.toggle("hidden",!e),this.textInput.value="",this.textInput.placeholder=e?this.placeholderProcessing:this.placeholderIdle}initAutoComplete(){this.commands&&0!==Object.keys(this.commands).length&&(this.autoCompleteJS=new(Z())({selector:()=>this.textInput,data:{src:Object.keys(this.commands)},threshold:1,trigger:e=>e.startsWith("/"),resultsList:{tabSelect:!0,position:"beforebegin"},resultItem:{highlight:!0,element:(e,t)=>{e.innerHTML=`\n                        <div>${t.match}</div>\n                        <div class="text-xs text-gray-500">${this.commands[t.value]}</div>\n                    `}},events:{input:{focus:()=>{this.autoCompleteJS.input.value.length&&this.autoCompleteJS.start()}}}}),this.autoCompleteJS.input.addEventListener("selection",e=>{const t=e.detail;this.autoCompleteJS.input.value=this.commands[t.selection.value]||""}))}handleSSE(e){const t=new EventSource(`/chat/sse?message=${encodeURIComponent(e)}`);t.addEventListener("fullMessage",e=>{this.chatWrapper.innerHTML+=e.data.replace(/\\n/g,"\n");const t=this.chatWrapper.querySelector("div.message-wrapper:last-child > div.message");this.currentMessageRaw=t?t.textContent.trim():""}),t.addEventListener("removeThinking",()=>{const e=this.chatWrapper.querySelector(".thinking");e?.remove()}),t.addEventListener("agentResponse",e=>{const t=this.chatWrapper.querySelector("div.message-wrapper:last-child > div.message");t&&(this.currentMessageRaw+=e.data.replace(/\\n/g,"\n"),t.innerHTML=rt.parse(this.currentMessageRaw))}),t.addEventListener("done",()=>{t.close(),this.currentMessageRaw="",this.toggleElements(!1),this.textInput.focus()})}bindEvents(){this.form.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(this.form);this.toggleElements(!0),this.handleSSE(t.get("form[message]"))}),this.textInput.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.form.requestSubmit())}),this.clearButton&&this.clearButton.addEventListener("click",()=>this.clearChat())}async clearChat(){if(confirm("Are you sure you want to clear the chat history?"))try{await fetch("/chat/clear",{method:"POST"}),this.chatWrapper.innerHTML=""}catch(e){console.error("Failed to clear chat:",e)}}parseMarkdown(e){const t=e.split("\n"),i=t.filter(e=>e.trim());if(0===i.length)return"";const s=Math.min(...i.map(e=>e.match(/^(\s*)/)[1].length)),r=t.map(e=>e.slice(s)).join("\n").trim();return rt.parse(r)}parseExistingMessages(){this.chatWrapper.querySelectorAll("div.message").forEach(e=>{const t=e.textContent;t.trim()&&(e.innerHTML=this.parseMarkdown(t))})}render(){this.parseExistingMessages(),this.initAutoComplete(),this.bindEvents()}}const ot=e=>{const t=document.querySelector("[data-latest-version]"),i=t.querySelector("a");i&&(i.href=i.href.replace("[LATEST_VERSION]",e),i.textContent=i.textContent.replace("[LATEST_VERSION]",e)),t.classList.remove("hidden")};var at=i(360),lt=i.n(at),ct=i(569),ht=i.n(ct),ut=i(563),dt=i.n(ut);class gt{constructor(e){this.trigger=e.querySelector("[data-light-gallery-trigger]"),this.gallery=lt()(this.trigger,{dynamic:!0,plugins:[ht(),dt()],backdropDuration:200,dynamicEl:[]})}refresh(e){const t=e.map(e=>JSON.parse(e.element.getAttribute("data-light-gallery-element")));this.gallery.refresh(t)}bindEvents(){this.trigger?.addEventListener("click",()=>this.gallery.openGallery())}}class pt{constructor(e,t){this.wrapper=e,this.dataTableStorage=t,this.resetBtn=e.querySelector("[data-dataTable-reset]"),this.filterManager=new s(e,new a),this.allImages=Array.from(this.wrapper.querySelectorAll("[data-image]")).map(e=>({element:e,filterables:JSON.parse(e.getAttribute("data-filterables")),active:!0})),this.lightGallery=new gt(this.wrapper)}async render(){const e=()=>{const e=this.filterManager.getActiveFilters();this.filterManager.updateDropdownState(e);const t=this.filterManager.applyFiltersToRows(this.allImages);for(const{element:e,active:i}of t)e.classList.toggle("hidden",!i);this.resetBtn.classList.toggle("hidden",!(Object.keys(e).length>0));const i=t.filter(e=>e.active),s=this.wrapper.querySelector("[data-dataTable-result-count]");s&&(s.innerText=i.length),this.lightGallery.refresh(i)};this.dataTableStorage.set({photoWall:JSON.parse(this.wrapper.getAttribute("data-default-filters"))}),this.filterManager.prefillFromStorage("photoWall"),e(),this.wrapper.querySelectorAll("[data-dataTable-filter]").forEach(t=>t.addEventListener("input",e)),this.lightGallery.bindEvents(),this.resetBtn&&this.resetBtn.addEventListener("click",t=>{t.preventDefault(),this.filterManager.resetAll(),e()}),this.wrapper.querySelectorAll("[data-datatable-filter-clear]").forEach(t=>{t.addEventListener("click",i=>{i.preventDefault();const s=t.getAttribute("data-datatable-filter-clear");this.filterManager.resetOne(s),e()})})}}const mt="undefined"!=typeof window,ft=mt&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),bt=mt&&window.devicePixelRatio>1,yt={elements_selector:".lazy",container:ft||mt?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},vt=e=>Object.assign({},yt,e),wt=function(e,t){let i;const s="LazyLoad::Initialized",r=new e(t);try{i=new CustomEvent(s,{detail:{instance:r}})}catch(e){i=document.createEvent("CustomEvent"),i.initCustomEvent(s,!1,!1,{instance:r})}window.dispatchEvent(i)},xt="src",kt="srcset",St="sizes",Ct="poster",It="llOriginalAttrs",Et="data",Tt="loading",Lt="loaded",At="applied",_t="error",zt="native",Mt="data-",Pt="ll-status",Ot=(e,t)=>e.getAttribute(Mt+t),$t=e=>Ot(e,Pt),Rt=(e,t)=>((e,t,i)=>{const s=Mt+t;null!==i?e.setAttribute(s,i):e.removeAttribute(s)})(e,Pt,t),Dt=e=>Rt(e,null),Bt=e=>null===$t(e),Ft=e=>$t(e)===zt,qt=[Tt,Lt,At,_t],Gt=(e,t,i,s)=>{e&&"function"==typeof e&&(void 0===s?void 0===i?e(t):e(t,i):e(t,i,s))},Nt=(e,t)=>{mt&&""!==t&&e.classList.add(t)},Ht=(e,t)=>{mt&&""!==t&&e.classList.remove(t)},jt=e=>e.llTempImage,Zt=(e,t)=>{if(!t)return;const i=t._observer;i&&i.unobserve(e)},Wt=(e,t)=>{e&&(e.loadingCount+=t)},Xt=(e,t)=>{e&&(e.toLoadCount=t)},Yt=e=>{let t=[];for(let i,s=0;i=e.children[s];s+=1)"SOURCE"===i.tagName&&t.push(i);return t},Vt=(e,t)=>{const i=e.parentNode;i&&"PICTURE"===i.tagName&&Yt(i).forEach(t)},Ut=(e,t)=>{Yt(e).forEach(t)},Jt=[xt],Qt=[xt,Ct],Kt=[xt,kt,St],ei=[Et],ti=e=>!!e[It],ii=e=>e[It],si=e=>delete e[It],ri=(e,t)=>{if(ti(e))return;const i={};t.forEach(t=>{i[t]=e.getAttribute(t)}),e[It]=i},ni=(e,t)=>{if(!ti(e))return;const i=ii(e);t.forEach(t=>{((e,t,i)=>{i?e.setAttribute(t,i):e.removeAttribute(t)})(e,t,i[t])})},oi=(e,t,i)=>{Nt(e,t.class_applied),Rt(e,At),i&&(t.unobserve_completed&&Zt(e,t),Gt(t.callback_applied,e,i))},ai=(e,t,i)=>{Nt(e,t.class_loading),Rt(e,Tt),i&&(Wt(i,1),Gt(t.callback_loading,e,i))},li=(e,t,i)=>{i&&e.setAttribute(t,i)},ci=(e,t)=>{li(e,St,Ot(e,t.data_sizes)),li(e,kt,Ot(e,t.data_srcset)),li(e,xt,Ot(e,t.data_src))},hi={IMG:(e,t)=>{Vt(e,e=>{ri(e,Kt),ci(e,t)}),ri(e,Kt),ci(e,t)},IFRAME:(e,t)=>{ri(e,Jt),li(e,xt,Ot(e,t.data_src))},VIDEO:(e,t)=>{Ut(e,e=>{ri(e,Jt),li(e,xt,Ot(e,t.data_src))}),ri(e,Qt),li(e,Ct,Ot(e,t.data_poster)),li(e,xt,Ot(e,t.data_src)),e.load()},OBJECT:(e,t)=>{ri(e,ei),li(e,Et,Ot(e,t.data_src))}},ui=["IMG","IFRAME","VIDEO","OBJECT"],di=(e,t)=>{!t||(e=>e.loadingCount>0)(t)||(e=>e.toLoadCount>0)(t)||Gt(e.callback_finish,t)},gi=(e,t,i)=>{e.addEventListener(t,i),e.llEvLisnrs[t]=i},pi=(e,t,i)=>{e.removeEventListener(t,i)},mi=e=>!!e.llEvLisnrs,fi=e=>{if(!mi(e))return;const t=e.llEvLisnrs;for(let i in t){const s=t[i];pi(e,i,s)}delete e.llEvLisnrs},bi=(e,t,i)=>{(e=>{delete e.llTempImage})(e),Wt(i,-1),(e=>{e&&(e.toLoadCount-=1)})(i),Ht(e,t.class_loading),t.unobserve_completed&&Zt(e,i)},yi=(e,t,i)=>{const s=jt(e)||e;mi(s)||((e,t,i)=>{mi(e)||(e.llEvLisnrs={});const s="VIDEO"===e.tagName?"loadeddata":"load";gi(e,s,t),gi(e,"error",i)})(s,r=>{((e,t,i,s)=>{const r=Ft(t);bi(t,i,s),Nt(t,i.class_loaded),Rt(t,Lt),Gt(i.callback_loaded,t,s),r||di(i,s)})(0,e,t,i),fi(s)},r=>{((e,t,i,s)=>{const r=Ft(t);bi(t,i,s),Nt(t,i.class_error),Rt(t,_t),Gt(i.callback_error,t,s),i.restore_on_error&&ni(t,Kt),r||di(i,s)})(0,e,t,i),fi(s)})},vi=(e,t,i)=>{(e=>ui.indexOf(e.tagName)>-1)(e)?((e,t,i)=>{yi(e,t,i),((e,t,i)=>{const s=hi[e.tagName];s&&(s(e,t),ai(e,t,i))})(e,t,i)})(e,t,i):((e,t,i)=>{(e=>{e.llTempImage=document.createElement("IMG")})(e),yi(e,t,i),(e=>{ti(e)||(e[It]={backgroundImage:e.style.backgroundImage})})(e),((e,t,i)=>{const s=Ot(e,t.data_bg),r=Ot(e,t.data_bg_hidpi),n=bt&&r?r:s;n&&(e.style.backgroundImage=`url("${n}")`,jt(e).setAttribute(xt,n),ai(e,t,i))})(e,t,i),((e,t,i)=>{const s=Ot(e,t.data_bg_multi),r=Ot(e,t.data_bg_multi_hidpi),n=bt&&r?r:s;n&&(e.style.backgroundImage=n,oi(e,t,i))})(e,t,i),((e,t,i)=>{const s=Ot(e,t.data_bg_set);if(!s)return;const r=s.split("|");let n=r.map(e=>`image-set(${e})`);e.style.backgroundImage=n.join(),""===e.style.backgroundImage&&(n=r.map(e=>`-webkit-image-set(${e})`),e.style.backgroundImage=n.join()),oi(e,t,i)})(e,t,i)})(e,t,i)},wi=e=>{e.removeAttribute(xt),e.removeAttribute(kt),e.removeAttribute(St)},xi=e=>{Vt(e,e=>{ni(e,Kt)}),ni(e,Kt)},ki={IMG:xi,IFRAME:e=>{ni(e,Jt)},VIDEO:e=>{Ut(e,e=>{ni(e,Jt)}),ni(e,Qt),e.load()},OBJECT:e=>{ni(e,ei)}},Si=["IMG","IFRAME","VIDEO"],Ci=e=>e.use_native&&"loading"in HTMLImageElement.prototype,Ii=e=>Array.prototype.slice.call(e),Ei=e=>e.container.querySelectorAll(e.elements_selector),Ti=e=>(e=>$t(e)===_t)(e),Li=(e,t)=>(e=>Ii(e).filter(Bt))(e||Ei(t)),Ai=function(e,t){const i=vt(e);this._settings=i,this.loadingCount=0,((e,t)=>{Ci(e)||(t._observer=new IntersectionObserver(i=>{((e,t,i)=>{e.forEach(e=>(e=>e.isIntersecting||e.intersectionRatio>0)(e)?((e,t,i,s)=>{const r=(e=>qt.indexOf($t(e))>=0)(e);Rt(e,"entered"),Nt(e,i.class_entered),Ht(e,i.class_exited),((e,t,i)=>{t.unobserve_entered&&Zt(e,i)})(e,i,s),Gt(i.callback_enter,e,t,s),r||vi(e,i,s)})(e.target,e,t,i):((e,t,i,s)=>{Bt(e)||(Nt(e,i.class_exited),((e,t,i,s)=>{i.cancel_on_exit&&(e=>$t(e)===Tt)(e)&&"IMG"===e.tagName&&(fi(e),(e=>{Vt(e,e=>{wi(e)}),wi(e)})(e),xi(e),Ht(e,i.class_loading),Wt(s,-1),Dt(e),Gt(i.callback_cancel,e,t,s))})(e,t,i,s),Gt(i.callback_exit,e,t,s))})(e.target,e,t,i))})(i,e,t)},(e=>({root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}))(e)))})(i,this),((e,t)=>{mt&&(t._onlineHandler=()=>{((e,t)=>{(e=>Ii(e).filter(Ti))(Ei(e)).forEach(t=>{Ht(t,e.class_error),Dt(t)}),t.update()})(e,t)},window.addEventListener("online",t._onlineHandler))})(i,this),this.update(t)};Ai.prototype={update:function(e){const t=this._settings,i=Li(e,t);Xt(this,i.length),ft?this.loadAll(i):Ci(t)?((e,t,i)=>{e.forEach(e=>{-1!==Si.indexOf(e.tagName)&&((e,t,i)=>{e.setAttribute("loading","lazy"),yi(e,t,i),((e,t)=>{const i=hi[e.tagName];i&&i(e,t)})(e,t),Rt(e,zt)})(e,t,i)}),Xt(i,0)})(i,t,this):((e,t)=>{(e=>{e.disconnect()})(e),((e,t)=>{t.forEach(t=>{e.observe(t)})})(e,t)})(this._observer,i)},destroy:function(){this._observer&&this._observer.disconnect(),(e=>{mt&&window.removeEventListener("online",e._onlineHandler)})(this),Ei(this._settings).forEach(e=>{si(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;Li(e,t).forEach(e=>{Zt(e,this),vi(e,t,this)})},restoreAll:function(){const e=this._settings;Ei(e).forEach(t=>{((e,t)=>{(e=>{const t=ki[e.tagName];t?t(e):(e=>{if(!ti(e))return;const t=ii(e);e.style.backgroundImage=t.backgroundImage})(e)})(e),((e,t)=>{Bt(e)||Ft(e)||(Ht(e,t.class_entered),Ht(e,t.class_exited),Ht(e,t.class_applied),Ht(e,t.class_loading),Ht(e,t.class_loaded),Ht(e,t.class_error))})(e,t),Dt(e),si(e)})(t,e)})}},Ai.load=(e,t)=>{const i=vt(t);vi(e,i)},Ai.resetStatus=e=>{Dt(e)},mt&&((e,t)=>{if(t)if(t.length)for(let i,s=0;i=t[s];s+=1)wt(e,i);else wt(e,t)})(Ai,window.lazyLoadOptions);const _i=document.querySelector("main"),zi=new a,Mi=new class{constructor(e){this.app=e,this.appContent=e.querySelector("#js-loaded-content"),this.spinner=e.querySelector("#spinner"),this.menu=document.querySelector("aside"),this.menuItems=document.querySelectorAll("nav a[data-router-navigate]:not([data-router-disabled]), aside li a[data-router-navigate]:not([data-router-disabled])"),this.mobileNavTriggerEl=document.querySelector('[data-drawer-target="drawer-navigation"]'),this.defaultRoute="/dashboard"}showLoader(){this.spinner.classList.remove("hidden"),this.spinner.classList.add("flex"),this.appContent.classList.add("hidden")}hideLoader(){this.spinner.classList.remove("flex"),this.spinner.classList.add("hidden"),this.appContent.classList.remove("hidden")}determineActiveMenuLink(e){const t=document.querySelector(`aside li a[data-router-navigate="${e}"]`);if(t)return t;const i=e.replace(/\/[^\/]*$/,"");return i===e||""===i?null:this.determineActiveMenuLink(i)}async renderContent(e,t){this.menu.hasAttribute("aria-hidden")||this.mobileNavTriggerEl.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),this.showLoader();const i=await fetch(`${e}.html`,{cache:"no-store"});this.appContent.innerHTML=await i.text(),window.scrollTo(0,0),this.hideLoader(),this.app.setAttribute("data-router-current",e),this.app.setAttribute("data-modal-current",t),this.menuItems.forEach(e=>e.setAttribute("aria-selected","false"));const s=this.determineActiveMenuLink(e);s?.setAttribute("aria-selected","true"),s?.hasAttribute("data-router-sub-menu")&&s.closest("ul")?.classList.remove("hidden");const r=document.querySelectorAll("main a[data-router-navigate]:not([data-router-disabled])");this.registerNavItems(r);const n=e.replace(window.statisticsForStrava.appUrl.basePath,"").replace(/^\/+/,"").replaceAll("/","-");document.dispatchEvent(new CustomEvent("pageWasLoaded",{bubbles:!0,detail:{page:n,modalId:t}})),document.dispatchEvent(new CustomEvent(`pageWasLoaded.${n}`,{bubbles:!0,detail:{page:n,modalId:t}}))}registerNavItems(e){e.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.getAttribute("data-router-navigate");document.dispatchEvent(new CustomEvent("navigationLinkHasBeenClicked",{bubbles:!0,detail:{link:e}})),this.navigateTo(i,null,e.hasAttribute("data-router-force-reload"))})})}registerBrowserBackAndForth(){window.onpopstate=e=>{e.state&&this.renderContent(e.state.route,e.state.modal)}}navigateTo(e,t,i=!1){(this.app.getAttribute("data-router-current")!==e||i)&&(this.renderContent(e,t),this.pushRouteToHistoryState(e,t))}pushRouteToHistoryState(e,t){const i=t?`${e}#${t}`:e;window.history.pushState({route:e,modal:t},"",i)}pushCurrentRouteToHistoryState(e){this.pushRouteToHistoryState(this.currentRoute(),e)}currentRoute(){return location.pathname.replace("/","")?location.pathname:this.defaultRoute}boot(){if(null===this.appContent)return;const e=this.currentRoute(),t=location.hash.replace("#","");this.registerNavItems(this.menuItems),this.registerBrowserBackAndForth(),this.renderContent(e,t),window.history.replaceState({route:e,modal:t},"",e+location.hash)}}(_i);Mi.boot();const Pi=new class{constructor(e){this.$main=e,this.$sideNav=document.querySelector("aside"),this.$topNav=document.querySelector("nav")}init(){const e="true"===localStorage.getItem("sideNavCollapsed");[this.$main,this.$sideNav,this.$topNav].forEach(t=>t.classList.toggle("sidebar-is-collapsed",e)),document.getElementById("toggle-sidebar-collapsed-state").addEventListener("click",()=>{const e=this.$main.classList.toggle("sidebar-is-collapsed");[this.$sideNav,this.$topNav].forEach(t=>t.classList.toggle("sidebar-is-collapsed",e)),localStorage.setItem("sideNavCollapsed",String(e)),document.dispatchEvent(new Event("sidebarWasResized"))})}}(_i),Oi=new class{constructor(e){this.router=e,this.initElements=null,this.modalSkeletonNode=document.getElementById("modal-skeleton"),this.modalContent=this.modalSkeletonNode.querySelector("#modal-content"),this.modalSpinner=this.modalSkeletonNode.querySelector(".spinner"),this.modal=null}setInitElements(e){this.initElements=e}init(e){e.querySelectorAll("a[data-model-content-url]").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const i=e.getAttribute("data-model-content-url");this.open(i),this.router.pushCurrentRouteToHistoryState(i)})})}open(e){this.close(),this.modalSpinner.classList.remove("hidden"),this.modalSpinner.classList.add("flex"),this.modal=new Modal(this.modalSkeletonNode,{placement:"bottom",closable:!0,backdropClasses:"bg-gray-900/50 fixed inset-0 z-1400",onShow:async()=>{const t=await fetch(e,{cache:"no-store"});this.modalSpinner.classList.add("hidden"),this.modalSpinner.classList.remove("flex"),this.modalContent.innerHTML=await t.text(),this.initElements(this.modalSkeletonNode),this.modalContent.querySelector("button.close")&&this.modalContent.querySelector("button.close").addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.modal.hide(),this.router.pushCurrentRouteToHistoryState()}),document.body.addEventListener("keydown",e=>{"Escape"===e.key&&this.router.pushCurrentRouteToHistoryState()},{once:!0}),document.body.addEventListener("click",e=>{"modal-skeleton"===e.target.id&&this.router.pushCurrentRouteToHistoryState()},{once:!0});const i=this.modalSkeletonNode.querySelectorAll("a[data-router-navigate]:not([data-router-disabled])");this.router.registerNavItems(i);const s=e.replace(/^\/+/,"").replaceAll("/","-");document.dispatchEvent(new CustomEvent("modalWasLoaded."+s,{bubbles:!0,cancelable:!1,detail:{modal:this.modalSkeletonNode}}))},onHide:()=>{this.modalContent.innerHTML=""}}),this.modal.show()}close(){this.modal&&this.modal.hide()}}(Mi),$i=new class{constructor(e,t,i){this.router=e,this.dataTableStorage=t,this.modalManager=i,this.allCharts=[],this.chartsPerTab=[],echarts.registerTheme("v5",(()=>{const e=["#f6efa6","#d88273","#bf444c"];return{color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:e,loading:{textColor:"red"},bar:{defaultBarGap:"20%",select:{itemStyle:{borderColor:"#212121",borderWidth:1}}},boxplot:{emphasis:{itemStyle:{shadowColor:"rgba(0,0,0,0.2)"}}},graph:{lineStyle:{color:"#aaa"},select:{itemStyle:{borderColor:"#212121"}}},heatmap:{select:{itemStyle:{borderColor:"#212121"}}},line:{symbolSize:4},pictorialBar:{select:{itemStyle:{borderColor:"#212121",borderWidth:1}}},pie:{radius:[0,"75%"],labelLine:{length2:15}},map:{defaultItemStyleColor:"#eee",label:{color:"#000"},itemStyle:{borderColor:"#444",areaColor:"#eee"},emphasis:{label:{color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}}},timeAxis:{axisLine:{lineStyle:{color:"#6E7079"}},axisLabel:{color:null},splitLine:{lineStyle:{color:["#E0E6F1"]}},splitArea:{areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},minorSplitLine:{color:"#F4F7FD"}},logAxis:{axisLine:{lineStyle:{color:"#6E7079"}},axisLabel:{color:null},splitLine:{lineStyle:{color:["#E0E6F1"]}},splitArea:{areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},minorSplitLine:{color:"#F4F7FD"}},valueAxis:{axisLine:{lineStyle:{color:"#6E7079"}},axisLabel:{color:null},splitLine:{lineStyle:{color:["#E0E6F1"]}},splitArea:{areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},minorSplitLine:{color:"#F4F7FD"}},categoryAxis:{axisLine:{lineStyle:{color:"#6E7079"}},axisLabel:{color:null},splitLine:{lineStyle:{color:["#E0E6F1"]}},splitArea:{areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}},minorSplitLine:{color:"#F4F7FD"},axisTick:{show:!0}},axisPointer:{lineStyle:{color:"#B9BEC9"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{backgroundColor:"auto",color:"#fff"},handle:{color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2}},brush:{brushStyle:{color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},defaultOutOfBrushColor:"#ddd"},calendar:{splitLine:{lineStyle:{color:"#000"}},itemStyle:{borderColor:"#ccc"},dayLabel:{margin:"50%",color:"#000"},monthLabel:{margin:5,color:"#000"},yearLabel:{margin:30,color:"#ccc"}},dataZoom:{borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleStyle:{color:"#D2DBEE",opacity:.7},textStyle:{color:"#6E7079"},brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7",opacity:.7}},defaultLocationEdgeGap:7},geo:{defaultItemStyleColor:"#eee",label:{color:"#000"},itemStyle:{borderColor:"#444"},emphasis:{label:{color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}}},grid:{left:"10%",top:60,bottom:70,borderColor:"#ccc"},legend:{top:0,bottom:null,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",itemGap:10,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",lineStyle:{inactiveColor:"#ccc"},textStyle:{color:"#333"},selectorLabel:{color:"#666",borderColor:"#666"},emphasis:{selectorLabel:{color:"#eee",backgroundColor:"#666"}},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageTextStyle:{color:"#333"}},title:{left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",textStyle:{color:"#464646"},subtextStyle:{color:"#6E7079"}},toolbox:{borderColor:"#ccc",padding:5,itemGap:8,iconStyle:{borderColor:"#666"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}},tooltip:{axisPointer:{crossStyle:{color:"#999"}},textStyle:{color:"#666"},backgroundColor:"#fff",borderWidth:1,defaultBorderColor:"#fff"},visualMap:{color:[e[2],e[1],e[0]],inactive:["rgba(0,0,0,0)"],indicatorStyle:{shadowColor:"rgba(0,0,0,0.2)"},backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",padding:5,textStyle:{color:"#333"}}}})())}init(e){const t=this.getClickHandlers(),i=[];e.querySelectorAll("[data-echarts-options]").forEach(e=>{const s=echarts.init(e,"v5"),r=JSON.parse(e.getAttribute("data-echarts-options"));["tooltip.formatter","tooltip.valueFormatter","yAxis.axisLabel.formatter","yAxis[].axisLabel.formatter","series.symbolSize","dataZoom[].labelFormatter"].forEach(e=>((e,t)=>{const i=t.split("."),s=(e,t)=>{if(!e||0===t.length)return;const i=t[0],r=t.slice(1),n=i.endsWith("[]"),o=n?i.slice(0,-2):i;if(n){const t=e?.[o];Array.isArray(t)&&t.forEach(e=>s(e,r))}else 0===r.length?e?.[o]&&e[o]in window.statisticsForStrava.callbacks&&(e[o]=window.statisticsForStrava.callbacks[e[o]]):s(e?.[o],r)};s(e,i)})(r,e)),s.setOption(r);const n=e.getAttribute("data-echarts-click");n&&t[n]&&s.on("click",function(i){const s=JSON.parse(e.getAttribute("data-echarts-click-data")||"{}");t[n](i,s)}),e.hasAttribute("data-echarts-connect")&&i.push(s),this.allCharts.push(s);const o=((e,t)=>{const i=[];let s=e.parentElement;for(;s;)t&&!s.matches(t)||i.push(s),s=s.parentElement;return i})(e,'div[role="tabpanel"]');for(const e of o){const t=e.getAttribute("id");this.chartsPerTab[t]??=[],this.chartsPerTab[t].push(s)}}),echarts.connect(i)}getClickHandlers(){return{handleMonthlyStatsClick:(e,t)=>{if(!e||!e.dataIndex||!e.seriesName)return;const i=(e.dataIndex+1).toString().padStart(2,"0"),s=`month/month-${e.seriesName}-${i}.html`;this.modalManager.open(s),this.router.pushCurrentRouteToHistoryState(s)},handleWeeklyStatsClick:(e,t)=>{if(!e||!e.dataIndex)return;const i=t.weeks;!e.dataIndex in i||(this.dataTableStorage.set({activities:{sportType:t.sportTypes,"start-date":{from:i[e.dataIndex].from,to:i[e.dataIndex].to}}}),this.router.navigateTo("/activities"))},handleActivityGridChartClick:(e,t)=>{!e||!e.value||e.value<1||(this.dataTableStorage.set({activities:{"start-date":{from:e.value[0],to:e.value[0]}}}),this.router.navigateTo("/activities"))}}}reset(){this.allCharts=[],this.chartsPerTab=[]}resizeAll(){this.allCharts.filter(e=>e.getDom().offsetParent).forEach(e=>e.resize())}resizeInTab(e){e in this.chartsPerTab&&this.chartsPerTab[e].filter(e=>e.getDom().offsetParent).forEach(e=>e.resize())}}(Mi,zi,Oi),Ri=new class{init(e){e.querySelectorAll("[data-leaflet]").forEach(function(e){const t=JSON.parse(e.getAttribute("data-leaflet")),i=L.map(e,{scrollWheelZoom:t.scrollWheelZoom||!1,minZoom:t.minZoom,maxZoom:t.maxZoom,zoomSnap:.5,zoomDelta:.5});t.tileLayer&&L.tileLayer(t.tileLayer).addTo(i);const s=L.featureGroup();if(t.routes.forEach(e=>{const i=L.Polyline.fromEncoded(e).getLatLngs();L.polyline(i,{color:"#fc6719",weight:2,opacity:.9,lineJoin:"round"}).addTo(s);const r=(e,t)=>{L.circleMarker(e,{radius:8,color:"#303030",fillColor:t,fillOpacity:1,opacity:1}).addTo(s)};t.showStartMarker&&r(i[0],"#3ba272"),t.showEndMarker&&r(i.at(-1),"#BD2D22")}),t.imageOverlay&&(L.imageOverlay(t.imageOverlay,t.bounds,{attribution:' <a href="https://zwift.com" rel="noreferrer noopener">Zwift</a>'}).addTo(i),i.setMaxBounds(t.bounds)),s.addTo(i),i.fitBounds(s.getBounds(),{maxZoom:t.maxZoom}),t.gpxLink&&L.control.downloadGpx({gpxLink:t.gpxLink}).addTo(i),!e.hasAttribute("data-leaflet-echart-connect"))return;const r=document.querySelector("div[data-echarts-options][data-leaflet-echart-connect]");if(!r)return;const n=JSON.parse(r.getAttribute("data-leaflet-echart-connect"));if(!n)return;const o=L.circleMarker([0,0],{radius:6,color:"#303030",fillColor:"#F26722",fillOpacity:0,opacity:0}).addTo(i),a=echarts.getInstanceByDom(r),l=i.getZoom();a.on("updateAxisPointer",function(e){if(!e.dataIndex||!e.dataIndex in n)return void o.setStyle({opacity:0,fillOpacity:0});const t=n[e.dataIndex];o.setLatLng(t),o.setStyle({opacity:1,fillOpacity:1}),(i.getZoom()>l||!i.getBounds().contains(t))&&i.panTo(t)})})}},Di=new class{constructor(e){this.chartManager=e}init(e){e.querySelectorAll("[data-tabs]").forEach(e=>{const t=[];let i=null;e.querySelectorAll('[role="tab"]').forEach(function(e){const s=e.getAttribute("data-tabs-target");t.push({id:s,triggerEl:e,targetEl:document.querySelector(s)}),e.hasAttribute("data-tab-default")&&(i=s)}),new Tabs(e,t,{defaultTabId:i,activeClasses:e.getAttribute("data-tabs-active-classes")||"text-strava-orange border-strava-orange hover:text-gray-600 hover:border-gray-300",inactiveClasses:e.getAttribute("data-tabs-inactive-classes")||"text-gray-500 hover:text-gray-600 border-gray-100 hover:border-gray-300",onShow:(e,t)=>{const i=t.id.replace("#","");this.chartManager.resizeInTab(i)}})})}}($i),Bi=new class{constructor(e){this.storage=e}init(){document.querySelectorAll("div[data-dataTable-settings]").forEach(e=>{const t=e.querySelector("table"),i=t?.querySelector("tbody"),r=e.querySelector(".scroll-area"),a=e.querySelector('input[type="search"]'),l=e.querySelector("[data-dataTable-reset]"),c=JSON.parse(e.getAttribute("data-dataTable-settings")),h=new s(e,this.storage),u=new o(e,i,r),d=new n(e.querySelectorAll("thead th[data-dataTable-sort]"));t&&i&&a&&(e.querySelectorAll('input[type="date"][data-default-to-today]').forEach(e=>e.valueAsDate=new Date),fetch(c.url,{cache:"no-store"}).then(async t=>{const i=await t.json();u.init(i);const s=()=>{const e=a.value.trim(),t=h.getActiveFilters();h.updateDropdownState(t);const s=h.applyFiltersToRows(i,e);u.update(s),l.classList.toggle("hidden",!(Object.keys(t).length>0||e.length>0))};h.prefillFromStorage(c.name),s(),a.addEventListener("input",((e,t=300)=>{let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>{e.apply(void 0,s)},t)}})(s)),e.querySelectorAll("[data-dataTable-filter]").forEach(e=>e.addEventListener("input",s)),d.attachListeners(i,u.cluster,r),l&&l.addEventListener("click",e=>{e.preventDefault(),a.value="",h.resetAll(),s()}),e.querySelectorAll("[data-datatable-filter-clear]").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.getAttribute("data-datatable-filter-clear");h.resetOne(i),s()})})}))})}}(zi),Fi=new class{constructor(e){this.chartManager=e}init(e){e.querySelectorAll("[data-fullscreen-trigger]").forEach(e=>{e.addEventListener("click",t=>{if(t.preventDefault(),document.fullscreenElement)return;const i=e.closest("[data-fullscreen-content]");i.requestFullscreen().then(()=>{this.chartManager.resizeAll()}),i.addEventListener("fullscreenchange",()=>{e.classList.toggle("hidden",Boolean(document.fullscreenElement)),i.classList.toggle("fullscreen-is-enabled",Boolean(document.fullscreenElement)),i.classList.toggle("group",Boolean(document.fullscreenElement))})})})}}($i),qi=new Ai({thresholds:"50px",callback_error:e=>{e.setAttribute("src",window.statisticsForStrava.placeholderBrokenImage)}}),Gi=e=>{qi.update(),Di.init(e),initPopovers(),initTooltips(),initDropdowns(),initAccordions(),Oi.init(e),$i.init(e),Ri.init(e),Fi.init(e)};Oi.setInitElements(Gi),Pi.init(),document.addEventListener("pageWasLoaded",e=>{Oi.close(),Bi.init(),$i.reset(),Gi(document),e.detail&&e.detail.modalId&&Oi.open(e.detail.modalId)}),document.addEventListener("pageWasLoaded.heatmap",()=>{const e=document.querySelector(".heatmap-wrapper");new H(e,Oi).render()}),document.addEventListener("pageWasLoaded.photos",()=>{const e=document.querySelector(".photo-wall-wrapper");new pt(e,zi).render()}),document.addEventListener("navigationLinkHasBeenClicked",e=>{e.detail&&e.detail.link&&e.detail.link.hasAttribute("data-dataTable-filters")&&zi.set(JSON.parse(e.detail.link.getAttribute("data-dataTable-filters")))}),document.addEventListener("dataTableClusterWasChanged",()=>{Oi.init(document)}),window.addEventListener("resize",function(){$i.resizeAll()}),document.addEventListener("sidebarWasResized",function(){$i.resizeAll()});const Ni=document.querySelector("a[data-modal-custom-ai]");Ni&&Ni.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=Ni.getAttribute("data-modal-custom-ai");Oi.open(t),Mi.pushCurrentRouteToHistoryState(t)}),document.addEventListener("modalWasLoaded.ai-chat",e=>{const t=e.detail.modal;new nt(t).render()}),(async()=>{await(async()=>{const e=document.querySelector("[data-latest-version]");if(!e)return;const t=e.dataset.currentVersion;if(!t)return;const i="latestReleaseCache",s=Date.now(),r=JSON.parse(localStorage.getItem(i)||"null");if(r&&s-r.timestamp<216e5)((e,t)=>{e=e.replace(/^v/,""),t=t.replace(/^v/,"");const i=e.split(".").map(Number),s=t.split(".").map(Number);for(let e=0;e<Math.max(i.length,s.length);e++){const t=i[e]||0,r=s[e]||0;if(t>r)return 1;if(t<r)return-1}return 0})(t,r.latestVersion)<0&&ot(r.latestVersion);else try{const e=await fetch("https://api.github.com/repos/robiningelbrecht/statistics-for-strava/releases/latest",{headers:{Accept:"application/vnd.github+json"}});if(!e.ok)throw new Error("Failed to fetch latest release");const r=(await e.json()).name;if(t===r)return void localStorage.setItem(i,JSON.stringify({latestVersion:r,timestamp:s}));const n=await fetch(`https://api.github.com/repos/robiningelbrecht/statistics-for-strava/actions/runs?event=push&status=completed&conclusion=success&exclude_pull_requests=true&branch=${r}`,{headers:{Accept:"application/vnd.github+json"}});if(!n.ok)throw new Error("Failed to fetch workflow runs");const{workflow_runs:o=[]}=await n.json();if(!o.find(e=>".github/workflows/docker-image.yml"===e.path))return;ot(r),localStorage.setItem(i,JSON.stringify({latestVersion:r,timestamp:s}))}catch(e){console.error("Error checking latest release:",e)}})()})()})()})();